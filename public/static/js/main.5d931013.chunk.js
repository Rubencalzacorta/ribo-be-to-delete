(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,a){e.exports={clientUrls:[{url:"activity",text:"Actividad"},{url:"loan",text:"Prestamos"},{url:"profile",text:"Perfil"}],adminUrls:[{url:"activity",text:"Actividad"},{url:"portfolio",text:"Portafolio"},{url:"client/create",text:"+ Cliente"},{url:"client/list",text:"Lista de clientes"},{url:"investor/create",text:"+ Inversionista"},{url:"investor/details",text:"Detalle Inversionista"},{url:"investor/transaction",text:"Transacciones"},{url:"loan/list",text:"Lista prestamos"},{url:"loan/period",text:"Periodo prestamos"}]}},235:function(e,a,t){e.exports=t(422)},240:function(e,a,t){},241:function(e,a,t){},30:function(e,a){e.exports={gender:[{value:"MALE",label:"Masculino"},{value:"FEMALE",label:"Femenino"}],civilStatus:[{label:"Soltero",value:"SINGLE"},{label:"Casado",value:"MARRIED"},{label:"Divorciado",value:"DIVORCED"},{label:"Viudo",value:"WIDOW"}],academicLevel:[{label:"Primaria",value:"MIDDLESCHOOL"},{label:"Secundaria",value:"HIGHSCHOOL"},{label:"Universidad",value:"UNIVERSITY"},{label:"Posgrado",value:"POSTGRADUATE"}],employmentStatus:[{label:"Empleado",value:"EMPLOYED"},{label:"Desempleado",value:"UNEMPLOYED"},{label:"Independiente",value:"INDEPENDANT"},{label:"Retirado",value:"RETIRED"},{label:"Otro",value:"OTHER"}],countries:[{label:"Per\xfa",value:"PERU"},{label:"Rep\xfablica Dominicana",value:"DOMENICAN_REPUBLIC"},{label:"Venezuela",value:"VENEZUELA"}],initialState:{client:{gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"peru",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null}}}},413:function(e,a,t){},414:function(e,a,t){},415:function(e,a,t){},420:function(e,a,t){},421:function(e,a,t){},422:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(32),c=t.n(r),i=(t(240),t(4)),s=t(8),o=t(10),m=t(9),u=t(11),d=(t(241),t(428)),p=t(426),h=t(93),E=t(39),v=t.n(E);t(47).config();var g=function e(){var a=this;Object(i.a)(this,e),this.signup=function(e,t){return a.service.post("/signup",{username:e,password:t}).then(function(e){return e.data})},this.login=function(e,t){return console.log(e,t),a.service.post("/login",{username:e,password:t}).then(function(e){return e.data})},this.loggedin=function(){return a.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return a.service.get("/logout").then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/auth"),withCredentials:!0})},f=t(424);var N=function(e){var a=e.handleLogout;return l.a.createElement("nav",{className:"navbar navbar-expand-lg"},l.a.createElement(f.a,{className:"navbar-brand",to:"/dashboard"},l.a.createElement("img",{className:"img-nav",src:"https://res.cloudinary.com/ribo/image/upload/v1553507176/logo.png",alt:"Logo"})),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse nav-list",id:"navbarSupportedContent"},l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement(f.a,{className:"nav-link",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"CLIENTE"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/client"},"REGISTRO"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/client-list"},"LISTADO"))),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement(f.a,{className:"nav-link",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"INVERSIONISTA"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/create-investor-account"},"REGISTRO"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/investor-details"},"DETALLE"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/investor-transaction"},"TRANSACCIONES"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/portfolio"},"PORTAFOLIO"))),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement(f.a,{className:"nav-link",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"PRESTAMO"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/loan-list"},"LISTADO"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/period-schedule"},"PERIODO"))))),l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/",onClick:a},"logout"))))))};var b=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg"},l.a.createElement(f.a,{className:"navbar-brand",to:"/"},l.a.createElement("img",{className:"img-nav",src:"https://res.cloudinary.com/ribo/image/upload/v1553507176/logo.png",alt:"Logo"})),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse nav-list",id:"navbarNav"},l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"C\xf3mo funciona")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Nosotros")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Contacto")))),l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/login"},"Ingresar")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/signup"},"Crear cuenta"))))))};var y=function(e){var a=e.handleLogout;return l.a.createElement("nav",{className:"navbar navbar-expand-lg"},l.a.createElement(f.a,{className:"navbar-brand",to:"/"},l.a.createElement("img",{className:"img-nav",src:"https://res.cloudinary.com/ribo/image/upload/v1553507176/logo.png",alt:"Logo"})),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse nav-list",id:"navbarNav"},l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Solicitar credito")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Mis creditos")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Contacto")))),l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/client/profile"},"Mi perfil")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/",onClick:a},"Cerrar sesi\xf3n"))))))},C=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleLogout=function(e){t.props.logout()},t.state={loggedInUser:null},t.service=new g,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(h.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){var e=this.state.loggedInUser;return e?e.admin?l.a.createElement(N,{handleLogout:this.handleLogout}):l.a.createElement(y,{handleLogout:this.handleLogout}):l.a.createElement(b,null)}}]),a}(n.Component),S=function(e){function a(){return Object(i.a)(this,a),Object(o.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("footer",{className:"page-footer font-small blue"},l.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2018 Copyright:",l.a.createElement("a",{href:"https://ribocapital.com/"}," ribocapital.com")))}}]),a}(n.Component),O=t(16),I=t(17),P=t(94),D=t.n(P),x=t(12),L=t.n(x),F=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var a=t.state.username,n=t.state.password;t.service.signup(a,n).then(function(e){t.setState({username:"",password:""}),t.props.getUser(e.user)}).catch(function(e){console.log(e),t.setState({error:"Username or Password already exist"})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state={username:"",password:""},t.service=new g,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.props.classes;return l.a.createElement("main",{className:a.main},l.a.createElement(I.g,null),l.a.createElement(I.p,{className:a.paper},l.a.createElement(I.a,{className:a.avatar},l.a.createElement(D.a,null)),l.a.createElement(I.r,{component:"h1",variant:"h5"},"Cree su cuenta"),l.a.createElement("form",{className:a.form,onSubmit:this.handleFormSubmit},l.a.createElement(I.i,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(I.k,{htmlFor:"username"},"Usuario"),l.a.createElement(I.j,{id:"username",name:"username",autoComplete:"username",autoFocus:!0,value:this.state.username,onChange:function(a){return e.handleChange(a)}})),l.a.createElement(I.i,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(I.k,{htmlFor:"password"},"Contrase\xf1a"),l.a.createElement(I.j,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(a){return e.handleChange(a)}})),l.a.createElement(I.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Log in")),l.a.createElement("h1",null,this.state.error?"Error":"")))}}]),a}(n.Component),w=L()(function(e){return{main:Object(O.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(F),k=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var a=t.state.username,n=t.state.password;t.service.login(a,n).then(function(e){t.setState({username:a,password:n,error:!1}),t.props.getUser(e)}).catch(function(e){t.setState({username:a,password:n,error:!0})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state={username:"",password:""},t.service=new g,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.props.classes;return l.a.createElement("main",{className:a.main},l.a.createElement(I.g,null),l.a.createElement(I.p,{className:a.paper},l.a.createElement(I.a,{className:a.avatar},l.a.createElement(D.a,null)),l.a.createElement(I.r,{component:"h1",variant:"h5"},"Ingrese a su cuenta"),l.a.createElement("form",{className:a.form,onSubmit:this.handleFormSubmit},l.a.createElement(I.i,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(I.k,{htmlFor:"username"},"Usuario"),l.a.createElement(I.j,{id:"username",name:"username",autoComplete:"username",autoFocus:!0,value:this.state.username,onChange:function(a){return e.handleChange(a)}})),l.a.createElement(I.i,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(I.k,{htmlFor:"password"},"Contrase\xf1a"),l.a.createElement(I.j,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(a){return e.handleChange(a)}})),l.a.createElement(I.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Ingresar")),l.a.createElement("h1",null,this.state.error?"Error":"")))}}]),a}(n.Component),A=L()(function(e){return{main:Object(O.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(k);t(47).config();var T=function e(){var a=this;Object(i.a)(this,e),this.updateAccount=function(e,t,n,l,r,c,i,s,o,m,u,d,p,h,E,v,g,f,N,b,y,C,S,O,I,P,D,x,L,F,w,k,A,T,j){return a.service.patch("/update/".concat(e),{fullName:t,firstName:n,lastName:l,gender:r,civilStatus:c,nationalId:i,nationality:s,otherNationalities:o,placeOfBirth:m,DOB:u,immigrationCertificate:d,academicLevel:p,Occupation:h,spouseFullName:E,spouseNationalId:v,spouseDOB:g,spousePlaceOfBirth:f,street:N,residenceName:b,residenceNumber:y,city:C,country:S,cellphoneNumber:O,email:I,employmentStatus:P,businessName:D,businessAddress:x,businessPosition:L,startDate:F,businessPhoneNumber:w,businessEmail:k,monthlyIncome:A,otherIncome:T,borrowerStatus:j}).then(function(e){return e.data})},this.createAccount=function(e,t,n,l,r,c,i,s,o,m,u,d,p,h,E,v,g,f,N,b,y,C,S,O,I,P,D,x,L,F,w,k,A,T){return a.service.post("/",{fullName:e,firstName:t,lastName:n,gender:l,civilStatus:r,nationalId:c,nationality:i,otherNationalities:s,placeOfBirth:o,DOB:m,immigrationCertificate:u,academicLevel:d,Occupation:p,spouseFullName:h,spouseNationalId:E,spouseDOB:v,spousePlaceOfBirth:g,street:f,residenceName:N,residenceNumber:b,city:y,country:C,cellphoneNumber:S,email:O,employmentStatus:I,businessName:P,businessAddress:D,businessPosition:x,startDate:L,businessPhoneNumber:F,businessEmail:w,monthlyIncome:k,otherIncome:A,borrowerStatus:T}).then(function(e){return e.data})},this.getClients=function(e,t){return a.service.get("/all-clients/".concat(e,"/").concat(t)).then(function(e){return e.data})},this.getClient=function(e){return a.service.get("/detail/".concat(e)).then(function(e){return e.data})},this.getInvAccounts=function(){return a.service.get("/get-accounts").then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/client"),withCredentials:!0})},j=t(13),M=t(3),_=t.n(M),R=t(30),U={gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",firstName:null,lastName:null,fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null},Y=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleSubmit=function(e){e.preventDefault();var a=t.state.fullName,n=t.state.firstName,l=t.state.lastName,r=t.state.gender,c=t.state.civilStatus,i=t.state.nationalId,s=t.state.nationality,o=t.state.otherNationalities,m=t.state.placeOfBirth,u=t.state.DOB,d=t.state.immigrationCertificate,p=t.state.academicLevel,h=t.state.Occupation,E=t.state.spouseFullName,v=t.state.spouseNationalId,g=t.state.spouseDOB,f=t.state.spousePlaceOfBirth,N=t.state.street,b=t.state.residenceName,y=t.state.residenceNumber,C=t.state.city,S=t.state.country,O=t.state.cellphoneNumber,I=t.state.email,P=t.state.employmentStatus,D=t.state.businessName,x=t.state.businessAddress,L=t.state.businessPosition,F=t.state.startDate,w=t.state.businessPhoneNumber,k=t.state.businessEmail,A=t.state.monthlyIncome,T=t.state.otherIncome;t.service.createAccount(a,n,l,r,c,i,s,o,m,u,d,p,h,E,v,g,f,N,b,y,C,S,O,I,P,D,x,L,F,w,k,A,T).then(function(e){console.log(e),"success"===e.status&&t.setState({firstName:null,lastName:null,status:"success",gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null})}).then({status:"success"}).catch(function(e){t.setState({error:e})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state=U,t.service=new T,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"onKeyPress",value:function(e){13===e.which&&e.preventDefault()}},{key:"reset",value:function(){this.setState(U)}},{key:"render",value:function(){var e=this,a=this.props.classes;return l.a.createElement("div",{className:"contentForm"},l.a.createElement("div",{className:"formHeaderHolder"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,l.a.createElement("b",null,"CREACI\xd3N DE NUEVA CUENTA")))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Informaci\xf3n General:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{label:"Nombre Completo",value:this.state.firstName||"",name:"firstName",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{label:"Nombre Completo",value:this.state.lastName||"",name:"lastName",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(_.a,{label:"Nombre Completo",value:(this.state.firstName||"")+" "+(this.state.lastName||""),name:"fullName",type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",disabled:!0}),l.a.createElement(_.a,{id:"date",name:"DOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"placeOfBirth",label:"Lugar de Nacimiento",type:"text",value:this.state.placeOfBirth||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"cellphoneNumber",label:"N\xfamero de Tel\xe9fono",type:"number",value:this.state.cellphoneNumber||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"email",label:"Correo Electr\xf3nico",type:"email",value:this.state.email||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(_.a,{select:!0,className:a.textField,name:"gender",value:this.state.gender?this.state.gender:"",onChange:function(a){return e.handleChange(a)},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"G\xe9nero",margin:"normal",required:!0},R.gender.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(_.a,{select:!0,className:a.textField,name:"civilStatus",value:this.state.civilStatus,onChange:function(a){return e.handleChange(a)},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"Estado civil",margin:"normal"},R.civilStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))),l.a.createElement("div",null,l.a.createElement(_.a,{name:"nationalId",label:"DNI / C\xe9dula / Pasaporte",type:"text",value:this.state.nationalId||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"nationality",label:"Nacionalidad",type:"text",value:this.state.nationality||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{label:"Otra Nacionalidad",name:"otherNationalities",type:"text",value:this.state.otherNationalities||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"immigrationCertificate",label:"Certificado Migratorio",type:"text",value:this.state.immigrationCertificate||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement("div",null,l.a.createElement(_.a,{select:!0,className:a.textField,name:"academicLevel",value:this.state.academicLevel,onChange:function(a){return e.handleChange(a)},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"Nivel acad\xe9mico",margin:"normal"},R.academicLevel.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del conyug\xe9:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{label:"Nombre completo",value:this.state.spousefullName||"",name:"spouseFullName",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{id:"date",name:"spouseDOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",value:this.state.spouseDOB,onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Documento de Identidad",value:this.state.spouseNationalId||"",name:"spouseNationalId",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Lugar de Nacimiento",value:this.state.spousePlaceOfBirth||"",name:"spousePlaceOfBirth",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del domicilio:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{label:"Calle",value:this.state.street,name:"street",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{label:"Residencia / Condominio",value:this.state.residenceName,name:"residenceName",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"# de Apto o Casa",value:this.state.residenceNumber,name:"residenceNumber",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(_.a,{label:"Ciudad",value:this.state.city,name:"city",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{select:!0,label:"Pa\xeds",value:this.state.country,name:"country",onChange:function(a){return e.handleChange(a)||""},className:a.textField,SelectProps:{native:!0,MenuProps:{className:a.menu}},margin:"normal",required:!0},R.countries.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos laborales:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{select:!0,className:a.textField,name:"employmentStatus",value:this.state.employmentStatus,onChange:function(a){return e.handleChange(a)||""},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"Estatus laboral",margin:"normal",required:!0},R.employmentStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(_.a,{label:"Empresa",value:this.state.businessName,name:"businessName",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{id:"date",name:"startDate",label:"Fecha de Inicio",type:"date",defaultValue:"2015-01-01",onChange:function(a){return e.handleChange(a)||""},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Posici\xf3n",value:this.state.businessPosition,name:"businessPosition",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Direccion de la Empresa",value:this.state.businessAddress,name:"businessAddress",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement("div",null,l.a.createElement(_.a,{label:"# de tel\xe9fono",value:this.state.businessPhoneNumber,name:"businessPhoneNumber",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Correo Electr\xf3nico",value:this.state.businessEmail,name:"businessEmail",onChange:function(a){return e.handleChange(a)||""},type:"email",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement(_.a,{label:"Ingreso Mensual",value:this.state.monthlyIncome,name:"monthlyIncome",onChange:function(a){return e.handleChange(a)||""},type:"number",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{label:"Otros ingresos",value:this.state.otherIncome,name:"otherIncome",onChange:function(a){return e.handleChange(a)||""},type:"number",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formLastSubmitHolder"}),l.a.createElement("div",{className:"formSubmitHolder"},"success"===this.state.status?l.a.createElement("div",{className:"alert alert-success",role:"alert"},"Cuenta creada exitosamente!"):"",this.state.error?l.a.createElement("div",{className:"alert alert-danger",role:"alert"},"La cuenta no pudo ser creada, reintente nuevamente!"):"",l.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-info"},"Crear Cuenta"))))}}]),a}(n.Component),B=Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(Y),H={gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null},q=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleSubmit=function(e){e.preventDefault();var a=t.state.user._id,n=t.state.fullName,l=t.state.gender,r=t.state.civilStatus,c=t.state.nationalId,i=t.state.nationality,s=t.state.otherNationalities,o=t.state.placeOfBirth,m=t.state.DOB,u=t.state.immigrationCertificate,d=t.state.academicLevel,p=t.state.Occupation,h=t.state.spouseFullName,E=t.state.spouseNationalId,v=t.state.spouseDOB,g=t.state.spousePlaceOfBirth,f=t.state.street,N=t.state.residenceName,b=t.state.residenceNumber,y=t.state.city,C=t.state.country,S=t.state.cellphoneNumber,O=t.state.email,I=t.state.employmentStatus,P=t.state.businessName,D=t.state.businessAddress,x=t.state.businessPosition,L=t.state.startDate,F=t.state.businessPhoneNumber,w=t.state.businessEmail,k=t.state.monthlyIncome,A=t.state.otherIncome;t.service.updateAccount(a,n,l,r,c,i,s,o,m,u,d,p,h,E,v,g,f,N,b,y,C,S,O,I,P,D,x,L,F,w,k,A,!0).then(function(e){console.log(e),"updated"===e.status&&t.setState({status:"success",gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null})}).catch(function(e){t.setState({error:e})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state=H,t.service=new T,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"onKeyPress",value:function(e){13===e.which&&e.preventDefault()}},{key:"reset",value:function(){this.setState(H)}},{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){var e=this,a=this.props.classes;return l.a.createElement("div",{className:"contentForm"},l.a.createElement("div",{className:"formHeaderHolder"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,l.a.createElement("b",null,"Activa tu perfil rellenando los siguientes datos:")))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Informaci\xf3n General:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{label:"Nombre Completo",value:this.state.fullName||"",name:"fullName",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{id:"date",name:"DOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"placeOfBirth",label:"Lugar de Nacimiento",type:"text",value:this.state.placeOfBirth||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"cellphoneNumber",label:"N\xfamero de Tel\xe9fono",type:"number",value:this.state.cellphoneNumber||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"email",label:"Correo Electr\xf3nico",type:"email",value:this.state.email||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(_.a,{select:!0,className:a.textField,name:"gender",value:this.state.gender?this.state.gender:"",onChange:function(a){return e.handleChange(a)},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"G\xe9nero",margin:"normal",required:!0},R.gender.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(_.a,{select:!0,className:a.textField,name:"civilStatus",value:this.state.civilStatus,onChange:function(a){return e.handleChange(a)},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"Estado civil",margin:"normal"},R.civilStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))),l.a.createElement("div",null,l.a.createElement(_.a,{name:"nationalId",label:"DNI / C\xe9dula / Pasaporte",type:"text",value:this.state.nationalId||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{name:"nationality",label:"Nacionalidad",type:"text",value:this.state.nationality||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{label:"Otra Nacionalidad",name:"otherNationalities",type:"text",value:this.state.otherNationalities||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"immigrationCertificate",label:"Certificado Migratorio",type:"text",value:this.state.immigrationCertificate||"",onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement("div",null,l.a.createElement(_.a,{select:!0,className:a.textField,name:"academicLevel",value:this.state.academicLevel,onChange:function(a){return e.handleChange(a)},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"Nivel acad\xe9mico",margin:"normal"},R.academicLevel.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del conyug\xe9:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{label:"Nombre completo",value:this.state.spousefullName||"",name:"spouseFullName",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{id:"date",name:"spouseDOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",value:this.state.spouseDOB,onChange:function(a){return e.handleChange(a)},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Documento de Identidad",value:this.state.spouseNationalId||"",name:"spouseNationalId",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Lugar de Nacimiento",value:this.state.spousePlaceOfBirth||"",name:"spousePlaceOfBirth",onChange:function(a){return e.handleChange(a)},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del domicilio:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{label:"Calle",value:this.state.street,name:"street",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{label:"Residencia / Condominio",value:this.state.residenceName,name:"residenceName",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"# de Apto o Casa",value:this.state.residenceNumber,name:"residenceNumber",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(_.a,{label:"Ciudad",value:this.state.city,name:"city",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{select:!0,label:"Pa\xeds",value:this.state.country,name:"country",onChange:function(a){return e.handleChange(a)||""},className:a.textField,SelectProps:{native:!0,MenuProps:{className:a.menu}},margin:"normal",required:!0},R.countries.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos laborales:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(_.a,{select:!0,className:a.textField,name:"employmentStatus",value:this.state.employmentStatus,onChange:function(a){return e.handleChange(a)||""},SelectProps:{native:!0,MenuProps:{className:a.menu}},label:"Estatus laboral",margin:"normal",required:!0},R.employmentStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(_.a,{label:"Empresa",value:this.state.businessName,name:"businessName",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{id:"date",name:"startDate",label:"Fecha de Inicio",type:"date",defaultValue:"2015-01-01",onChange:function(a){return e.handleChange(a)||""},className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Posici\xf3n",value:this.state.businessPosition,name:"businessPosition",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Direccion de la Empresa",value:this.state.businessAddress,name:"businessAddress",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement("div",null,l.a.createElement(_.a,{label:"# de tel\xe9fono",value:this.state.businessPhoneNumber,name:"businessPhoneNumber",onChange:function(a){return e.handleChange(a)||""},type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{label:"Correo Electr\xf3nico",value:this.state.businessEmail,name:"businessEmail",onChange:function(a){return e.handleChange(a)||""},type:"email",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement(_.a,{label:"Ingreso Mensual",value:this.state.monthlyIncome,name:"monthlyIncome",onChange:function(a){return e.handleChange(a)||""},type:"number",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(_.a,{label:"Otros ingresos",value:this.state.otherIncome,name:"otherIncome",onChange:function(a){return e.handleChange(a)||""},type:"number",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formLastSubmitHolder"}),l.a.createElement("div",{className:"formSubmitHolder"},"success"===this.state.status?l.a.createElement("div",{className:"alert alert-success",role:"alert"},"Cuenta creada exitosamente!"):"",this.state.error?l.a.createElement("div",{className:"alert alert-danger",role:"alert"},"La cuenta no pudo ser creada, reintente nuevamente!"):"",l.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-info"},"Crear Cuenta"))))}}]),a}(n.Component),G=(Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(q),t(33)),$=t.n(G),W=t(35),V=t.n(W),z=t(38),X=t.n(z),Z=t(34),K=t.n(Z),J=t(25),Q=t.n(J),ee=t(28),ae=t.n(ee),te=t(7),ne=t.n(te),le=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var re=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var a=e.classes,t=e.data;return l.a.createElement(ae.a,{className:a.root},l.a.createElement($.a,{className:a.table},l.a.createElement(K.a,null,l.a.createElement(Q.a,null,l.a.createElement(le,null,"Clientes"),l.a.createElement(le,null),l.a.createElement(le,null),l.a.createElement(le,null))),l.a.createElement(V.a,null,t.map(function(e,t){return l.a.createElement(Q.a,{className:a.row,key:t},l.a.createElement(le,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("h4",null,l.a.createElement(f.a,{to:"/client/".concat(e._id)},e.firstName+" "+e.lastName)),l.a.createElement("p",null,"Pais: ",e.country),l.a.createElement("p",null,"Desde: ",ne()(e.created_at).format("YYYY-MM-DD")))),l.a.createElement(le,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("h4",null,"Prestamos"),l.a.createElement("p",null,"Activos: ",e.loans.filter(function(e){return"open"===e.status}).length),l.a.createElement("p",null,"Total:",e.loans.length))),l.a.createElement(le,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("p",null,"Prestado: ",e.loans.filter(function(e){return"open"===e.status}).reduce(function(e,a){return e+a.capital},0).toLocaleString("en-GB",{style:"currency",currency:"USD"})),l.a.createElement("p",null,"Activo:   ",e.loans.reduce(function(e,a){return e+a.capital},0).toLocaleString("en-GB",{style:"currency",currency:"USD"})))),l.a.createElement(le,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("p",null,"Amortizado: ",parseInt(e.loans.reduce(function(e,a){return e+(a.totalPaid?a.totalPaid:0)},0)).toLocaleString("en-GB",{style:"currency",currency:"USD"})),l.a.createElement("p",null,"Por pagar:  ",(parseInt(e.loans.reduce(function(e,a){return e+a.capital},0))-parseInt(e.loans.reduce(function(e,a){return e+(a.totalPaid?a.totalPaid:0)},0))).toLocaleString("en-GB",{style:"currency",currency:"USD"})))))}))))}),ce=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={clients:[],getClients:!1},t.service=new T,t.handleChange=function(e){var a,n=e.target,l=n.name,r=n.value;""===r?t.setState({getClients:!1,clients:[]}):t.setState((a={},Object(O.a)(a,l,r),Object(O.a)(a,"getClients",!0),a))},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchClients",value:function(){var e=this;this.service.getClients(this.props.userLocation,this.state.fullName).then(function(a){e.setState({getClients:!1,clients:a})}).catch(function(a){e.setState({clients:!1,getClients:!1})})}},{key:"onKeyPress",value:function(e){13===e.which&&this.fetchClients()}},{key:"render",value:function(){var e=this,a=this.state.clients;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{class:"input-group mb-3"},l.a.createElement("div",{class:"input-group-prepend"},l.a.createElement("span",{class:"input-group-text",id:"basic-addon1"},"Buscar cliente")),l.a.createElement("input",{type:"text",name:"fullName",onKeyDown:function(a){return e.onKeyPress(a)},onChange:function(a){return e.handleChange(a)},class:"form-control","aria-label":"Username","aria-describedby":"basic-addon1"})),a.length>0?l.a.createElement(re,{data:a}):"")}}]),a}(n.Component);t(47).config();var ie=function e(){var a=this;Object(i.a)(this,e),this.getLoanDetails=function(){return a.service.get("/").then(function(e){return e.data})},this.getLoanCompleteDetails=function(e){return a.service.get("/complete-details/".concat(e)).then(function(e){return e.data})},this.getPeriodSchedule=function(e,t,n){return a.service.get("/schedule/".concat(e,"/").concat(t,"/").concat(n)).then(function(e){return e.data})},this.getOpenLoanDetails=function(){return a.service.get("/open").then(function(e){return e.data})},this.getLoanSchedule=function(e){return a.service.get("/loanschedule/".concat(e),{loanId:e}).then(function(e){return e.data})},this.getWeekSchedule=function(){return a.service.get("/current-week").then(function(e){return e.data})},this.createLoan=function(e,t,n,l,r,c,i,s,o,m,u,d){return a.service.post("/create",{_borrower:e,collateralType:t,collateralValue:n,collateralDescription:l,period:r,startDate:c,duration:i,capital:s,interest:o,loanType:m,useOfFunds:u,toInvest:d}).then(function(e){return e.data})},this.makePayment=function(e){return a.service.patch("/installmentpmt/".concat(e.paymentId),{payment:e}).then(function(e){return e.data})},this.deletePayment=function(e){return a.service.delete("/deletepmt/".concat(e)).then(function(e){return e.data})},this.deleteLoan=function(e){return a.service.delete("/".concat(e)).then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/loan"),withCredentials:!0})},se=t(172),oe=t.n(se),me=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.handleChangeFees=function(e){var a=e.target.value,n=t.fees[a].fee;t.setState({fee:n})},t.openPaymentOption=function(e,a,n,l,r){e.preventDefault(),t.setState({openPayment:!0,date:new Date(a).toISOString().substring(0,10),interestToPay:n.toFixed(5),capitalToPay:l.toFixed(5),paymentId:r})},t.closePaymentOption=function(e){e.preventDefault(),t.setState({openPayment:!1,date:null,interestToPay:null,capitalToPay:null,paymentId:null})},t.fees=[{text:"Patricia 33.3%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.333333333}]},{text:"Patricia 45%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.45},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Patricia 30%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.3},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Patricia 50%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.5}]},{text:"Miguel 10%",fee:[{admin:"5c80fd19a5b4b86c15c18b8c",fee:.1}]}],t.makePayment=function(e,a,n,l,r,c,i){t.service.makePayment(a,n,l,r,c,i).then(function(e){t.fetchLoanSchedule()}).then(function(){"world"!==t.props.location?t.fetchLoans():t.fetchOpenLoans()}).then(function(){t.setState({openPayment:!1,accounts:["PLPERU","REMPERU","GCUS","GFUS"],feeDistribution:[{participants:"P",text:"Patricia 33.33%"},{participants:"PG",text:"Patricia 50%"},{participants:"PM",text:"Patricia 30%, Miguel 10%"},{participants:"GPM",text:"Patricia 45%, Miguel 10%"},{participants:"M",text:"Miguel 10%"}],paymentId:null,cashAccount:null,date:null,capitalToPay:null,interestToPay:null,fee:[]})}).catch(function(e){t.setState({loanSchedule:!1})})},t.deletePayment=function(e){t.service.deletePayment(e).then(function(e){t.fetchOpenLoans(),t.fetchLoanSchedule(),t.setState({openPayment:!1,paymentId:null,cashAccount:null,date:null,capital:null,interest:null,fee:[]})}).catch(function(e){t.setState({loanSchedule:!1})})},t.state={loanId:"",accounts:["PLPERU","REMPERU","GCUS","GFUS"],feeDistribution:[{participants:"P",text:"Patricia 33.33%"},{participants:"PG",text:"Patricia 50%"},{participants:"PM",text:"Patricia 30%, Miguel 10%"},{participants:"GPM",text:"Patricia 45%, Miguel 10%"},{participants:"M",text:"Miguel 10%"}],paymentId:null,cashAccount:null,interestToPay:0,capitalToPay:0,totalToPay:0,date:null,capital:null,interest:null,loans:[],openPayment:!1,fee:[]},t.service=new ie,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchOpenLoans",value:function(){var e=this;0===this.state.loans.length&&this.service.getOpenLoanDetails().then(function(a){"peru"===e.props.location.toLowerCase()&&(a=a.filter(function(e){return"peru"===e._borrower.country.toLowerCase()})),e.setState({loans:a})}).catch(function(a){e.setState({loans:!1})})}},{key:"fetchLoans",value:function(){var e=this;0===this.state.loans.length&&this.service.getLoanDetails().then(function(a){e.setState({loans:a})}).catch(function(a){e.setState({loans:!1})})}},{key:"fetchLoanSchedule",value:function(e){var a=this;e&&e.preventDefault();var t=this.state.loanId;this.service.getLoanSchedule(t).then(function(e){a.setState({loanSchedule:e})}).catch(function(e){a.setState({loanSchedule:!1})})}},{key:"render",value:function(){var e=this;return"world"===this.props.location.toLowerCase()?this.fetchLoans():this.fetchOpenLoans(),l.a.createElement("div",{className:"content"},l.a.createElement("h2",{className:"display-6"},"Pago de prestamo:"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Prestamo:"),l.a.createElement("select",{className:"form-control",name:"loanId",id:"loanId",value:this.state.loanId,onChange:function(a){return e.handleChange(a)}},0===this.state.loans.length?l.a.createElement("option",null,"loading..."):l.a.createElement("option",null,"Seleccione un prestamo"),this.state.loans.length>0?this.state.loans.map(function(e){return l.a.createElement("option",{key:e._id,value:e._id},e._borrower.fullName," - ",e.capital)}):"")),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Numero de Prestamo:"),l.a.createElement("input",{className:"form-control",type:"text",step:"any",name:"loanId",value:this.state.loanId,disabled:!0})),l.a.createElement("div",{className:"form-group col-md-2 "},l.a.createElement("button",{className:"btn btn-info",onClick:function(a){return e.fetchLoanSchedule(a)}},"Cronograma de pago")))),!0===this.state.openPayment?l.a.createElement("div",null,l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Intereses a pagar:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"interestToPay",value:this.state.interestToPay,onChange:function(a){return e.handleChange(a)}})),l.a.createElement("div",{className:" form-group col-md-4"},l.a.createElement("label",null,"Capital a pagar:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"capitalToPay",value:this.state.capitalToPay,onChange:function(a){return e.handleChange(a)}}))),l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-4",id:"account_holder"},l.a.createElement("label",null,"Cuenta a depositar:"),l.a.createElement("select",{className:"form-control",name:"cashAccount",id:"cashAccount",value:this.state.cashAccount,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",null,"Seleccione una cuenta"),this.state.accounts.map(function(e){return l.a.createElement("option",{value:e},e)}))),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Fecha de pago"),l.a.createElement("input",{type:"date",className:"form-control",id:"date",name:"date",value:this.state.date,onChange:function(a){return e.handleChange(a)}})),l.a.createElement("div",{className:"form-group col-md-4",id:"account_holder"},l.a.createElement("label",null,"Distribucion de fees:"),l.a.createElement("select",{className:"form-control",name:"feeIndex",id:"feeIndex",value:this.state.feeIndex,onChange:function(a){return e.handleChangeFees(a)}},l.a.createElement("option",null,"Seleccione una opci\xf3n:"),this.fees.map(function(a,t){return l.a.createElement("option",{value:t,onChange:e.handleChangeFees},a.text)})))),l.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(a){return e.makePayment(a,e.state.date,e.state.capitalToPay,e.state.interestToPay,e.state.paymentId,e.state.cashAccount,e.state.fee)}},"Pagar"),l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(a){return e.closePaymentOption(a)}},"Cancelar")):"",this.state.loanSchedule?l.a.createElement("table",{className:"table table-striped table-hover table-condensed payment-schedule"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"#"),l.a.createElement("th",{scope:"col"},"tracking"),l.a.createElement("th",{scope:"col"},"Fecha de Pago"),l.a.createElement("th",{scope:"col"},"Interes"),l.a.createElement("th",{scope:"col"},"Capital"),l.a.createElement("th",{scope:"col"},"Cuota"),l.a.createElement("th",{scope:"col"},"Balance"),l.a.createElement("th",{scope:"col"},"Pago Capital"),l.a.createElement("th",{scope:"col"},"Pago Intereses"),l.a.createElement("th",{scope:"col"},"Pagar"))),l.a.createElement("tbody",null,this.state.loanSchedule.map(function(a,t){return l.a.createElement("tr",{key:t},l.a.createElement("th",{scope:"row"},t),l.a.createElement("td",null,a.tracking),l.a.createElement("td",null,l.a.createElement(oe.a,{format:"YYYY-MM-DD"},a.date)),l.a.createElement("td",null,parseFloat(a.interest).toFixed(2)),l.a.createElement("td",null,parseFloat(a.principal).toFixed(2)),l.a.createElement("td",null,parseFloat(a.payment).toFixed(2)),l.a.createElement("td",null,parseFloat(a.balance).toFixed(2)),isNaN(parseFloat(a.principal_pmt))?l.a.createElement("td",null,"0"):l.a.createElement("td",null," ",parseFloat(a.principal_pmt).toFixed(2)," "),isNaN(parseFloat(a.interest_pmt))?l.a.createElement("td",null,"0"):l.a.createElement("td",null," ",parseFloat(a.interest_pmt).toFixed(2)," "),l.a.createElement("td",null,parseFloat(a.principal_pmt)>0||parseFloat(a.interest_pmt)>0||0===parseFloat(t)?0!==parseFloat(t)?l.a.createElement("i",{class:"material-icons",onClick:function(t){return e.deletePayment(a._id)}},"delete_sweep"):"":l.a.createElement("i",{class:"material-icons",onClick:function(t){return e.openPaymentOption(t,a.date,a.interest,a.principal,a._id)}},"add_circle")))}))):"")}}]),a}(n.Component),ue=t(179),de=t(425);t(47).config();var pe=function e(){var a=this;Object(i.a)(this,e),this.transactionInvestor=function(e,t,n,l,r,c,i){return a.service.post("/",{_investor:e,cashAccount:t,concept:n,debit:l,credit:r,date:c,comment:i}).then(function(e){return e.data})},this.getLoanInvestorDetails=function(e){return a.service.get("/loaninvestordetails/".concat(e)).then(function(e){return e.data})},this.getInvestorTransactions=function(e){return a.service.get("/list/".concat(e)).then(function(e){return e.data})},this.getInvestorsAvailability=function(e){return a.service.get("/totals/".concat(e)).then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/transaction"),withCredentials:!0})};var he=function(e){var a=e.loanSchedule;return l.a.createElement("div",{className:"loan-schedule-holder",style:{margin:"0 auto"}},l.a.createElement("div",{className:"loan-schedule-head "},l.a.createElement("div",{className:"detail-schedule head-date"},l.a.createElement("p",{className:"title"},"FECHA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERES")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CUOTA"))),a.map(function(e,a){return l.a.createElement("div",{key:a,className:"loan-schedule-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("p",{className:"acc-total"},ne()(e.date).format("YY-MM-DD"))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},(e.interest+e.principal).toLocaleString(void 0,{maximumFractionDigits:2}))))}))},Ee=t(46),ve=t.n(Ee),ge=t(98),fe=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).componentDidMount=function(){t.fetchAccountsTotals();var e=t.props.match.params.clientId;t.setState({_id:e})},t.handleFormSubmit=function(e){e.preventDefault();var a=t.state._id,n=t.state.collateralType,l=parseFloat(t.state.collateralValue),r=t.state.collateralDescription,c=t.state.loanPeriod,i=t.state.startDate,s=parseFloat(t.state.loanDuration),o=parseFloat(t.state.loanAmount),m=parseFloat(t.state.loanInterest),u=t.state.loanType,d=t.state.useOfFunds,p=t.state.investors;console.log(m),t.LoanService.createLoan(a,n,l,r,c,i,s,o,m,u,d,p).then(function(e){t.setState({_id:"",collateralType:"",collateralValue:0,collateralDescription:"",startDate:"",loanDuration:0,loanAmount:0,loanInterest:0,loanType:"linear",payment:0,interestPmt:0,capitalPmt:0,open:!1,loanFinalPayment:0,loanInterestFinalPayment:0,loanCapitalFinalPayment:0,investor:"",useOfFunds:"",investmentAmount:0,investors:[]}),t.props.history.push("/loan/".concat(e._id))}).catch(function(e){t.setState({error:e})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.handleOpen=function(){t.setState({open:!0})},t.handleClose=function(){t.setState({open:!1})},t.handleSelectedInvestor=function(e){var a=e.target,n=a.name,l=a.value,r=t.state.accounts.map(function(e){return e._id}).indexOf(l);t.setState(Object(O.a)({},n,l)),t.setState({investorAvailability:parseFloat(t.state.accounts[r].accumTotal)})},t.handleInvestment=function(e){var a=e.target,n=a.name,l=a.value;console.log(l),isNaN(l)&&(l=0);var r=t.state.accounts.map(function(e){return e._id}).indexOf(t.state.investor),c=parseFloat(t.state.accounts[r].accumTotal)-parseFloat(l),i=parseFloat(l)/parseFloat(t.state.loanAmount);t.setState(Object(O.a)({},n,l)),t.setState({investorAvailability:c}),t.setState({pct:i})},t.handleNewInvestor=function(){var e=t.state.investor,a=parseFloat(t.state.investmentAmount),n=t.state.pct,l=t.state.cashAccount;t.setState({investors:[].concat(Object(ue.a)(t.state.investors),[{_investor:e,amount:a,pct:n,cashAccount:l}]),investor:"",investorAvailability:0,pct:0,investmentAmount:0})},t.deleteInvestor=function(e){var a=t.state.investors;a.splice(e,1),t.setState({investors:a})},t.calcLoanSchedule=function(){var e=t.state,a=e._id,n=e.loanPeriod,l=e.loanDuration,r=e.loanInterest,c=e.loanAmount,i=e.startDate;if("linear"===t.state.loanType){var s=Object(ge.linearLoan)(a,n,l,r,c,i);t.setState({loanSchedule:s,open:!0})}else if("lumpSum"===t.state.loanType){var o=Object(ge.lumpSumLoan)(a,n,l,r,c,i);t.setState({loanSchedule:o,open:!0})}else if("payDay"===t.state.loanType){console.log("aqui");var m=Object(ge.payDayLoan)(a,n,l,r,c,i);t.setState({loanSchedule:m,open:!0})}},t.state={_id:"",collateralType:"",collateralValue:0,collateralDescription:"",startDate:"",open:!1,loanDuration:0,loanAmount:0,loanInterest:0,loanType:"linear",loanPeriod:"monthly",payment:0,interestPmt:0,capitalPmt:0,loanFinalPayment:0,loanInterestFinalPayment:0,loanCapitalFinalPayment:0,investor:"",useOfFunds:"",cashAccounts:["PLPERU","REMPERU","GCUS","GFUS"],investmentAmount:0,investors:[]},t.ClientService=new T,t.TransactionService=new pe,t.LoanService=new ie,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchAccountsTotals",value:function(){var e=this;if(!this.state.accounts){var a=this.props.userLocation;console.log(a),this.TransactionService.getInvestorsAvailability(a).then(function(a){e.setState({accounts:a})}).catch(function(a){e.setState({accounts:!1})})}}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"content"},l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("h2",{className:" display-6"},"NUEVO PRESTAMO"),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},"Datos b\xe1sicos"),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-12"},l.a.createElement("label",null,"Uso de los fondos:"),l.a.createElement("input",{className:"form-control",type:"text",step:"any",name:"useOfFunds",value:this.state.useOfFunds,onChange:function(a){return e.handleChange(a)},required:!0}))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Colateral:"),l.a.createElement("select",{className:"form-control",name:"collateralType",value:this.state.collateralType,onChange:function(a){return e.handleChange(a)},required:!0},l.a.createElement("option",{value:"NoCollateral"},"Sin Colateral"),l.a.createElement("option",{value:"automobiles"},"Autom\xf3vil"),l.a.createElement("option",{value:"electronic_items"},"Equipos electronicos"),l.a.createElement("option",{value:"insurance_policies"},"Poliza de Seguro"),l.a.createElement("option",{value:"investments"},"Inversiones"),l.a.createElement("option",{value:"machinery_and_equipment"},"Maquinaria y Equipos"),l.a.createElement("option",{value:"real_estate"},"Bienes Raices"),l.a.createElement("option",{value:"valuables_and_collectibles"},"Valuables y coleccionables"))),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Valor del Colateral:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"collateralValue",value:this.state.collateralValue,onChange:function(a){return e.handleChange(a)},required:!0}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{form:"collateral_description"},"Descripci\xf3n del Colateral"),l.a.createElement("textarea",{className:"form-control col-md-12",name:"collateralDescription",id:"collateralDescription",rows:"4",value:this.state.collateralDescription,onChange:function(a){return e.handleChange(a)}}))))),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},"Detalles del prestamo"),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Fecha de Inicio"),l.a.createElement("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",value:this.state.startDate,onChange:function(a){return e.handleChange(a)},required:!0})),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Frequencia:"),l.a.createElement("select",{id:"loan_type",className:"form-control",name:"loanPeriod",value:this.state.loanPeriod,onChange:function(a){return e.handleChange(a)},required:!0},l.a.createElement("option",{defaultValue:"monthly"},"Mensual"),l.a.createElement("option",{value:"biWeekly"},"Quincenal"),l.a.createElement("option",{value:"payDay"},"Dia de pago")))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Esquema:"),l.a.createElement("select",{id:"loan_type",className:"form-control",name:"loanType",value:this.state.loanType,onChange:function(a){return e.handleChange(a)},required:!0},l.a.createElement("option",{defaultValue:"linear"},"Pagos Iguales + Interes + Sin Amort"),l.a.createElement("option",{value:"payDay"},"Dia de pago"),l.a.createElement("option",{value:"lumpSum"},"Final PMTs + Interest + No Amort"))),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Principal:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",id:"loanAmount",name:"loanAmount",value:this.state.loanAmount,onChange:function(a){return e.handleChange(a)},required:!0}))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Duracion:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",id:"loanDuration",name:"loanDuration",value:this.state.loanDuration,onChange:function(a){return e.handleChange(a)},required:!0})),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Tasa de Interes (M):"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",id:"loanInterest",name:"loanInterest",value:this.state.loanInterest,onChange:function(a){return e.handleChange(a)},required:!0}))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"calc-button"},l.a.createElement("button",{type:"button",className:"btn btn-info",onClick:function(a){return e.calcLoanSchedule(a)}},"Cronograma"),l.a.createElement(ve.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},l.a.createElement(he,{loanSchedule:this.state.loanSchedule}))))))),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},"Inversionista"),l.a.createElement("div",{className:"form-row ",id:"participants"},l.a.createElement("div",{className:"form-group col-md-6",id:"investor-0"},l.a.createElement("label",null,"Cuenta Inversionista:"),l.a.createElement("select",{className:"form-control",name:"investor",value:this.state.investor,onChange:function(a){return e.handleSelectedInvestor(a)}},l.a.createElement("option",null,"Seleccionar Cuenta"),this.state.accounts?this.state.accounts.map(function(e,a){return l.a.createElement("option",{key:a,value:e._id},e.investor[0].firstName+" "+e.investor[0].lastName+" "+e.investor[0].location)}):"")),l.a.createElement("div",{className:"form-group col-md-6",id:"investor-0"},l.a.createElement("label",null,"Cuenta de efectivo:"),l.a.createElement("select",{className:"form-control",name:"cashAccount",value:this.state.cashAccount,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",null,"Seleccionar Cuenta"),this.state.cashAccounts?this.state.cashAccounts.map(function(e,a){return l.a.createElement("option",{key:a,value:e._id},e)}):"")),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Inversion:"),l.a.createElement("input",{className:"form-control",type:"text",step:"any",name:"investmentAmount",value:this.state.investmentAmount,onChange:function(a){return e.handleInvestment(a)}})),l.a.createElement("div",{className:"form-group col-md-3"},l.a.createElement("label",null,"Disponible:"),l.a.createElement("input",{disabled:!0,className:"form-control",type:"text",step:"any",name:"availableCash",value:this.state.investorAvailability})),l.a.createElement("div",{className:"form-group col-md-3"},l.a.createElement("label",null,"Porcentage:"),l.a.createElement("input",{disabled:!0,className:"form-control",type:"text",step:"any",name:"pct",value:this.state.pct}))),l.a.createElement("div",{className:"add_inv form-group align-bottom"},l.a.createElement("button",{type:"button",className:"btn btn-success align-bottom",onClick:function(){return e.handleNewInvestor()}},"Agregar Inversionista"))),l.a.createElement("div",{class:"card-body"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Inversionista"),l.a.createElement("th",{scope:"col"},"Efectivo"),l.a.createElement("th",{scope:"col"},"Monto"),l.a.createElement("th",{scope:"col"},"Porcentaje"),l.a.createElement("th",{scope:"col"},"Acci\xf3n"))),l.a.createElement("tbody",null,this.state.investors.length>0?this.state.investors.map(function(a,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,a._investor),l.a.createElement("td",null,a.cashAccount),l.a.createElement("td",null,a.amount),l.a.createElement("td",null,a.pct),l.a.createElement("td",null,l.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(a){return e.deleteInvestor(a)}},"X")))}):l.a.createElement("tr",null,l.a.createElement("td",null,"Agregue Inversionista"))))))),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("div",null,l.a.createElement("button",{type:"submit",className:"btn btn-info",id:"submit_button"},"Crear")))))))}}]),a}(n.Component),Ne=Object(de.a)(fe);t(47).config();var be=function e(){var a=this;Object(i.a)(this,e),this.createInvestor=function(e,t,n){return a.service.post("/",{firstName:e,lastName:t,location:n}).then(function(e){return e.data})},this.getInvestors=function(){return a.service.get("/investor/list").then(function(e){return e.data})},this.getInvestorInvestments=function(e){return a.service.get("/investments/".concat(e)).then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/investor"),withCredentials:!0})},ye=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var a=t.state.firstName,n=t.state.lastName,l=t.state.location;t.service.createInvestor(a,n,l).then(function(e){t.setState({firstName:"",lastName:"",location:""})}).catch(function(e){t.setState({error:e})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state={firstName:"",lastName:"",location:"Peru"},t.service=new be,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{class:"content"},l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{class:"form-row"},l.a.createElement("div",{class:"form-group col-md-6"},l.a.createElement("label",{for:"name"},"Nombre:"),l.a.createElement("input",{type:"text",class:"form-control",name:"firstName",value:this.state.firstName,onChange:function(a){return e.handleChange(a)}})),l.a.createElement("div",{class:"form-group col-md-6"},l.a.createElement("label",{for:"lastName"},"Apellido:"),l.a.createElement("input",{type:"text",class:"form-control",name:"lastName",value:this.state.lastName,onChange:function(a){return e.handleChange(a)}})),l.a.createElement("div",{class:"form-group col-md-6"},l.a.createElement("label",{for:"location"},"Region:"),l.a.createElement("select",{class:"form-control",name:"location",value:this.state.location,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",{value:"Peru"},"Peru"),l.a.createElement("option",{value:"USA"},"USA")))),l.a.createElement("button",{type:"submit",class:"btn btn-info"},"Crear Cuenta de Inversi\xf3n")))}}]),a}(n.Component),Ce=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var a=t.state._investor,n=t.state.cashAccount,l=t.state.concept,r=t.state.txDate,c=t.state.txAmount,i=t.state.comment,s=0,o=0;"WITHDRAWAL"===l||"COST"===l?(s=0,o=c):(s=c,o=0),t.TransactionService.transactionInvestor(a,n,l,s,o,r,i).then(function(e){t.setState({_investor:"",cashAccount:"",concept:"",date:null,amount:0,comment:""})}).catch(function(e){t.setState({error:e})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state={_investor:"",cashAccount:"",concept:"",debit:0,credit:0},t.TransactionService=new pe,t.InvestorService=new be,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchInvestors",value:function(){var e=this;this.state.investors||(console.log("fetching"),this.InvestorService.getInvestors().then(function(a){"peru"===e.props.location.toLowerCase()&&(a=a.filter(function(e){return"peru"===e.location.toLowerCase()})),e.setState({investors:a})}).catch(function(a){e.setState({clients:!1})}))}},{key:"render",value:function(){var e=this;this.fetchInvestors();var a=["PLPERU","REMPERU","GCUS","GFUS"];return l.a.createElement("div",{className:"content"},l.a.createElement("h2",{className:"display-6"},"Nueva Transacci\xf3n:"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6",id:"account_holder"},l.a.createElement("label",null,"Inversionista:"),l.a.createElement("select",{className:"form-control",name:"_investor",id:"investor",value:this.state._investor,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",null,"Seleccionar Inversionista"),this.state.investors?this.state.investors.map(function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.location+" - "+e.firstName+" "+e.lastName)}):"")),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Numero de Cuenta:"),l.a.createElement("select",{className:"form-control",name:"cashAccount",id:"cashAccount",value:this.state.cashAccount,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",null,"Cuenta de efectivo:"),a?a.map(function(e,a){return l.a.createElement("option",{key:a,value:e},e)}):"")),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Fecha:"),l.a.createElement("input",{className:"form-control",type:"date",step:"any",name:"txDate",value:this.state.txDate,onChange:function(a){return e.handleChange(a)}})),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Concepto:"),l.a.createElement("select",{className:"form-control",name:"concept",id:"concept",value:this.state.concept,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",null,"Seleccionar concepto"),l.a.createElement("option",{value:"DEPOSIT"},"Deposito"),l.a.createElement("option",{value:"WITHDRAWAL"},"Retiro"),l.a.createElement("option",{value:"COST"},"Costo"))),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Cantidad:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"txAmount",value:this.state.txAmount,onChange:function(a){return e.handleChange(a)}})),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Comentario:"),l.a.createElement("input",{className:"form-control",type:"string",step:"any",name:"comment",value:this.state.comment,onChange:function(a){return e.handleChange(a)}})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit",className:"btn btn-info",id:"submit_button"},"Insertar Transacci\xf3n")))))}}]),a}(n.Component),Se=t(26),Oe=t.n(Se),Ie=t(40),Pe=t(56),De=t.n(Pe),xe=t(90),Le=t.n(xe),Fe=t(65),we=t.n(Fe),ke=t(89),Ae=t.n(ke),Te=t(43),je=t.n(Te),Me=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var _e=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var a=e.classes,t=e.data,n=0;return l.a.createElement(ae.a,{className:a.root},l.a.createElement($.a,{className:a.table},l.a.createElement(K.a,null,l.a.createElement(Q.a,null,l.a.createElement(Me,{align:"right"},"Fecha de Pago"),l.a.createElement(Me,null,"Prestatario"),l.a.createElement(Me,{align:"right"},"Concepto"),l.a.createElement(Me,{align:"right"},"Debito"),l.a.createElement(Me,{align:"right"},"Credito"),l.a.createElement(Me,{align:"right"},"Total"),l.a.createElement(Me,{align:"right"},"Cuenta"),l.a.createElement(Me,{align:"right"},"Comentario"))),l.a.createElement(V.a,null,t.map(function(e,t){return n+=e.debit-e.credit,l.a.createElement(Q.a,{className:a.row,key:t},l.a.createElement(Me,{align:"right"},ne()(e.date).format("YYYY-MM-DD")),l.a.createElement(Me,{component:"th",scope:"row"},e._loan?e._loan._borrower.fullName+" - "+e._loan.capital:""),l.a.createElement(Me,{align:"right"},e.concept),l.a.createElement(Me,{align:"right"},e.debit.toFixed(4)),l.a.createElement(Me,{align:"right"},e.credit.toFixed(4)),l.a.createElement(Me,{align:"right"},n.toFixed(4)),l.a.createElement(Me,{align:"right"},e.cashAccount),l.a.createElement(Me,{align:"right"},e.comment))}))))}),Re=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var Ue=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var a=e.classes,t=e.investments;return l.a.createElement(ae.a,{className:a.root},l.a.createElement($.a,{className:a.table},l.a.createElement(K.a,null,l.a.createElement(Q.a,null,l.a.createElement(Re,{align:"right"},"Fecha"),l.a.createElement(Re,{align:"left"},"Prestamo"),l.a.createElement(Re,null,"Monto"),l.a.createElement(Re,{align:"right"}," % "),l.a.createElement(Re,{align:"right"},"Total invertido"))),l.a.createElement(V.a,null,t.map(function(e,t){return l.a.createElement(Q.a,{className:a.row,key:t},l.a.createElement(Re,{align:"right"},ne()(e._loan.startDate).format("YYYY-MM-DD")),l.a.createElement(Re,{align:"left",component:"th",scope:"row"},e._loan?e._loan._borrower.fullName+" - "+e._loan.capital:""),l.a.createElement(Re,{align:"right"},parseInt(e.amount/e.pct)),l.a.createElement(Re,{align:"right"},parseFloat(100*e.pct).toFixed(2)+"%"),l.a.createElement(Re,{align:"right"},e.amount.toFixed(2)))}))))}),Ye=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var Be=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var a=e.classes,t=e.loanDetails;return l.a.createElement(ae.a,{className:a.root},l.a.createElement($.a,{className:a.table},l.a.createElement(K.a,null,l.a.createElement(Q.a,null,l.a.createElement(Ye,{align:"left"},"Nombre"),l.a.createElement(Ye,{align:"right"},"Inversi\xf3n"),l.a.createElement(Ye,{align:"right"},"%"),l.a.createElement(Ye,{align:"right"},"Intereses"),l.a.createElement(Ye,{align:"right"},"Capital"),l.a.createElement(Ye,{align:"right"},"Ingreso Fee"),l.a.createElement(Ye,{align:"right"},"Egreso Fee"),l.a.createElement(Ye,{align:"right"},"Ingreso Total"))),l.a.createElement(V.a,null,t.map(function(e,t){return l.a.createElement(Q.a,{className:a.row,key:t},l.a.createElement(Ye,{align:"left",component:"th",scope:"row"},e.name," "),l.a.createElement(Ye,{align:"right"},e.investment.toFixed(2)),l.a.createElement(Ye,{align:"right"},100*parseFloat(e.ownership.toFixed(2)),"%"),l.a.createElement(Ye,{align:"right"},e.interest.toFixed(2)),l.a.createElement(Ye,{align:"right"},e.capital.toFixed(2)),l.a.createElement(Ye,{align:"right"},e.feeIncome.toFixed(2)),l.a.createElement(Ye,{align:"right"},e.feeExpense.toFixed(2)),l.a.createElement(Ye,{align:"right"},e.interest+e.feeIncome-e.feeExpense))}))))});function He(e){return l.a.createElement(je.a,{component:"div",style:{padding:24}},e.children)}function qe(e){return l.a.createElement(Ae.a,Object.assign({component:"a",onClick:function(e){return e.preventDefault()}},e))}var Ge=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={value:0},t.handleChange=function(e,a){t.setState({value:a})},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.data,n=e.investments,r=e.loanDetails,c=this.state.value;return l.a.createElement(we.a,null,l.a.createElement("div",{className:a.root},l.a.createElement(De.a,{position:"static"},l.a.createElement(Le.a,{variant:"fullWidth",value:c,onChange:this.handleChange},l.a.createElement(qe,{label:"Transacciones",href:"page1"}),l.a.createElement(qe,{label:"Inversiones",href:"page2"}),l.a.createElement(qe,{label:"Resumen por Inversion",href:"page3"}))),0===c&&l.a.createElement(He,null,t.length>0&&l.a.createElement(_e,{data:t})),1===c&&l.a.createElement(He,null,n.length>0&&l.a.createElement(Ue,{investments:n})),2===c&&l.a.createElement(He,null,r.length>0&&l.a.createElement(Be,{loanDetails:r}))))}}]),a}(l.a.Component),$e=Object(j.withStyles)(function(e){return{root:{marginTop:25,flexGrow:1,backgroundColor:e.palette.background.paper}}})(Ge),We=t(41),Ve=t.n(We),ze=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleOnClick=function(){var e=Object(Ie.a)(Oe.a.mark(function e(a){var n,l,r,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=t.state._investor,e.next=4,t.TransactionService.getInvestorTransactions(n);case 4:return l=e.sent,e.next=7,t.InvestorService.getInvestorInvestments(n);case 7:return r=e.sent,e.next=10,t.TransactionService.getLoanInvestorDetails(n);case 10:return c=e.sent,e.abrupt("return",Promise.all([l,r,c]).then(function(e){return t.setState({transactions:e[0],investments:e[1],loanDetails:e[2]}),e}).then(function(e){t.investorDetails(e[0])}).catch(function(e){t.setState({error:e})}));case 12:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state={_investor:"",totalDeposits:0,totalWithdrawals:0,totalCosts:0,cashAvailable:0,debitTotal:0,totalInvestments:0,creditTotal:0,totalGCUS:0,totalGFUS:0,paidBackCapital:0,interestReceived:0,feeExpenses:0,feeIncome:0,transactions:[],cashAccounts:[]},t.TransactionService=new pe,t.InvestorService=new be,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchInvestors",value:function(){var e=this;this.state.investors||this.InvestorService.getInvestors().then(function(a){"peru"===e.props.location.toLowerCase()&&(a=a.filter(function(e){return"peru"===e.location.toLowerCase()})),e.setState({investors:a})}).catch(function(a){e.setState({error:a})})}},{key:"investorDetails",value:function(e){var a=e.filter(function(e){return"CAPITAL"===e.concept}).reduce(function(e,a){return e+a.debit},0),t=e.filter(function(e){return"INTEREST"===e.concept}).reduce(function(e,a){return e+a.debit},0),n=e.filter(function(e){return"FEE"===e.concept}).reduce(function(e,a){return e+a.credit},0),l=e.filter(function(e){return"FEE"===e.concept}).reduce(function(e,a){return e+a.debit},0),r=e.filter(function(e){return"DEPOSIT"===e.concept}).reduce(function(e,a){return e+a.debit},0),c=e.filter(function(e){return"WITHDRAWAL"===e.concept}).reduce(function(e,a){return e+a.credit},0),i=e.filter(function(e){return"COST"===e.concept}).reduce(function(e,a){return e+a.credit},0),s=e.filter(function(e){return"INVESTMENT"===e.concept}).reduce(function(e,a){return e+a.credit},0);console.log(function(e){var a=[],t=[],n=e.filter(function(e){return"FEE"===e.concept});return console.log(n),Ve.a.map(Ve.a.uniqBy(n,"_investor"),Ve.a.partial(Ve.a.pick,Ve.a,["_investor"])).forEach(function(e){a.push(e._investor.firstName)}),console.log(a),a.forEach(function(e){var a=n.filter(function(a){return a._investor.firstName===e}).reduce(function(e,a){return e+a.debit-a.credit},0),l={cashAccount:e,total:a};t.push(l)}),t}(e));var o=function(e){var a=[],t=[];return Ve.a.map(Ve.a.uniqBy(e,"cashAccount"),Ve.a.partial(Ve.a.pick,Ve.a,["cashAccount"])).forEach(function(e){a.push(e.cashAccount)}),a.forEach(function(a){var n=e.filter(function(e){return e.cashAccount===a}).reduce(function(e,a){return e+a.debit-a.credit},0),l={cashAccount:a,total:n};t.push(l)}),t}(e),m=e.reduce(function(e,a){return e+a.debit},0),u=e.reduce(function(e,a){return e+a.credit},0);this.setState({paidBackCapital:a,interestReceived:t,totalInvestments:s,totalCosts:i,feeExpenses:n,feeIncome:l,totalDeposits:r,totalWithdrawals:c,debitTotal:m,creditTotal:u,cashAvailable:m-u,cashAccounts:o})}},{key:"render",value:function(){var e=this;this.fetchInvestors();var a=this.state,t=a.cashAvailable,n=a.totalDeposits,r=a.totalInvestments,c=a.totalCosts,i=a.paidBackCapital,s=a.interestReceived,o=a.feeExpenses,m=a.feeIncome,u=a.totalWithdrawals,d=a.cashAccounts,p=a.transactions,h=a.investments,E=a.loanDetails;return l.a.createElement("div",{className:"content"},l.a.createElement("h2",{className:"display-6"},"RESUMEN"),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6",id:"account_holder"},l.a.createElement("select",{className:"form-control",name:"_investor",id:"investor",value:this.state._investor,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",null,"Seleccionar Inversionista"),this.state.investors?this.state.investors.map(function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.name+" "+e.lastName+" "+e.location)}):"")),l.a.createElement("div",null,l.a.createElement("button",{type:"submit",className:"btn btn-info",onClick:function(a){return e.handleOnClick(a)}},"Buscar Inversionista"))),l.a.createElement("div",{className:"acc-summary"},l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"DISPONIBLE"),l.a.createElement("p",{className:"total"},"$ ",t.toLocaleString()),d.length>0?d.map(function(e,a){return l.a.createElement("div",null,l.a.createElement("p",{className:"acc-title"},e.cashAccount),l.a.createElement("p",{className:"acc-total"},e.total.toLocaleString())," ")}):""),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"INVERSIONES"),l.a.createElement("p",{className:"total"},"$",(r-i).toLocaleString()),l.a.createElement("p",{className:"acc-title"},"INTERESES"),l.a.createElement("p",{className:"acc-total"},"$",s.toLocaleString(),"+"),l.a.createElement("p",{className:"acc-title"},"REPAGADO"),l.a.createElement("p",{className:"acc-total"},"$",i.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"HISTORICO INVERTIDO"),l.a.createElement("p",{className:"acc-total"},"$",r.toLocaleString())),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"COMISIONES"),l.a.createElement("p",{className:"total"},"$",(m-o).toLocaleString()),l.a.createElement("p",{className:"acc-title"},"INGRESO"),l.a.createElement("p",{className:"acc-total"},"$",m.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"EGRESO"),l.a.createElement("p",{className:"acc-total"},"$",o.toLocaleString())),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"DEPOSITOS"),l.a.createElement("p",{className:"total"},"$",n.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"COST"),l.a.createElement("p",{className:"acc-total"},"$",c.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"RETIROS"),l.a.createElement("p",{className:"acc-total"},"$",u.toLocaleString()))),l.a.createElement("div",null,l.a.createElement($e,{data:p,investments:h,loanDetails:E})))}}]),a}(n.Component),Xe=function(e){var a=e.detail,t=e.value;return l.a.createElement("div",{className:"user-detail"},l.a.createElement("div",{className:"detail-key"},l.a.createElement("p",null,a.toUpperCase(),": ")),l.a.createElement("div",{className:"detail-value"},l.a.createElement("p",null,t)))},Ze=t(91),Ke=t.n(Ze),Je=t(176),Qe=t.n(Je);function ea(e){var a=e.data,t=e.clientId;return l.a.createElement("div",null,l.a.createElement("div",{className:"client-loan-summary-head "},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"title"},"PRESTAMO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"CUOTAS * MONTO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"POR AMORTIZAR"))),a.map(function(e,a){var t=e.capital/e.duration,n=e.interest/100*e.capital;return l.a.createElement("div",{key:a,className:"client-loan-summary"},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"total"},"$",parseFloat(e.capital).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},parseFloat(e.interest),"%  \xa0\xa0  |   \xa0\xa0 ",ne()(e.startDate).format("LL"))),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"total"},e.totalPaid?Math.ceil((e.capital-parseFloat(e.totalPaid))/t):e.duration," * $",(n+t).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",n.toLocaleString(void 0,{maximumFractionDigits:2})," + $",t.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary last"},l.a.createElement("div",null,l.a.createElement("p",{className:"total"},"$",(parseFloat(e.capital)-(e.totalPaid?parseFloat(e.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",isNaN(e.totalPaid)?0:parseFloat(e.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement(f.a,{to:"/loan/".concat(e._id)},l.a.createElement("i",{className:"material-icons info"},"info")))))}),l.a.createElement("div",{className:"client-loan-summary create"},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement(f.a,{to:"/create-loan/".concat(t)},l.a.createElement(Ke.a,{size:"small",color:"secondary","aria-label":"Add"},l.a.createElement(Qe.a,null))))))}var aa=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).componentDidMount=function(){var e=t.props.match.params.clientId;t.service.getClient(e).then(function(e){t.setState({client:e})})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state=R.initialState,t.service=new T,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state.client;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"client-header"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,e.fullName?e.fullName.toUpperCase():"Loading..."))),l.a.createElement("div",{className:"user-global-information"},l.a.createElement("div",{className:"user-information"},l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"CONTACTO"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Email",value:e.email}),l.a.createElement(Xe,{detail:"N\xfamero de tel\xe9fono",value:e.cellPhoneNumber}),l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.street+", "+e.residenceName+", "+e.residenceNumber+", "+e.city+", "+e.country}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"PERFIL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Nombre",value:e.fullName}),l.a.createElement(Xe,{detail:"Lugar y fecha de nacimiento",value:e.placeOfBirth+", "+ne()(e.DOB).format("DD-MMM-YY")}),l.a.createElement(Xe,{detail:"Genero",value:e.gender}),l.a.createElement(Xe,{detail:"Estatus civil",value:e.civilStatus}),l.a.createElement(Xe,{detail:"DNI / C\xe9dula / Pasaporte",value:e.nationalId}),l.a.createElement(Xe,{detail:"Nacionalidad",value:e.nationality}),l.a.createElement(Xe,{detail:"Otras nacionalidades",value:e.otherNationalities}),l.a.createElement(Xe,{detail:"Certificado Migratorio",value:e.immigrationCertificate}),l.a.createElement(Xe,{detail:"Nivel educativo",value:e.academicLevel}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"LABORAL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Estatus",value:e.employmentStatus}),l.a.createElement(Xe,{detail:"Ingresos",value:e.monthlyIncome}),e.otherIncome&&l.a.createElement(Xe,{detail:"Otros ingresos",value:e.otherIncome}),l.a.createElement(Xe,{detail:"Empresa",value:e.businessName}),l.a.createElement(Xe,{detail:"Posici\xf3n",value:e.businessPosition}),l.a.createElement(Xe,{detail:"Email",value:e.businessEmail}),l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.businessAddress})))),l.a.createElement("div",{className:"client-loan-information"},e.loans&&l.a.createElement(ea,{data:e.loans,clientId:e._id}))))}}]),a}(n.Component),ta=Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(Object(de.a)(aa));function na(e){var a=e.data;return l.a.createElement("div",null,l.a.createElement("div",{className:"client-loan-summary-head "},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"title"},"PRESTAMO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"CUOTAS * MONTO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"POR AMORTIZAR"))),a.map(function(e,a){var t=e.capital/e.duration,n=e.interest/100*e.capital;return l.a.createElement("div",{key:a,className:"client-loan-summary"},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"total"},"$",parseFloat(e.capital).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},parseFloat(e.interest),"%  \xa0\xa0  |   \xa0\xa0 ",ne()(e.startDate).format("LL"))),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"total"},e.totalPaid?Math.ceil((e.capital-parseFloat(e.totalPaid))/t):e.duration," * $",(n+t).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",n.toLocaleString(void 0,{maximumFractionDigits:2})," + $",t.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary last"},l.a.createElement("div",null,l.a.createElement("p",{className:"total"},"$",(parseFloat(e.capital)-(e.totalPaid?parseFloat(e.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",isNaN(e.totalPaid)?0:parseFloat(e.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement(f.a,{to:"/loan/".concat(e._id)},l.a.createElement("i",{className:"material-icons info"},"info")))))}))}var la=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).componentDidMount=function(){var e=t.props.user;t.setState({client:e})},t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.state=R.initialState,t.service=new T,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state.client;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"client-header"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,e.fullName?e.fullName.toUpperCase():"Loading..."))),l.a.createElement("div",{className:"user-global-information"},l.a.createElement("div",{className:"user-information"},l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"CONTACTO"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Email",value:e.email}),l.a.createElement(Xe,{detail:"N\xfamero de tel\xe9fono",value:e.cellPhoneNumber}),l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.street+", "+e.residenceName+", "+e.residenceNumber+", "+e.city+", "+e.country}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"PERFIL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Lugar y fecha de nacimiento",value:e.placeOfBirth+", "+ne()(e.DOB).format("DD-MMM-YY")}),l.a.createElement(Xe,{detail:"Genero",value:e.gender}),l.a.createElement(Xe,{detail:"Estatus civil",value:e.civilStatus}),l.a.createElement(Xe,{detail:"DNI / C\xe9dula / Pasaporte",value:e.nationalId}),l.a.createElement(Xe,{detail:"Nacionalidad",value:e.nationality}),e.otherNationalities&&l.a.createElement(Xe,{detail:"Otras nacionalidades",value:e.otherNationalities}),e.immigrationCertificate&&l.a.createElement(Xe,{detail:"Certificado Migratorio",value:e.immigrationCertificate}),e.academicLevel&&l.a.createElement(Xe,{detail:"Nivel educativo",value:e.academicLevel}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"LABORAL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Estatus",value:e.employmentStatus}),e.businessName&&l.a.createElement(Xe,{detail:"Empresa",value:e.businessName}),l.a.createElement(Xe,{detail:"Ingresos",value:e.monthlyIncome}),e.otherIncome&&l.a.createElement(Xe,{detail:"Otros ingresos",value:e.otherIncome}),e.businessPosition&&l.a.createElement(Xe,{detail:"Posici\xf3n",value:e.businessPosition}),e.businessEmail&&l.a.createElement(Xe,{detail:"Email",value:e.businessEmail}),e.businessAddress&&l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.businessAddress})))),l.a.createElement("div",{className:"client-loan-information"},e.loans&&l.a.createElement(na,{data:e.loans,clientId:e._id}))))}}]),a}(n.Component);Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(Object(de.a)(la));t(47).config();var ra=function e(){var a=this;Object(i.a)(this,e),this.totals=function(e){return a.service.get("/totals/".concat(e)).then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/summary"),withCredentials:!0})};function ca(e){var a=e.data,t=e.totalPortfolio;return l.a.createElement("div",null,l.a.createElement("div",{className:"loan-summary-head "},l.a.createElement("div",{className:"detail-summary head-left"},l.a.createElement("p",{className:"title"},"PRESTAMO")),l.a.createElement("div",{className:"detail-summary center head-content"},l.a.createElement("p",{className:"title"},"PESO EN CARTERA")),l.a.createElement("div",{className:"detail-summary center head-content"},l.a.createElement("p",{className:"title"},"CUOTAS * MONTO")),l.a.createElement("div",{className:"detail-summary last head-content"},l.a.createElement("p",{className:"title"},"POR AMORTIZAR"))),a.map(function(e,a){var n=e.capital/e.duration,r=e.interest/100*e.capital;return l.a.createElement("div",{key:a,className:"loan-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},e._borrower.fullName.toUpperCase()),l.a.createElement("p",{className:"total"},"$",parseFloat(e.capital).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},parseFloat(e.interest),"%  \xa0\xa0  |   \xa0\xa0 ",ne()(e.startDate).format("LL"))),l.a.createElement("div",{className:"detail-summary center detail-content"},l.a.createElement("p",{className:"total"},((e.capital-parseFloat(e.totalPaid?e.totalPaid:0))/t*100).toLocaleString(void 0,{maximumFractionDigits:2}),"%"),l.a.createElement("p",{className:"acc-total"},(e.capital/t*100).toLocaleString(void 0,{maximumFractionDigits:2}),"%")),l.a.createElement("div",{className:"detail-summary center detail-content"},l.a.createElement("p",{className:"total"},e.totalPaid?Math.ceil((e.capital-parseFloat(e.totalPaid))/n):e.duration," * $",(r+n).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",r.toLocaleString(void 0,{maximumFractionDigits:2})," + $",n.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary last detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"total"},"$",(parseFloat(e.capital)-(e.totalPaid?parseFloat(e.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",isNaN(e.totalPaid)?0:parseFloat(e.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement(f.a,{to:"/loan/".concat(e._id)},l.a.createElement("i",{className:"material-icons"},"info")))))}))}var ia=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0,getSummary:!0},t.loanService=new ie,t.summaryService=new ra,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"componentWillMount",value:function(){this.fetchLoans(),this.fetchSummary()}},{key:"fetchLoans",value:function(){var e=this;this.state.getLoan&&this.loanService.getLoanDetails().then(function(a){"peru"===e.props.userLocation.toLowerCase()&&(a=a.filter(function(e){return"peru"===e._borrower.country.toLowerCase()})),e.setState({getLoan:!1,loans:a})}).catch(function(a){e.setState({loans:!1})})}},{key:"fetchSummary",value:function(){var e=this;if(this.state.getSummary){var a=this.props.userLocation;this.summaryService.totals(a).then(function(a){console.log(a),e.setState({getSummary:!1,data:a})}).catch(function(a){e.setState({data:!1})})}}},{key:"render",value:function(){var e=this.state,a=e.loans,t=e.data;return l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"LISTADO DE PRESTAMOS"),a.length>0&&t?l.a.createElement(ca,{data:a,totalPortfolio:t[0][0].totalCapitalRemaining}):"")}}]),a}(n.Component),sa=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={getSummary:!0},t.summaryService=new ra,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"componentWillMount",value:function(){this.fetchSummary()}},{key:"fetchSummary",value:function(){var e=this;if(this.state.getSummary){var a=this.props.userLocation;this.summaryService.totals(a).then(function(a){console.log(a),e.setState({getSummary:!1,data:a})}).catch(function(a){e.setState({data:!1})})}}},{key:"render",value:function(){var e=this.state.data;return l.a.createElement("div",{className:"content"},e?e.map(function(e){return l.a.createElement("div",{className:"loans-summary"},l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"CARTERA ",e[0]._id.toUpperCase()),l.a.createElement("p",{className:"total"},"$",e[0].totalCapitalRemaining.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"AMORTIZADO"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalPaid.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"TOTAL NOMINAL"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalCapital.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"TASA ACTIVA"),l.a.createElement("p",{className:"total"},(100*e[0].averageActIntRate).toLocaleString(void 0,{maximumFractionDigits:2}),"%"),l.a.createElement("p",{className:"acc-title"},"TASA"),l.a.createElement("p",{className:"acc-total"},(100*e[0].averageIntRate).toLocaleString(void 0,{maximumFractionDigits:2}),"%"),l.a.createElement("p",{className:"acc-title"},"INGRESO POR INTERESES"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalInterest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"PRESTAMO ACTIVO"),l.a.createElement("p",{className:"total"},"$",e[0].averageLoanActiveCap.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"PRESTAMO"),l.a.createElement("p",{className:"acc-total"},"$",e[0].averageLoan.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"TOTAL AMORTIZACION"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalAmort.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"DURACION"),l.a.createElement("p",{className:"total"},(e[0].totalTimeInDays/30/e[0].totalActiveLoans).toLocaleString(void 0,{maximumFractionDigits:2})," meses"),l.a.createElement("p",{className:"acc-title"},"DURACION INICIAL"),l.a.createElement("p",{className:"acc-total"},e[0].averageDuration.toLocaleString(void 0,{maximumFractionDigits:2})," meses"),l.a.createElement("p",{className:"acc-title"},"# INVERSIONES"),l.a.createElement("p",{className:"acc-total"},e[0].totalActiveLoans)))}):"")}}]),a}(n.Component),oa=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var ma=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var a=e.classes,t=e.data;function n(e){var a=ne()(new Date),t=ne()(e);return ne.a.duration(a.diff(t)).asDays()}return console.log("aquiii",t),l.a.createElement("div",null,l.a.createElement(ae.a,{className:a.root},l.a.createElement($.a,{className:a.table},l.a.createElement(K.a,null,l.a.createElement(Q.a,null,l.a.createElement(oa,{align:"right"},"Pago"),l.a.createElement(oa,null,"Prestatario"),l.a.createElement(oa,{align:"left"},"Fecha de Pago"),l.a.createElement(oa,{align:"right"},"Balance"),l.a.createElement(oa,{align:"right"},"Capital"),l.a.createElement(oa,{align:"right"},"Intereses"),l.a.createElement(oa,{align:"right"},"Mora"),l.a.createElement(oa,{align:"right"},"Total Cuota"))),l.a.createElement(V.a,null,t.filter(function(e){return"disburstment"!==e.tracking}).map(function(e,t){return l.a.createElement(Q.a,{className:a.row,key:t},l.a.createElement(oa,{component:"th",scope:"row"},parseInt(e.interest_pmt)>0?l.a.createElement("i",{className:"material-icons"}," done_outline"):l.a.createElement("i",{className:"material-icons"},"priority_high")),l.a.createElement(oa,{align:"left"},l.a.createElement(f.a,{to:"/loan/".concat(e._loan)},e.borrower[0].fullName)),l.a.createElement(oa,{align:"right"},ne()(e.date).format("YYYY-MM-DD")),l.a.createElement(oa,{align:"right"},parseInt(e.balance).toFixed(2)),l.a.createElement(oa,{align:"right"},e.principal.toFixed(2)),l.a.createElement(oa,{align:"right"},e.interest.toFixed(2)),l.a.createElement(oa,{align:"right"},(r=e.date,c=e.interest_pmt,n(r)>0&&!c?function(e,a){return.01*n(e)*a}(e.date,e.principal).toFixed(2):"")," "),l.a.createElement(oa,{align:"right"},parseInt(e.payment).toFixed(2)));var r,c})))),l.a.createElement(ae.a,{className:a.root},l.a.createElement($.a,{className:a.table},l.a.createElement(K.a,null,l.a.createElement(Q.a,null,l.a.createElement(oa,{align:"right"},"Aprobados"),l.a.createElement(oa,null,"Prestatario"),l.a.createElement(oa,{align:"left"},"Fecha"),l.a.createElement(oa,{align:"right"},"Monto"),l.a.createElement(oa,{align:"right"},"Capital"),l.a.createElement(oa,{align:"right"},"Intereses"),l.a.createElement(oa,{align:"right"},"Total Cuota"))),l.a.createElement(V.a,null,t.filter(function(e){return"disburstment"===e.tracking}).map(function(e,t){return l.a.createElement(Q.a,{className:a.row,key:t},l.a.createElement(oa,{component:"th",scope:"row"},l.a.createElement("i",{className:"material-icons"}," done_outline")),l.a.createElement(oa,{align:"left"},l.a.createElement(f.a,{to:"/loan/".concat(e._loan)},e.borrower[0].fullName)),l.a.createElement(oa,{align:"right"},ne()(e.date).format("YYYY-MM-DD")),l.a.createElement(oa,{align:"right"},parseInt(e.balance).toFixed(2)),l.a.createElement(oa,{align:"right"},e.principal.toFixed(2)),l.a.createElement(oa,{align:"right"},e.interest.toFixed(2)),l.a.createElement(oa,{align:"right"},parseInt(e.payment).toFixed(2)))})))))}),ua=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0},t.service=new ie,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchLoans",value:function(){var e=this;this.state.getLoan&&this.service.getWeekSchedule().then(function(a){"peru"===e.props.location.toLowerCase()&&(a=a.filter(function(e){return"peru"===e._loan._borrower.country.toLowerCase()})),e.setState({getLoan:!1,loans:a})}).catch(function(a){e.setState({loans:!1})})}},{key:"render",value:function(){return this.fetchLoans(),l.a.createElement("div",{className:"content"},l.a.createElement(ma,{data:this.state.loans}))}}]),a}(n.Component);var da=function(e){var a=e.details,t=e.summary;console.log(t);var n=a.reduce(function(e,a){return e+a.accumTotal},0);return l.a.createElement("div",{className:"one-loan-details-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},"EFECTIVO DISPONIBLE"),l.a.createElement("p",{className:"total"},"$",parseFloat(n).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("p",{className:"title"},"INTERESES"),l.a.createElement("p",{className:"total"},t.interestPaid.toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",t.interestIncome.toLocaleString(void 0,{maximumFractionDigits:2})))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("p",{className:"title"},"CAPITAL"),l.a.createElement("p",{className:"total"},t.capitalRepaid.toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",t.capitalScheduled.toLocaleString(void 0,{maximumFractionDigits:2})))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("p",{className:"title"},"TOTAL"),l.a.createElement("p",{className:"total"},(t.capitalRepaid+t.interestPaid).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",(t.capitalScheduled+t.interestIncome).toLocaleString(void 0,{maximumFractionDigits:2})))))},pa=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0,startDate:ne()().startOf("week").toISOString().substring(0,10),endDate:ne()().endOf("week").toISOString().substring(0,10),country:"Todos",countries:["Todos","Venezuela","Peru"]},t.service=new ie,t.transactionService=new pe,t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.componentDidMount=function(){t.fetchLoans(),t.fetchAccountsTotals()},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchAccountsTotals",value:function(){var e=this;if(!this.state.accounts){var a=this.props.userLocation;console.log(a),this.transactionService.getInvestorsAvailability(a).then(function(a){e.setState({accounts:a})}).catch(function(a){e.setState({accounts:!1})})}}},{key:"fetchLoans",value:function(e){var a=this;e&&e.preventDefault(e);var t=this.state,n=t.startDate,l=t.endDate,r=this.props.userLocation;this.service.getPeriodSchedule(n,l,r).then(function(){var e=Object(Ie.a)(Oe.a.mark(function e(t){var n,l,r,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.filter(function(e){return"disburstment"!==e.tracking});case 2:return t=e.sent,e.next=5,t.reduce(function(e,a){return e+a.interest},0);case 5:return n=e.sent,e.next=8,t.reduce(function(e,a){return e+(a.interest_pmt?a.interest_pmt:0)},0);case 8:return l=e.sent,e.next=11,t.reduce(function(e,a){return e+a.principal},0);case 11:return r=e.sent,e.next=14,t.reduce(function(e,a){return e+(a.principal_pmt?a.principal_pmt:0)},0);case 14:c=e.sent,a.setState({getLoan:!1,loans:t,loanSummary:{interestIncome:n,interestPaid:l,capitalRepaid:c,capitalScheduled:r}});case 16:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()).catch(function(e){a.setState({loans:!1})})}},{key:"render",value:function(){var e=this.state,a=e.loans,t=e.accounts,n=e.loanSummary;return l.a.createElement("div",{className:"content"},l.a.createElement("div",null,t&&n&&l.a.createElement(da,{details:t,summary:n})),l.a.createElement("div",null,l.a.createElement(ma,{data:a})))}}]),a}(n.Component),ha=t(87),Ea=t.n(ha);var va=function(e){var a=e.investors;return l.a.createElement("div",{className:"loan-investor-holder"},l.a.createElement("div",{className:"investor-head "},l.a.createElement("div",{className:"detail-summary-left"},l.a.createElement("p",{className:"title"},"INVERSIONISTA")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"MONTO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"%"))),a.map(function(e,a){return l.a.createElement("div",{key:a,className:"investor"},l.a.createElement("div",{className:"detail-summary-left acc-inv"},e._investor.firstName.toUpperCase()+" "+e._investor.lastName.toUpperCase()),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"acc-inv"},e.amount)),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"acc-inv"},100*e.pct)))}))};var ga=function(e){var a=e.details,t=e.interestIncome,n=e.interestProjected;return l.a.createElement("div",{className:"one-loan-details-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},l.a.createElement(f.a,{to:"/client/".concat(a._borrower._id)},a._borrower.fullName.toUpperCase())),l.a.createElement("p",{className:"total"},"$",parseFloat(a.capital).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",ne()(a.startDate).format("LL")))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"DETALLE"),l.a.createElement("p",{className:"total"},parseFloat(a.interest),"% | ",a.duration," m"))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"POR AMORTIZAR"),l.a.createElement("p",{className:"total"},"$",(parseFloat(a.capital)-(a.totalPaid?parseFloat(a.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/$",isNaN(a.totalPaid)?0:parseFloat(a.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))))),l.a.createElement("div",{className:"detail-summary last detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"INTERESES"),l.a.createElement("p",{className:"total"},"$",t.toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/$",n)))))};var fa=function(e){var a=e.loanSchedule,t=e.openPaymentOption,n=e.reversePayment;return l.a.createElement("div",{className:"loan-schedule-holder"},l.a.createElement("div",{className:"loan-schedule-head "},l.a.createElement("div",{className:"detail-schedule head-date"},l.a.createElement("p",{className:"title"},"FECHA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERES")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CUOTA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERESES/P")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL/P")),l.a.createElement("div",{className:"detail-schedule last head-content"},l.a.createElement("p",{className:"title"},"*"))),a.map(function(e,a){return l.a.createElement("div",{key:a,className:"loan-schedule-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("p",{className:"acc-total"},ne()(e.date).format("YY-MM-DD"))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},(e.interest+e.principal).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest_pmt?e.interest_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal_pmt?e.principal_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")),l.a.createElement("div",{className:"detail-schedule last details-content"},l.a.createElement("p",{className:"acc-total"},e.interest_pmt||e.principal_pmt||0===a?a<1?"":l.a.createElement("i",{className:"material-icons",onClick:function(){return n(e._id)}}," delete_box "):l.a.createElement("i",{className:"material-icons",onClick:function(){return t(e)}}," add_box "))))}))},Na=t(99),ba=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.handleChangePayment=function(e){var a=e.target,n=a.name,l=a.value;l=parseFloat(l),t.setState(Object(O.a)({},n,l))},t.componentDidMount=function(){var e=t.props.installment;t.setState({date_pmt:e.date,principal_pmt:e.principal,interest_pmt:e.interest,paymentId:e._id,cashAccount:void 0,fee:[]})},t.handleChangeFees=function(e){var a=e.target.value,n=Na.fees[a].fee;t.setState({fee:n})},t.state={date_pmt:(new Date).toISOString().substring(0,10),principal_pmt:void 0,interest_pmt:void 0,paymentId:void 0,cashAccount:void 0,fee:[]},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.receivePayment,n=a.closePaymentOption;return l.a.createElement("div",{className:"loan-schedule-holder"},l.a.createElement("div",{className:"loan-payment-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("label",{className:"acc-title"},"FECHA"),l.a.createElement("input",{type:"date",className:"form-control",value:new Date(this.state.date_pmt).toISOString().substring(0,10),onChange:this.handleChange})),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"INTERESES"),l.a.createElement("input",{label:"INTERESES",name:"interest_pmt",className:"form-control input-sm",value:this.state.interest_pmt,onChange:this.handleChangePayment,type:"number"})),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"CAPITAL"),l.a.createElement("input",{label:"principal",name:"principal_pmt",type:"number",className:"form-control input-sm",value:this.state.principal_pmt,onChange:this.handleChangePayment})),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"CUENTA"),l.a.createElement("select",{className:"form-control input-sm",name:"cashAccount",id:"cashAccount",value:this.state.cashAccount,onChange:function(a){return e.handleChange(a)}},l.a.createElement("option",null),Na.accounts.map(function(e,a){return l.a.createElement("option",{key:a,value:e},e)}))),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"FEE"),l.a.createElement("select",{className:"form-control input-sm",name:"feeIndex",id:"feeIndex",value:this.state.feeIndex,onChange:function(a){return e.handleChangeFees(a)}},l.a.createElement("option",null),Na.fees.map(function(a,t){return l.a.createElement("option",{key:t,value:t,onChange:e.handleChangeFees},a.text)}))),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"*"),l.a.createElement("div",{className:"payment-operations"},l.a.createElement("div",{className:"acc-total"},l.a.createElement("i",{className:"material-icons",onClick:function(){return t(e.state)}},"add_box")),l.a.createElement("div",{className:"acc-total"},l.a.createElement("i",{className:"material-icons",onClick:function(){return n()}},"remove_circle"))))))}}]),a}(n.Component),ya=t(177),Ca=t.n(ya),Sa=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).componentDidMount=Object(Ie.a)(Oe.a.mark(function e(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loader();case 1:case"end":return e.stop()}},e)})),t.loader=Object(Ie.a)(Oe.a.mark(function e(){var a,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.loanId,e.next=3,t.loanService.getLoanCompleteDetails(a);case 3:n=e.sent,t.setState({loan:n}),t.detailsCalc();case 6:case"end":return e.stop()}},e)})),t.detailsCalc=function(){var e=t.state.loan.details.loanSchedule,a=e.reduce(function(e,a){return e+(a.interest_pmt?a.interest_pmt:0)},0),n=e.reduce(function(e,a){return e+(a.interest?a.interest:0)},0);t.setState({interestIncome:a,interestProjected:n})},t.compare=function(e,a){return e.date<a.date?-1:e.date>a.date?1:0},t.reversePayment=function(e){t.loanService.deletePayment(e).then(function(e){console.log(e),t.loader()}).catch(function(e){t.setState({error:e})})},t.openPaymentOption=function(e){t.setState({openPayment:!0,installment:e})},t.closePaymentOption=function(){t.setState({openPayment:!1,installment:null})},t.paymentReceiver=function(e){t.loanService.makePayment(Object(h.a)({},e)).then(function(e){t.loader(),t.setState({openPayment:!1})}).catch(function(e){t.setState({error:e})})},t.loanRemove=function(e){t.loanService.deleteLoan(e).then(function(){t.props.history.push("/client/".concat(t.state.loan.details._borrower._id))}).catch(function(e){t.setState({error:e})})},t.state={loan:{details:{},investors:{}},interestIncome:0,interestProjected:0,openPayment:!1,installment:null},t.loanService=new ie,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.interestIncome,n=a.interestProjected,r=a.installment,c=this.state.loan,i=c.details,s=c.investors;return this.state.loan.details._borrower?l.a.createElement("div",{className:"content"},l.a.createElement(ga,{details:i,interestIncome:t,interestProjected:n}),l.a.createElement("div",{className:"loan-content-holder"},l.a.createElement(va,{investors:s}),l.a.createElement("div",null,this.state.openPayment&&l.a.createElement(ba,{installment:r,receivePayment:this.paymentReceiver,closePaymentOption:this.closePaymentOption}),l.a.createElement(fa,{loanSchedule:i.loanSchedule.sort(this.compare),openPaymentOption:this.openPaymentOption,reversePayment:this.reversePayment}))),l.a.createElement("div",{className:"loan-delete"},l.a.createElement(Ea.a,{variant:"contained",color:"secondary",className:"right-button",onClick:function(){return e.loanRemove(i._id)}},"ELIMINAR PRESTAMO",l.a.createElement(Ca.a,null)))):""}}]),a}(n.Component),Oa=Object(de.a)(Sa);var Ia=function(e){var a=e.details;return l.a.createElement("div",{className:"one-loan-details-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},"CAPITAL"),l.a.createElement("p",{className:"total"},"$",parseFloat(a.capital).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",ne()(a.startDate).format("LL")))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"DETALLE"),l.a.createElement("p",{className:"total"},parseFloat(a.interest),"% | ",a.duration," m"))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"POR AMORTIZAR"),l.a.createElement("p",{className:"total"},"$",(parseFloat(a.capital)-(a.totalPaid?parseFloat(a.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/$",isNaN(a.totalPaid)?0:parseFloat(a.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))))))};var Pa=function(e){var a=e.loanSchedule;return l.a.createElement("div",{className:"loan-schedule-holder"},l.a.createElement("div",{className:"loan-schedule-head "},l.a.createElement("div",{className:"detail-schedule head-date"},l.a.createElement("p",{className:"title"},"FECHA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERES")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CUOTA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERESES/P")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL/P"))),a.map(function(e,a){return l.a.createElement("div",{key:a,className:"loan-schedule-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("p",{className:"acc-total"},ne()(e.date).format("YY-MM-DD"))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},(e.interest+e.principal).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest_pmt?e.interest_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal_pmt?e.principal_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")))}))},Da=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).componentDidMount=Object(Ie.a)(Oe.a.mark(function e(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loader();case 1:case"end":return e.stop()}},e)})),t.loader=Object(Ie.a)(Oe.a.mark(function e(){var a,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.loanId,e.next=3,t.loanService.getLoanCompleteDetails(a);case 3:n=e.sent,t.setState({loan:n});case 5:case"end":return e.stop()}},e)})),t.compare=function(e,a){return e.date<a.date?-1:e.date>a.date?1:0},t.state={loan:{details:{}}},t.loanService=new ie,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state.loan.details;return this.state.loan.details._borrower?l.a.createElement("div",{className:"content"},l.a.createElement(Ia,{details:e}),l.a.createElement("div",{className:"loan-content-holder"},l.a.createElement(Pa,{loanSchedule:e.loanSchedule.sort(this.compare)}))):""}}]),a}(n.Component),xa=(Object(de.a)(Da),function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0,startDate:ne()().startOf("month").toISOString().substring(0,10),endDate:ne()().endOf("month").toISOString().substring(0,10),country:"Todos",countries:["Todos","Venezuela","Peru"]},t.service=new ie,t.handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(O.a)({},n,l))},t.componentDidMount=function(){t.fetchLoans()},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchLoans",value:function(e){var a=this;e&&e.preventDefault(e);var t=this.state,n=t.startDate,l=t.endDate,r=this.props.userLocation;this.service.getPeriodSchedule(n,l,r).then(function(e){a.setState({getLoan:!1,loans:e})}).catch(function(e){a.setState({loans:!1})})}},{key:"render",value:function(){var e=this,a=this.state,t=a.country,n=a.loans.filter(function(e){return"Todos"!==t?e.borrower[0].country.includes(t.toUpperCase()):e});return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-2"},l.a.createElement("label",null,"Fecha Inicial"),l.a.createElement("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",value:this.state.startDate,onChange:function(a){return e.handleChange(a)},required:!0})),l.a.createElement("div",{className:"form-group col-md-2"},l.a.createElement("label",null,"Fecha Final"),l.a.createElement("input",{type:"date",className:"form-control",id:"endDate",name:"endDate",value:this.state.endDate,onChange:function(a){return e.handleChange(a)},required:!0})),l.a.createElement("div",{className:"form-group col-md-1 "},l.a.createElement("button",{className:"btn btn-info",type:"button",onClick:function(a){return e.fetchLoans(a)}},"Buscar")),"WORLD"===this.props.userLocation?l.a.createElement("div",{className:"form-group col-md-2 "},l.a.createElement("label",null,"Pa\xeds"),l.a.createElement("select",{className:"form-control",name:"country",id:"country",value:this.state.country,onChange:function(a){return e.handleChange(a)}},this.state.countries?this.state.countries.map(function(e,a){return l.a.createElement("option",{key:a,value:e},e)}):"")):""),l.a.createElement(ma,{data:n}))}}]),a}(n.Component)),La=t(92),Fa=t.n(La),wa=t(67),ka=t.n(wa),Aa=t(178),Ta=t.n(Aa),ja=t(173),Ma=Object(j.withStyles)(function(){return{listContainer:{marginTop:5},popOverLinks:{display:"flex",alignItems:"center",padding:5,paddingLeft:0,width:200,textDecoration:"none"},popOverText:{padding:0,margin:0,width:200,textDecoration:"none"},orangeAvatar:{width:35,height:35,color:"#2D4369",backgroundColor:"#F2F5F7"},card:{maxWidth:345},links:{textDecoration:"none"}}})(function(e){var a=e.classes,t=e.name,n=e.membership,r=e.logout;return l.a.createElement(I.d,{className:a.card},l.a.createElement(I.e,null,l.a.createElement(I.f,null,l.a.createElement(I.a,{className:a.orangeAvatar},t.slice(0,1)),l.a.createElement("p",{className:"title-app-bar"},t),l.a.createElement("p",{className:"id-identifier"},"Membresia - ",n),l.a.createElement(I.h,null),l.a.createElement(I.l,{className:a.listContainer},l.a.createElement(f.a,{className:a.links,to:"/"},l.a.createElement(I.m,{button:!0,className:a.popOverLinks},l.a.createElement(I.n,null,l.a.createElement("i",{class:"material-icons popover-icons"},"verified_user")),l.a.createElement("p",{className:a.popOverText},"Verificaci\xf3n"))),l.a.createElement(f.a,{className:a.links,to:"/"},l.a.createElement(I.m,{button:!0,className:a.popOverLinks},l.a.createElement(I.n,null,l.a.createElement("i",{class:"material-icons popover-icons"},"settings")),l.a.createElement("p",{className:a.popOverText},"Configurici\xf3n"))),l.a.createElement(f.a,{className:a.links,to:"/"},l.a.createElement(I.m,{button:!0,className:a.popOverLinks,onClick:function(){return r()}},l.a.createElement(I.n,null,l.a.createElement("i",{class:"material-icons popover-icons"},"eject")),l.a.createElement("p",{className:a.popOverText},"Salir")))))))}),_a=t(86),Ra=t.n(_a),Ua=(t(404),function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={anchorEl:null},t.handleClick=function(e){t.setState({anchorEl:e.currentTarget})},t.handleClose=function(){t.setState({anchorEl:null})},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.handleDrawerToggle,n=e.BarTitle,r=e.firstName,c=e.lastName,i=e.logout,s=this.state.anchorEl,o=Boolean(s);return l.a.createElement(De.a,{position:"fixed",className:a.appBar},l.a.createElement("div",{className:a.main},l.a.createElement(Fa.a,null,l.a.createElement(ka.a,{color:"inherit","aria-label":"Open drawer",onClick:function(){return t()},className:a.menuButton},l.a.createElement(Ta.a,null)),l.a.createElement("ul",{className:a.navList,role:"Navigation"},l.a.createElement("div",null,l.a.createElement("li",{className:a.titleAppBar},n)),l.a.createElement("div",null,l.a.createElement(I.c,{className:a.userList,"aria-haspopup":"true",variant:"contained",onClick:this.handleClick},l.a.createElement("li",{className:a.userListElement},l.a.createElement(Ra.a,{className:a.orangeAvatar},r.slice(0,1))),l.a.createElement("li",{className:a.userListElement},r+" "+c),l.a.createElement("li",{className:a.userListElement},l.a.createElement("i",{className:"material-icons bar-dropdown"},"keyboard_arrow_down")))),l.a.createElement(I.q,{id:"simple-popper",open:o,anchorEl:s,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement(Ma,{name:r+" "+c,membership:"R123456",logout:i}))))))}}]),a}(n.Component)),Ya=Object(ja.a)(Object(j.withStyles)(function(e){return{navList:{margin:0,padding:0,width:1e3,display:"flex",listStyle:"none",alignItems:"center",color:"#2D4369",justifyContent:"space-between"},userList:{fontWeight:400,fontSize:14,display:"flex",listStyle:"none",alignItems:"center",disableRipple:!0,disableTouchRipple:!0},userListElement:{marginLeft:5},orangeAvatar:{width:35,height:35,color:"#2D4369",backgroundColor:"#F2F5F7"},appBar:Object(O.a)({backgroundColor:"#ffff",color:"#2D4369",marginLeft:240,boxShadow:"none",borderBottom:"1px solid rgb(235, 235, 235)"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(O.a)({marginRight:20},e.breakpoints.up("sm"),{display:"none"}),titleAppBar:{fontSize:"1.5em",fontWeight:600,padding:0,margin:0,marginTop:0}}})(Ua)),Ba=t(70),Ha=t.n(Ba),qa=t(69),Ga=t.n(qa),$a=t(66),Wa=t.n($a),Va=t(68),za=t.n(Va),Xa=t(127),Za=function(e){function a(){return Object(i.a)(this,a),Object(o.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.theme,n=e.handleDrawerToggle,r=e.mobileOpen,c=e.handleBarTitle,i=e.user,s=l.a.createElement("div",null,l.a.createElement("div",{className:a.toolbar},l.a.createElement("img",{className:a.navLogo,src:"https://res.cloudinary.com/ribo/image/upload/v1554797031/Logo_RIBO-02.png",alt:""})),l.a.createElement(Wa.a,null,i.borrower?Xa.clientUrls.map(function(e,t){return l.a.createElement(f.a,{className:"link",to:"/client/".concat(e.url)},l.a.createElement(za.a,{className:a.items,button:!0,key:t,onClick:function(){return c(e.text)}},l.a.createElement("p",{className:a.links},e.text)))}):i.admin?Xa.adminUrls.map(function(e,t){return l.a.createElement(f.a,{className:"link",to:"/admin/".concat(e.url)},l.a.createElement(za.a,{className:a.items,button:!0,key:t,onClick:function(){return c(e.text)}},l.a.createElement("p",{className:a.links},e.text)))}):""));return l.a.createElement("nav",{className:a.drawer},l.a.createElement(Ga.a,{smUp:!0,implementation:"css"},l.a.createElement(Ha.a,{container:this.props.container,variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:r,onClose:function(){return n()},classes:{paper:a.drawerPaper}},s)),l.a.createElement(Ga.a,{xsDown:!0,implementation:"css"},l.a.createElement(Ha.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},s)))}}]),a}(n.Component),Ka=Object(j.withStyles)(function(e){return{drawer:Object(O.a)({},e.breakpoints.up("sm"),{backgroundColor:"#2D4369",width:240,flexShrink:0}),toolbar:e.mixins.toolbar,drawerPaper:{width:240,backgroundColor:"#2D4369"},content:{flexGrow:1,padding:3*e.spacing.unit},navLogo:{height:55,paddingLeft:30,paddingTop:5},items:{width:240,height:40,paddingLeft:30,padding:10},links:{color:"#ffff",fontSize:"1.1em",fontWeight:600}}},{withTheme:!0})(Za),Ja=t(88),Qa=t.n(Ja),et=(t(413),function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={mobileOpen:!1,name:"Actividad"},t.handleBarTitle=function(e){t.setState({name:e})},t.handleDrawerToggle=function(){t.setState(function(e){return{mobileOpen:!e.mobileOpen}})},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.children,n=e.userInSession,r=e.logout;return console.log(n),l.a.createElement("div",{className:a.root},l.a.createElement(Qa.a,null),l.a.createElement(Ya,{BarTitle:this.state.name,logout:r,firstName:n.firstName,lastName:n.lastName,handleDrawerToggle:this.handleDrawerToggle}),l.a.createElement(Ka,{user:n,handleDrawerToggle:this.handleDrawerToggle,handleBarTitle:this.handleBarTitle,mobileOpen:this.state.mobileOpen}),l.a.createElement("main",{className:a.content},l.a.createElement("div",{className:a.toolbar}),t))}}]),a}(n.Component)),at=Object(j.withStyles)(function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar,content:{backgroundColor:"#F2F5F7",flexGrow:1}}},{withTheme:!0})(et),tt=(t(414),function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={duePayments:[],pastPayments:[],totalPaid:0,toBePaid:0,amount:0},t.componentDidMount=function(){t.currentInstallments(),t.pastPayment(),t.totalPaid()},t.totalPaid=Object(Ie.a)(Oe.a.mark(function e(){var a,n,l,r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.user.loans,n=[],e.next=4,a.filter(function(e){return e.loanSchedule.some(function(e){return ne()(e.date).month()===ne()(new Date).month()})}).map(function(e){return Object.assign({},e).loanSchedule.filter(function(e){return ne()(e.date).month()===ne()(new Date).month()})}).forEach(function(e){return e.forEach(function(e){return n.push(e)})});case 4:l=n.reduce(function(e,a){return e+((a.interest_pmt?a.interest_pmt:0)+(a.principal_pmt?a.principal_pmt:0))},0),r=n.reduce(function(e,a){return e+((a.interest?a.interest:0)+(a.principal?a.principal:0))},0),t.setState({toBePaid:l,totalPaid:r});case 7:case"end":return e.stop()}},e)})),t.currentInstallments=function(){var e=t.props.user.loans,a=[];e.filter(function(e){return e.loanSchedule.some(function(e){return ne()(e.date).month()===ne()(new Date).month()})}).map(function(e){return Object.assign({},e).loanSchedule.filter(function(e){return ne()(e.date).month()===ne()(new Date).month()})}).forEach(function(e){return e.forEach(function(e){return a.push(e)})});t.setState({duePayments:a})},t.pastPayment=function(){var e=t.props.user.loans,a=e.length,n=[];e.filter(function(e){return e.loanSchedule.some(function(e){return ne()(e.date).month()===ne()(new Date).subtract(1,"month").month()})}).map(function(e){return Object.assign({},e).loanSchedule.filter(function(e){return ne()(e.date).month()===ne()(new Date).subtract(1,"month").month()})}).forEach(function(e){return e.forEach(function(e){return n.push(e)})});t.setState({pastPayments:n,amount:a})},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state,a=e.duePayments,t=e.pastPayments,n=e.totalPaid,r=e.toBePaid,c=e.amount;return l.a.createElement("div",{className:"testing"},l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Res\xfamen de cuenta"))),l.a.createElement("div",{className:"account-cards"},l.a.createElement("div",{className:"summary-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Total por pagar"),l.a.createElement("p",{variant:"heading",className:"heading-content"},n.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"summary-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"# de prestamos"),l.a.createElement("p",{variant:"heading",className:"heading-content"},c)),l.a.createElement("div",{className:"summary-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Pagado"),l.a.createElement("p",{variant:"heading",className:"heading-content"},r.toLocaleString(void 0,{maximumFractionDigits:2})))),l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Cronograma de pagos - ",ne()().format("MMMM")))),l.a.createElement("div",{class:"table-container"},l.a.createElement("ul",{class:"responsive-table"},l.a.createElement("li",{class:"table-header"},l.a.createElement("div",{class:"table-col table-col-1"},"ID"),l.a.createElement("div",{class:"table-col table-col-2"},"PR\xd3X RECIBO"),l.a.createElement("div",{class:"table-col table-col-3"},"PR\xd3X IMPORTE"),l.a.createElement("div",{class:"table-col table-col-4"},"VENCIMIENTO"),l.a.createElement("div",{class:"table-col table-col-5"},"ESTATUS")),a.map(function(e){return l.a.createElement("li",{class:"table-row"},l.a.createElement("div",{class:"table-col table-col-1","data-label":"Prestamo"},e._loan.substr(e._loan.length-7).toUpperCase()),l.a.createElement("div",{class:"table-col table-col-2","data-label":"Pr\xf3ximo Recibo"},ne()(e.date).format("DD/MM/YY")),l.a.createElement("div",{class:"table-col table-col-3","data-label":"Proximo Importe"},"$",e.payment.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("div",{class:"table-col table-col-4","data-label":"Vencimiento"},ne()(e.date).format("DD/MM/YY")),l.a.createElement("div",{class:"table-col table-col-4","data-label":"Estatus"},e.principal_pmt&&e.principal_pmt>=e.principal?"PAGO":"PENDIENTE"))}))),l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Transacciones Recientes"))),l.a.createElement("div",{class:"table-container"},l.a.createElement("ul",{class:"responsive-table"},l.a.createElement("li",{class:"table-header"},l.a.createElement("div",{class:"table-col table-col-1"},"ID"),l.a.createElement("div",{class:"table-col table-col-2"},"RECIBO"),l.a.createElement("div",{class:"table-col table-col-3"},"IMPORTE"),l.a.createElement("div",{class:"table-col table-col-4"},"METODO"),l.a.createElement("div",{class:"table-col table-col-5"},"ESTATUS")),t.map(function(e){return l.a.createElement("li",{class:"table-row"},l.a.createElement("div",{class:"table-col table-col-1","data-label":"Prestamo"},e._loan.substr(e._loan.length-7).toUpperCase()),l.a.createElement("div",{class:"table-col table-col-2","data-label":"Recibo"},ne()(e.date).format("DD/MM/YY")),l.a.createElement("div",{class:"table-col table-col-3","data-label":"Importe"},"$",(e.principal_pmt+e.interest_pmt).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("div",{class:"table-col table-col-4","data-label":"METODO"},"TRANSFERENCIA"),l.a.createElement("div",{class:"table-col table-col-4","data-label":"Estatus"},e.principal_pmt&&e.principal_pmt.toFixed(2)>=e.principal.toFixed(2)?"PAGO":"PENDIENTE"))}))))}}]),a}(n.Component)),nt=(t(415),t(71)),lt=t.n(nt),rt=t(72),ct=t.n(rt),it=t(73),st=t.n(it),ot=t(128),mt=t.n(ot),ut=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={expanded:null,totalRemaining:0,totalBorrowed:0,numberOfLoans:0},t.handleChange=function(e){return function(a,n){t.setState({expanded:!!n&&e})}},t.compare=function(e,a){return e.date<a.date?-1:e.date>a.date?1:0},t.startDateCompare=function(e,a){return e.startDate<a.startDate?-1:e.startDate>a.startDate?1:0},t.componentDidMount=function(){t.totals()},t.totals=function(){var e=t.props.user.loans,a=e.reduce(function(e,a){return e+a.capitalRemaining},0),n=e.reduce(function(e,a){return e+a.capital},0),l=e.length;t.setState({totalRemaining:a,totalBorrowed:n,numberOfLoans:l})},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this,a=this.props.classes,t=this.props.user.loans,n=this.state,r=n.expanded,c=n.totalRemaining,i=n.numberOfLoans,s=n.totalBorrowed;return l.a.createElement("div",{className:"testing"},l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"General"))),l.a.createElement("div",{className:"account-cards"},l.a.createElement("div",{className:"account-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Total por pagar"),l.a.createElement("p",{variant:"heading",className:"heading-content"},c.toLocaleString())),l.a.createElement("div",{className:"account-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"# de prestamos"),l.a.createElement("p",{variant:"heading",className:"heading-content"},i.toLocaleString())),l.a.createElement("div",{className:"account-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Pagado"),l.a.createElement("p",{variant:"heading",className:"heading-content"},(s-c).toLocaleString()))),l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Prestamos abiertos"))),l.a.createElement("div",{className:a.root},t.sort(this.startDateCompare).filter(function(e){return"open"===e.status}).map(function(t,n){return l.a.createElement(lt.a,{key:n,expanded:r==="panel".concat(n+1),onChange:e.handleChange("panel".concat(n+1))},l.a.createElement(ct.a,{expandIcon:l.a.createElement(mt.a,null)},l.a.createElement(je.a,{className:a.heading},t._id.substr(t._id.length-7).toUpperCase()),l.a.createElement(je.a,{className:a.secondaryHeading},ne()(t.startDate).format("DD/MM/YY"))),l.a.createElement(st.a,{className:"table-details-container"},l.a.createElement("div",{className:"table-details"},l.a.createElement("div",{className:"loan-details-card"},l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Total"),l.a.createElement("p",{variant:"heading",className:"heading-content"},t.capital.toLocaleString())),l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Tasa"),l.a.createElement("p",{variant:"heading",className:"heading-content"},t.interest,"%")),l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Plazo"),l.a.createElement("p",{variant:"heading",className:"heading-content"},t.duration)),l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Amortizado"),l.a.createElement("p",{variant:"heading",className:"heading-content"},(t.capital-t.capitalRemaining).toLocaleString()))),l.a.createElement("div",{className:"table-container"},l.a.createElement("ul",{className:"responsive-table"},l.a.createElement("li",{className:"table-header"},l.a.createElement("div",{className:"table-col table-col-1"},"FECHA"),l.a.createElement("div",{className:"table-col table-col-2"},"CUOTA"),l.a.createElement("div",{className:"table-col table-col-3"},"INTERES"),l.a.createElement("div",{className:"table-col table-col-4"},"CAPITAL"),l.a.createElement("div",{className:"table-col table-col-5"},"P.INTERES"),l.a.createElement("div",{className:"table-col table-col-6"},"P.CAPITAL"),l.a.createElement("div",{className:"table-col table-col-7"},"P.CUOTA"),l.a.createElement("div",{className:"table-col table-col-8"})),t.loanSchedule.sort(e.compare).map(function(e,a){return l.a.createElement("li",{key:a,className:"table-row"},l.a.createElement("div",{className:"table-col table-col-1","data-label":"Fecha"},ne()(e.date).format("DD/MM/YY")),l.a.createElement("div",{className:"table-col table-col-2","data-label":"Cuota"},e.interest+e.principal),l.a.createElement("div",{className:"table-col table-col-3","data-label":"Interes"},e.interest),l.a.createElement("div",{className:"table-col table-col-4","data-label":"Capital"},e.principal),l.a.createElement("div",{className:"table-col table-col-5","data-label":"Pago Interes"},e.interest_pmt),l.a.createElement("div",{className:"table-col table-col-6","data-label":"Pago Capital"},e.principal_pmt),l.a.createElement("div",{className:"table-col table-col-7","data-label":"Total pagado"},e.principal_pmt+e.interest_pmt),l.a.createElement("div",{className:"table-col table-col-8","data-label":"Estatus"},e.principal_pmt>=e.principal?"X":""))}))))))})),l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Prestamos cerrados"))),l.a.createElement("div",{className:a.root},t.sort(this.startDateCompare).filter(function(e){return"closed"===e.status}).map(function(t,n){return l.a.createElement(lt.a,{key:n,expanded:r==="panel".concat(n+1),onChange:e.handleChange("panel".concat(n+1))},l.a.createElement(ct.a,{expandIcon:l.a.createElement(mt.a,null)},l.a.createElement(je.a,{className:a.heading},t._id.substr(t._id.length-7).toUpperCase()),l.a.createElement(je.a,{className:a.secondaryHeading},ne()(t.startDate).format("DD/MM/YY"))),l.a.createElement(st.a,{className:"table-details-container"},l.a.createElement("div",{className:"loan-details-card"},l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Total"),l.a.createElement("p",{variant:"heading",className:"heading-content"},t.capital.toLocaleString())),l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Tasa"),l.a.createElement("p",{variant:"heading",className:"heading-content"},t.interest,"%")),l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Plazo"),l.a.createElement("p",{variant:"heading",className:"heading-content"},t.duration)),l.a.createElement("div",{className:"loan-detail-card"},l.a.createElement("p",{variant:"heading",className:"heading"},"Amortizado"),l.a.createElement("p",{variant:"heading",className:"heading-content"},(t.capital-t.capitalRemaining).toLocaleString()))),l.a.createElement("div",{className:"table-container"},l.a.createElement("ul",{className:"responsive-table"},l.a.createElement("li",{className:"table-header"},l.a.createElement("div",{className:"table-col table-col-1"},"FECHA"),l.a.createElement("div",{className:"table-col table-col-2"},"CUOTA"),l.a.createElement("div",{className:"table-col table-col-3"},"INTERES"),l.a.createElement("div",{className:"table-col table-col-4"},"CAPITAL"),l.a.createElement("div",{className:"table-col table-col-5"},"P.INTERES"),l.a.createElement("div",{className:"table-col table-col-6"},"P.CAPITAL"),l.a.createElement("div",{className:"table-col table-col-7"},"P.CUOTA"),l.a.createElement("div",{className:"table-col table-col-8"})),t.loanSchedule.sort(e.compare).map(function(e,a){return l.a.createElement("li",{key:a,className:"table-row"},l.a.createElement("div",{className:"table-col table-col-1","data-label":"Fecha"},ne()(e.date).format("DD/MM/YY")),l.a.createElement("div",{className:"table-col table-col-2","data-label":"Cuota"},e.interest+e.principal),l.a.createElement("div",{className:"table-col table-col-3","data-label":"Interes"},e.interest),l.a.createElement("div",{className:"table-col table-col-4","data-label":"Capital"},e.principal),l.a.createElement("div",{className:"table-col table-col-5","data-label":"Pago Interes"},e.interest_pmt),l.a.createElement("div",{className:"table-col table-col-6","data-label":"Pago Capital"},e.principal_pmt),l.a.createElement("div",{className:"table-col table-col-7","data-label":"Total pagado"},e.principal_pmt+e.interest_pmt),l.a.createElement("div",{className:"table-col table-col-8","data-label":"Estatus"},e.principal_pmt>=e.principal?"X":""))})))))})))}}]),a}(n.Component),dt=Object(j.withStyles)(function(e){return{root:{width:"100%",marginBottom:20},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}})(ut),pt=(t(420),t(421),Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:300},formControl:{margin:e.spacing.unit}}})(function(e){var a=e.classes,t=e.details;return l.a.createElement("div",{className:"modal-holder"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("p",null,"Editar Cuenta")),l.a.createElement("div",{className:"form-input-holder"},l.a.createElement("div",{className:"form-inputs-holder"},l.a.createElement(_.a,{label:"Nombre",value:t.firstName,name:"firstName",type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",disabled:!0}),l.a.createElement(_.a,{label:"Apellido",name:"lastName",type:"text",value:t.lastName,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",disabled:!0}),l.a.createElement(_.a,{id:"date",name:"DOB",label:"Fecha de Nacimiento",value:t.DOB,type:"date",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",disabled:!0}),l.a.createElement(_.a,{name:"cellphoneNumber",label:"N\xfamero de Tel\xe9fono",value:t.cellphoneNumber,type:"text",className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"nationalId",label:"DNI / C\xe9dula / Pasaporte",type:"text",value:t.nationalId,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",disabled:!0})),l.a.createElement("div",{className:"form-inputs-holder"},l.a.createElement(_.a,{name:"country",label:"Pa\xeds",type:"text",value:t.country,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"city",label:"Ciudad",type:"text",value:t.city,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"address",label:"Direcci\xf3n",type:"text",value:t.address,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"zipCode",label:"Codigo Postal",type:"text",value:t.zipCode,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement("div",{className:"form-inputs-holder"},l.a.createElement(_.a,{name:"bank",label:"Banco",type:"text",value:t.bank,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"accountNumber",label:"Cuenta bancaria",type:"text",value:t.accountNumber,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(_.a,{name:"income",label:"Ingreso",type:"number",value:t.income,className:a.textField,InputLabelProps:{shrink:!0},margin:"normal",disabled:!0})),l.a.createElement("div",{className:"edit-form-submit"},l.a.createElement("button",{className:"btn btn-info"},"Editar"))))}));var ht=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={open:!1,details:{}},t.componentDidMount=function(){var e=t.props.user;t.setState({details:e})},t.handleOpen=function(){t.setState({open:!0})},t.handleClose=function(){t.setState({open:!1})},t.capitalize=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props.classes,a=this.state.details;return l.a.createElement("div",{className:"main-holder"},l.a.createElement("div",{className:"profile-actions"},l.a.createElement(I.b,{variant:"outlined",onClick:this.handleOpen,className:e.button},"Editar perfil"),l.a.createElement(I.o,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},l.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.paper},l.a.createElement(pt,{details:a})))),l.a.createElement("div",{className:"testing"},l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Informaci\xf3n Personal"))),l.a.createElement("div",{className:"profile-description"},l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Primer y segundo nombre legal *"),l.a.createElement("p",{className:"content-details"},a.firstName)),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Apellidos legales *"),l.a.createElement("p",{className:"content-details"},a.lastName)),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Fecha de nacimiento"),l.a.createElement("p",{className:"content-details"},ne()(a.DOB).format("DD/MM/YY"))),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Documento de Identidad"),l.a.createElement("p",{className:"content-details"},a.nationalId)),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Tel\xe9fono"),l.a.createElement("p",{className:"content-details"},a.cellphoneNumber))),l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Direcci\xf3n personal"))),l.a.createElement("div",{className:"profile-description"},l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Pa\xeds"),l.a.createElement("p",{className:"content-details"},this.capitalize(a.country))),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Ciudad"),l.a.createElement("p",{className:"content-details"},this.capitalize(a.city))),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Direcci\xf3n"),l.a.createElement("p",{className:"content-details"},a.address)),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"C\xf3digo postal"),l.a.createElement("p",{className:"content-details"},a.zipCode))),l.a.createElement("div",{className:"heading-activity"},l.a.createElement("div",null,l.a.createElement("p",{variant:"heading",className:"heading"},"Informaci\xf3n Financiera"))),l.a.createElement("div",{className:"profile-description"},l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Banco"),l.a.createElement("p",{className:"content-details"},a.bank)),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"N\xfamero de cuenta"),l.a.createElement("p",{className:"content-details"},a.accountNumber)),l.a.createElement("div",{className:"profile-details"},l.a.createElement("p",{className:"content-description"},"Ingresos certificados"),l.a.createElement("p",{className:"content-details"},a.income)))))}}]),a}(n.Component),Et=Object(j.withStyles)(function(e){return{button:{fontSize:12,margin:0,fontWeight:600,textDecoration:"none",textTransform:"none",borderRadius:2,color:"rgb(145, 145, 145)"},input:{display:"none"},paper:{position:"absolute",maxWidth:1e3,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none",maxHeight:"100%",overflowY:"auto"}}})(ht),vt=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).getTheUser=function(e){t.setState({loggedInUser:e})},t.logout=function(){t.service.logout().then(function(){t.setState({loggedInUser:null})})},t.state={loggedInUser:null},t.service=new g,t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(a){e.setState({loggedInUser:a})}).catch(function(a){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser&&this.state.loggedInUser.admin?l.a.createElement("div",{className:"App"},l.a.createElement(at,{userInSession:this.state.loggedInUser,logout:this.logout},l.a.createElement(d.a,null,l.a.createElement(p.a,{exact:!0,path:"/admin/client/create",render:function(){return l.a.createElement(B,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/payment",render:function(){return l.a.createElement(me,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/investor/create",render:function(){return l.a.createElement(ye,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/investor/transaction",render:function(){return l.a.createElement(Ce,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/investor/details",render:function(){return l.a.createElement(ze,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/loan/list",render:function(){return l.a.createElement(ia,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/loan/period",render:function(){return l.a.createElement(xa,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/activity",render:function(){return l.a.createElement(pa,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/",render:function(){return l.a.createElement(pa,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{path:"/admin/loan/:loanId",render:function(e){var a=e.match;return l.a.createElement(Oa,{loanId:a.params.loanId})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/portfolio",render:function(){return l.a.createElement(sa,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/weekly-schedule",render:function(){return l.a.createElement(ua,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/admin/client/list",render:function(){return l.a.createElement(ce,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{path:"/client/:clientId",render:function(e){var a=e.match;return l.a.createElement(ta,{clientId:a.params.clientId})}}),l.a.createElement(p.a,{path:"/admin/create-loan/:clientId",render:function(a){var t=a.match;return l.a.createElement(Ne,{clientId:t.params.clientId,userLocation:e.state.loggedInUser.location})}})))):this.state.loggedInUser&&this.state.loggedInUser.borrower?l.a.createElement("div",{className:"App"},l.a.createElement(at,{userInSession:this.state.loggedInUser,logout:this.logout},l.a.createElement(d.a,null,l.a.createElement(p.a,{exact:!0,path:"/activity",render:function(){return l.a.createElement(tt,{user:e.state.loggedInUser,getUser:e.getTheUser})}}),l.a.createElement(p.a,{exact:!0,path:"/loan",render:function(){return l.a.createElement(dt,{user:e.state.loggedInUser,getUser:e.getTheUser})}}),l.a.createElement(p.a,{exact:!0,path:"/profile",render:function(){return l.a.createElement(Et,{user:e.state.loggedInUser,getUser:e.getTheUser})}})))):l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C,{userInSession:this.state.loggedInUser,logout:this.logout}),l.a.createElement(d.a,null,l.a.createElement(p.a,{exact:!0,path:"/signup",render:function(){return l.a.createElement(w,{getUser:e.getTheUser})}}),l.a.createElement(p.a,{exact:!0,path:"/login",render:function(){return l.a.createElement(A,{getUser:e.getTheUser})}}))),l.a.createElement(S,null))}}]),a}(n.Component),gt=t(427);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(gt.a,null,l.a.createElement(vt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,a,t){var n=t(7);e.exports={payDayLoan:function(e,a,t,l,r,c){for(var i={biWeekly:{everyOther:.5,periodicity:"d",amount:15},payDay:{everyOther:.5,periodicity:"d",amount:15},monthly:{everyOther:1,periodicity:"M",amount:1}},s=n(c,"YYYY-MM-DD").format("YYYY-MM-DD"),o=n(c,"YYYY-MM-DD"),m=n(c,"YYYY-MM-DD"),u=function(e){var a=n(e).date(),t=n(e).year(),l=n(e).month(),r=e.endOf("month").date();return console.log(a,r),a>10&&a<=15?n([t,l,r]).format("YYYY-MM-DD"):a>=1&&a<=10?n([t,l,15]).format("YYYY-MM-DD"):a>15&&a<=25?n([t,l,r]).format("YYYY-MM-DD"):a>25&&a<=r?n([t,l,15]).add(1,"M").format("YYYY-MM-DD"):void 0}(o),d=function(e){var a=e.date(),t=e.endOf("month").date();return a>10&&a<=15?1/15*(t-a):a>=1&&a<=10?1/15*(16-a):a>15&&a<=25?1/(t-15)*(t+1-a):a>25&&a<=t?1/(t-15)*(t-a+15):void 0}(m),p=i[a].everyOther,h=i[a].amount,E=i[a].periodicity,v=l*p/100*r,g=t*(1/p),f=r/g,N=v+f,b=[{_loan:e,date:s,payment:0,interest:0,principal:0,balance:r,tracking:"disburstment"}],y=1;y<=g;y++)if(y<2){var C={_loan:e,date:u,payment:v*d,interest:v*d,principal:f,balance:r,tracking:"payment due"};b.push(C)}else{if(n(u).add((y-1)*h,E).date()<16)c=n(u).add((y-1)*h,E).set({date:15});else{var S=n(u).add((y-1)*h,E).endOf("month").date();c=n(u).add((y-1)*h,E).set({date:S})}var O={_loan:e,date:c.format("YYYY-MM-DD"),payment:N,interest:v,principal:f,balance:r-y*f,tracking:"payment due"};b.push(O)}return b},linearLoan:function(e,a,t,l,r,c){for(var i={biWeekly:{everyOther:.5,periodicity:"d",amount:15},payDay:{everyOther:.5,periodicity:"d",amount:15},monthly:{everyOther:1,periodicity:"M",amount:1}},s=i[a].everyOther,o=i[a].amount,m=i[a].periodicity,u=l*s/100*r,d=t*(1/s),p=r/d,h=l+p,E=[{_loan:e,date:c,payment:0,interest:0,principal:0,balance:r,tracking:"disburstment"}],v=1;v<=d;v++){var g={_loan:e,date:n(c).add(v*o,m).format("YYYY-MM-DD"),payment:h,interest:u,principal:p,balance:r-v*p,tracking:"payment due"};E.push(g)}return E},lumpSumLoan:function(e,a,t,l,r,c){for(var i=l/100*r,s=r,o=i,m=i+s,u=[{_loan:e,date:c,payment:0,interest:0,principal:0,balance:r,tracking:"disburstment"}],d=1;d<=t;d++)if(d<t){var p={_loan:e,date:n(c).add(d,"M").format("YYYY-MM-DD"),payment:o,interest:i,principal:0,balance:s,tracking:"payment due"};u.push(p)}else{var h={_loan:e,date:n(c).add(d,"M").format("YYYY-MM-DD"),payment:m,interest:i,principal:s,balance:0,tracking:"payment due"};u.push(h)}return u}}},99:function(e,a){e.exports={fees:[{text:"Patricia 45%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.45},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Patricia 30%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.3},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Miguel 10%",fee:[{admin:"5c80fd19a5b4b86c15c18b8c",fee:.1}]}],accounts:["PLPERU","REMPERU","GCUS","GFUS"],feeDistribution:[{participants:"P",text:"Patricia 33.33%"},{participants:"PG",text:"Patricia 50%"},{participants:"PM",text:"Patricia 30%, Miguel 10%"},{participants:"GPM",text:"Patricia 45%, Miguel 10%"},{participants:"M",text:"Miguel 10%"}]}}},[[235,1,2]]]);
//# sourceMappingURL=main.5d931013.chunk.js.map