(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){var n=a(11);e.exports={lumpSumLoan:function(e,t,a,l,r,c){var i={biWeekly:{everyOther:.5,periodicity:"d",amount:15},monthly:{everyOther:1,periodicity:"M",amount:1}},s=i[t].everyOther,o=i[t].amount,m=i[t].periodicitys,u=l*s/100*r,d=parseFloat(r),p=u;a/=s;for(var h=parseFloat(u)+parseFloat(d),v=[{_loan:e,date:c,payment:0,interest:0,principal:0,balance:r,tracking:"disburstment"}],E=1;E<=a;E++)if(E<a){var g={_loan:e,date:n(c).add(E*o,m).format("YYYY-MM-DD"),payment:p,interest:u,principal:0,balance:d,tracking:"payment due"};v.push(g)}else{var f={_loan:e,date:n(c).add(E,"M").format("YYYY-MM-DD"),payment:h,interest:u,principal:d,balance:0,tracking:"payment due"};v.push(f)}return v},linearLoan:function(e,t,a,l,r,c){var i={biWeekly:{everyOther:.5,periodicity:"d",amount:15},monthly:{everyOther:1,periodicity:"M",amount:1}},s=i[t].everyOther,o=i[t].amount,m=i[t].periodicity,u=parseFloat(l)*parseFloat(s)/100*parseFloat(r);a=parseFloat(a)/parseFloat(s);for(var d=parseFloat(r)/a,p=parseFloat(u)+parseFloat(d),h=[{_loan:e,date:c,payment:0,interest:0,principal:0,balance:r,tracking:"disburstment"}],v=1;v<=a;v++){var E={_loan:e,date:n(c).add(v*o,m).format("YYYY-MM-DD"),payment:p,interest:u,principal:d,balance:r-v*d,tracking:"payment due"};h.push(E)}return h}}},227:function(e,t,a){e.exports=a(393)},232:function(e,t,a){},233:function(e,t,a){},28:function(e,t){e.exports={gender:[{value:"MALE",label:"Masculino"},{value:"FEMALE",label:"Femenino"}],civilStatus:[{label:"Soltero",value:"SINGLE"},{label:"Casado",value:"MARRIED"},{label:"Divorciado",value:"DIVORCED"},{label:"Viudo",value:"WIDOW"}],academicLevel:[{label:"Primaria",value:"MIDDLESCHOOL"},{label:"Secundaria",value:"HIGHSCHOOL"},{label:"Universidad",value:"UNIVERSITY"},{label:"Posgrado",value:"POSTGRADUATE"}],employmentStatus:[{label:"Empleado",value:"EMPLOYED"},{label:"Desempleado",value:"UNEMPLOYED"},{label:"Independiente",value:"INDEPENDANT"},{label:"Retirado",value:"RETIRED"},{label:"Otro",value:"OTHER"}],countries:[{label:"Per\xfa",value:"PERU"},{label:"Rep\xfablica Dominicana",value:"DOMENICAN_REPUBLIC"},{label:"Venezuela",value:"VENEZUELA"}],initialState:{client:{gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"peru",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null}}}},393:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(37),c=a.n(r),i=(a(232),a(4)),s=a(7),o=a(9),m=a(8),u=a(10),d=(a(233),a(397)),p=a(395),h=a(73),v=a(39),E=a.n(v);a(43).config();var g=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,a){return t.service.post("/signup",{username:e,password:a}).then(function(e){return e.data})},this.login=function(e,a){return console.log(e,a),t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/auth"),withCredentials:!0})},f=a(394);var N=function(e){var t=e.handleLogout;return l.a.createElement("nav",{className:"navbar navbar-expand-lg"},l.a.createElement(f.a,{className:"navbar-brand",to:"/dashboard"},l.a.createElement("img",{className:"img-nav",src:"https://res.cloudinary.com/ribo/image/upload/v1553507176/logo.png",alt:"Logo"})),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse nav-list",id:"navbarSupportedContent"},l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement(f.a,{className:"nav-link",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"CLIENTE"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/client"},"REGISTRO"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/client-list"},"LISTADO"))),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement(f.a,{className:"nav-link",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"INVERSIONISTA"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/create-investor-account"},"REGISTRO"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/investor-details"},"DETALLE"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/investor-transaction"},"TRANSACCIONES"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/portfolio"},"PORTAFOLIO"))),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement(f.a,{className:"nav-link",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"PRESTAMO"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/loan-list"},"LISTADO"),l.a.createElement(f.a,{className:"dropdown-item nav-drop-text",to:"/period-schedule"},"PERIODO"))))),l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/",onClick:t},"logout"))))))};var b=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg"},l.a.createElement(f.a,{className:"navbar-brand",to:"/"},l.a.createElement("img",{className:"img-nav",src:"https://res.cloudinary.com/ribo/image/upload/v1553507176/logo.png",alt:"Logo"})),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse nav-list",id:"navbarNav"},l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"C\xf3mo funciona")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Nosotros")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Contacto")))),l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/login"},"Ingresar")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/signup"},"Crear cuenta"))))))};var y=function(e){var t=e.handleLogout;return l.a.createElement("nav",{className:"navbar navbar-expand-lg"},l.a.createElement(f.a,{className:"navbar-brand",to:"/"},l.a.createElement("img",{className:"img-nav",src:"https://res.cloudinary.com/ribo/image/upload/v1553507176/logo.png",alt:"Logo"})),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse nav-list",id:"navbarNav"},l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Solicitar credito")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Mis creditos")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/"},"Contacto")))),l.a.createElement("div",null,l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/client/profile"},"Mi perfil")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.a,{className:"nav-link",to:"/",onClick:t},"Cerrar sesi\xf3n"))))))},C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.service=new g,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(h.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){var e=this.state.loggedInUser;return e?e.admin?l.a.createElement(N,{handleLogout:this.handleLogout}):l.a.createElement(y,{handleLogout:this.handleLogout}):l.a.createElement(b,null)}}]),t}(n.Component),S=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("footer",{className:"page-footer font-small blue"},l.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2018 Copyright:",l.a.createElement("a",{href:"https://ribocapital.com/"}," ribocapital.com")))}}]),t}(n.Component),I=a(13),O=a(24),P=a(74),L=a.n(P),x=a(12),D=a.n(x),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.signup(t,n).then(function(e){a.setState({username:"",password:""}),a.props.getUser(e.user)}).catch(function(e){console.log(e),a.setState({error:"Username or Password already exist"})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state={username:"",password:""},a.service=new g,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("main",{className:t.main},l.a.createElement(O.c,null),l.a.createElement(O.g,{className:t.paper},l.a.createElement(O.a,{className:t.avatar},l.a.createElement(L.a,null)),l.a.createElement(O.h,{component:"h1",variant:"h5"},"Cree su cuenta"),l.a.createElement("form",{className:t.form,onSubmit:this.handleFormSubmit},l.a.createElement(O.d,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(O.f,{htmlFor:"username"},"Usuario"),l.a.createElement(O.e,{id:"username",name:"username",autoComplete:"username",autoFocus:!0,value:this.state.username,onChange:function(t){return e.handleChange(t)}})),l.a.createElement(O.d,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(O.f,{htmlFor:"password"},"Contrase\xf1a"),l.a.createElement(O.e,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),l.a.createElement(O.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log in")),l.a.createElement("h1",null,this.state.error?"Error":"")))}}]),t}(n.Component),w=D()(function(e){return{main:Object(I.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(F),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:t,password:n,error:!1}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state={username:"",password:""},a.service=new g,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("main",{className:t.main},l.a.createElement(O.c,null),l.a.createElement(O.g,{className:t.paper},l.a.createElement(O.a,{className:t.avatar},l.a.createElement(L.a,null)),l.a.createElement(O.h,{component:"h1",variant:"h5"},"Ingrese a su cuenta"),l.a.createElement("form",{className:t.form,onSubmit:this.handleFormSubmit},l.a.createElement(O.d,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(O.f,{htmlFor:"username"},"Usuario"),l.a.createElement(O.e,{id:"username",name:"username",autoComplete:"username",autoFocus:!0,value:this.state.username,onChange:function(t){return e.handleChange(t)}})),l.a.createElement(O.d,{margin:"normal",required:!0,fullWidth:!0},l.a.createElement(O.f,{htmlFor:"password"},"Contrase\xf1a"),l.a.createElement(O.e,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),l.a.createElement(O.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Ingresar")),l.a.createElement("h1",null,this.state.error?"Error":"")))}}]),t}(n.Component),A=D()(function(e){return{main:Object(I.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(k);a(43).config();var T=function e(){var t=this;Object(i.a)(this,e),this.updateAccount=function(e,a,n,l,r,c,i,s,o,m,u,d,p,h,v,E,g,f,N,b,y,C,S,I,O,P,L,x,D,F,w,k,A){return t.service.patch("/update/".concat(e),{fullName:a,gender:n,civilStatus:l,nationalId:r,nationality:c,otherNationalities:i,placeOfBirth:s,DOB:o,immigrationCertificate:m,academicLevel:u,Occupation:d,spouseFullName:p,spouseNationalId:h,spouseDOB:v,spousePlaceOfBirth:E,street:g,residenceName:f,residenceNumber:N,city:b,country:y,cellphoneNumber:C,email:S,employmentStatus:I,businessName:O,businessAddress:P,businessPosition:L,startDate:x,businessPhoneNumber:D,businessEmail:F,monthlyIncome:w,otherIncome:k,borrowerStatus:A}).then(function(e){return e.data})},this.getClients=function(e,a){return t.service.get("/all-clients/".concat(e,"/").concat(a)).then(function(e){return e.data})},this.getClient=function(e){return t.service.get("/detail/".concat(e)).then(function(e){return e.data})},this.getInvAccounts=function(){return t.service.get("/get-accounts").then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/client"),withCredentials:!0})},j=a(16),M=a(3),R=a.n(M),_=a(28),U={gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null},B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state.fullName,n=a.state.gender,l=a.state.civilStatus,r=a.state.nationalId,c=a.state.nationality,i=a.state.otherNationalities,s=a.state.placeOfBirth,o=a.state.DOB,m=a.state.immigrationCertificate,u=a.state.academicLevel,d=a.state.Occupation,p=a.state.spouseFullName,h=a.state.spouseNationalId,v=a.state.spouseDOB,E=a.state.spousePlaceOfBirth,g=a.state.street,f=a.state.residenceName,N=a.state.residenceNumber,b=a.state.city,y=a.state.country,C=a.state.cellphoneNumber,S=a.state.email,I=a.state.employmentStatus,O=a.state.businessName,P=a.state.businessAddress,L=a.state.businessPosition,x=a.state.startDate,D=a.state.businessPhoneNumber,F=a.state.businessEmail,w=a.state.monthlyIncome,k=a.state.otherIncome;a.service.createAccount(t,n,l,r,c,i,s,o,m,u,d,p,h,v,E,g,f,N,b,y,C,S,I,O,P,L,x,D,F,w,k).then(function(e){"success"===e.status&&a.setState({status:"success",gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null})}).then({status:"success"}).catch(function(e){a.setState({error:e})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state=U,a.service=new T,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onKeyPress",value:function(e){13===e.which&&e.preventDefault()}},{key:"reset",value:function(){this.setState(U)}},{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",{className:"contentForm"},l.a.createElement("div",{className:"formHeaderHolder"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,l.a.createElement("b",null,"CREACI\xd3N DE NUEVA CUENTA")))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Informaci\xf3n General:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{label:"Nombre Completo",value:this.state.fullName||"",name:"fullName",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{id:"date",name:"DOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"placeOfBirth",label:"Lugar de Nacimiento",type:"text",value:this.state.placeOfBirth||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"cellphoneNumber",label:"N\xfamero de Tel\xe9fono",type:"number",value:this.state.cellphoneNumber||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"email",label:"Correo Electr\xf3nico",type:"email",value:this.state.email||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(R.a,{select:!0,className:t.textField,name:"gender",value:this.state.gender?this.state.gender:"",onChange:function(t){return e.handleChange(t)},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"G\xe9nero",margin:"normal",required:!0},_.gender.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(R.a,{select:!0,className:t.textField,name:"civilStatus",value:this.state.civilStatus,onChange:function(t){return e.handleChange(t)},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"Estado civil",margin:"normal"},_.civilStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))),l.a.createElement("div",null,l.a.createElement(R.a,{name:"nationalId",label:"DNI / C\xe9dula / Pasaporte",type:"text",value:this.state.nationalId||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"nationality",label:"Nacionalidad",type:"text",value:this.state.nationality||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{label:"Otra Nacionalidad",name:"otherNationalities",type:"text",value:this.state.otherNationalities||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{name:"immigrationCertificate",label:"Certificado Migratorio",type:"text",value:this.state.immigrationCertificate||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement("div",null,l.a.createElement(R.a,{select:!0,className:t.textField,name:"academicLevel",value:this.state.academicLevel,onChange:function(t){return e.handleChange(t)},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"Nivel acad\xe9mico",margin:"normal"},_.academicLevel.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del conyug\xe9:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{label:"Nombre completo",value:this.state.spousefullName||"",name:"spouseFullName",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{id:"date",name:"spouseDOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",value:this.state.spouseDOB,onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Documento de Identidad",value:this.state.spouseNationalId||"",name:"spouseNationalId",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Lugar de Nacimiento",value:this.state.spousePlaceOfBirth||"",name:"spousePlaceOfBirth",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del domicilio:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{label:"Calle",value:this.state.street,name:"street",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{label:"Residencia / Condominio",value:this.state.residenceName,name:"residenceName",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"# de Apto o Casa",value:this.state.residenceNumber,name:"residenceNumber",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(R.a,{label:"Ciudad",value:this.state.city,name:"city",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{select:!0,label:"Pa\xeds",value:this.state.country,name:"country",onChange:function(t){return e.handleChange(t)||""},className:t.textField,SelectProps:{native:!0,MenuProps:{className:t.menu}},margin:"normal",required:!0},_.countries.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos laborales:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{select:!0,className:t.textField,name:"employmentStatus",value:this.state.employmentStatus,onChange:function(t){return e.handleChange(t)||""},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"Estatus laboral",margin:"normal",required:!0},_.employmentStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(R.a,{label:"Empresa",value:this.state.businessName,name:"businessName",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{id:"date",name:"startDate",label:"Fecha de Inicio",type:"date",defaultValue:"2015-01-01",onChange:function(t){return e.handleChange(t)||""},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Posici\xf3n",value:this.state.businessPosition,name:"businessPosition",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Direccion de la Empresa",value:this.state.businessAddress,name:"businessAddress",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement("div",null,l.a.createElement(R.a,{label:"# de tel\xe9fono",value:this.state.businessPhoneNumber,name:"businessPhoneNumber",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Correo Electr\xf3nico",value:this.state.businessEmail,name:"businessEmail",onChange:function(t){return e.handleChange(t)||""},type:"email",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement(R.a,{label:"Ingreso Mensual",value:this.state.monthlyIncome,name:"monthlyIncome",onChange:function(t){return e.handleChange(t)||""},type:"number",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{label:"Otros ingresos",value:this.state.otherIncome,name:"otherIncome",onChange:function(t){return e.handleChange(t)||""},type:"number",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formLastSubmitHolder"}),l.a.createElement("div",{className:"formSubmitHolder"},"success"===this.state.status?l.a.createElement("div",{className:"alert alert-success",role:"alert"},"Cuenta creada exitosamente!"):"",this.state.error?l.a.createElement("div",{className:"alert alert-danger",role:"alert"},"La cuenta no pudo ser creada, reintente nuevamente!"):"",l.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-info"},"Crear Cuenta"))))}}]),t}(n.Component),H=Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(B),Y={gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null},q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state.user._id,n=a.state.fullName,l=a.state.gender,r=a.state.civilStatus,c=a.state.nationalId,i=a.state.nationality,s=a.state.otherNationalities,o=a.state.placeOfBirth,m=a.state.DOB,u=a.state.immigrationCertificate,d=a.state.academicLevel,p=a.state.Occupation,h=a.state.spouseFullName,v=a.state.spouseNationalId,E=a.state.spouseDOB,g=a.state.spousePlaceOfBirth,f=a.state.street,N=a.state.residenceName,b=a.state.residenceNumber,y=a.state.city,C=a.state.country,S=a.state.cellphoneNumber,I=a.state.email,O=a.state.employmentStatus,P=a.state.businessName,L=a.state.businessAddress,x=a.state.businessPosition,D=a.state.startDate,F=a.state.businessPhoneNumber,w=a.state.businessEmail,k=a.state.monthlyIncome,A=a.state.otherIncome;a.service.updateAccount(t,n,l,r,c,i,s,o,m,u,d,p,h,v,E,g,f,N,b,y,C,S,I,O,P,L,x,D,F,w,k,A,!0).then(function(e){console.log(e),"updated"===e.status&&a.setState({status:"success",gender:"MALE",civilStatus:"SINGLE",DOB:"1990-01-01",academicLevel:"MIDDLESCHOOL",spouseDOB:"1990-01-01",country:"PERU",employmentStatus:"EMPLOYED",startDate:"2015-01-01",fullName:null,nationalId:null,nationality:null,otherNationalities:null,placeOfBirth:null,immigrationCertificate:null,Occupation:null,spouseFullName:null,spouseNationalId:null,spousePlaceOfBirth:null,street:null,residenceName:null,residenceNumber:null,city:null,cellphoneNumber:null,email:null,businessName:null,businessAddress:null,businessPosition:null,businessPhoneNumber:null,businessEmail:null,monthlyIncome:null,otherIncome:null})}).catch(function(e){a.setState({error:e})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state=Y,a.service=new T,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onKeyPress",value:function(e){13===e.which&&e.preventDefault()}},{key:"reset",value:function(){this.setState(Y)}},{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",{className:"contentForm"},l.a.createElement("div",{className:"formHeaderHolder"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,l.a.createElement("b",null,"Activa tu perfil rellenando los siguientes datos:")))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Informaci\xf3n General:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{label:"Nombre Completo",value:this.state.fullName||"",name:"fullName",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{id:"date",name:"DOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"placeOfBirth",label:"Lugar de Nacimiento",type:"text",value:this.state.placeOfBirth||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"cellphoneNumber",label:"N\xfamero de Tel\xe9fono",type:"number",value:this.state.cellphoneNumber||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"email",label:"Correo Electr\xf3nico",type:"email",value:this.state.email||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(R.a,{select:!0,className:t.textField,name:"gender",value:this.state.gender?this.state.gender:"",onChange:function(t){return e.handleChange(t)},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"G\xe9nero",margin:"normal",required:!0},_.gender.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(R.a,{select:!0,className:t.textField,name:"civilStatus",value:this.state.civilStatus,onChange:function(t){return e.handleChange(t)},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"Estado civil",margin:"normal"},_.civilStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))),l.a.createElement("div",null,l.a.createElement(R.a,{name:"nationalId",label:"DNI / C\xe9dula / Pasaporte",type:"text",value:this.state.nationalId||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{name:"nationality",label:"Nacionalidad",type:"text",value:this.state.nationality||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{label:"Otra Nacionalidad",name:"otherNationalities",type:"text",value:this.state.otherNationalities||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{name:"immigrationCertificate",label:"Certificado Migratorio",type:"text",value:this.state.immigrationCertificate||"",onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement("div",null,l.a.createElement(R.a,{select:!0,className:t.textField,name:"academicLevel",value:this.state.academicLevel,onChange:function(t){return e.handleChange(t)},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"Nivel acad\xe9mico",margin:"normal"},_.academicLevel.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del conyug\xe9:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{label:"Nombre completo",value:this.state.spousefullName||"",name:"spouseFullName",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{id:"date",name:"spouseDOB",label:"Fecha de Nacimiento",type:"date",defaultValue:"1990-01-01",value:this.state.spouseDOB,onChange:function(t){return e.handleChange(t)},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Documento de Identidad",value:this.state.spouseNationalId||"",name:"spouseNationalId",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Lugar de Nacimiento",value:this.state.spousePlaceOfBirth||"",name:"spousePlaceOfBirth",onChange:function(t){return e.handleChange(t)},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos del domicilio:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{label:"Calle",value:this.state.street,name:"street",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{label:"Residencia / Condominio",value:this.state.residenceName,name:"residenceName",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"# de Apto o Casa",value:this.state.residenceNumber,name:"residenceNumber",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0})),l.a.createElement("div",null,l.a.createElement(R.a,{label:"Ciudad",value:this.state.city,name:"city",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{select:!0,label:"Pa\xeds",value:this.state.country,name:"country",onChange:function(t){return e.handleChange(t)||""},className:t.textField,SelectProps:{native:!0,MenuProps:{className:t.menu}},margin:"normal",required:!0},_.countries.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formTitleHolder"},l.a.createElement("p",null,l.a.createElement("b",null,"Datos laborales:"))),l.a.createElement("div",{className:"formInputsHolder"},l.a.createElement("div",null,l.a.createElement(R.a,{select:!0,className:t.textField,name:"employmentStatus",value:this.state.employmentStatus,onChange:function(t){return e.handleChange(t)||""},SelectProps:{native:!0,MenuProps:{className:t.menu}},label:"Estatus laboral",margin:"normal",required:!0},_.employmentStatus.map(function(e){return l.a.createElement("option",{key:e.value,value:e.value},e.label)})),l.a.createElement(R.a,{label:"Empresa",value:this.state.businessName,name:"businessName",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{id:"date",name:"startDate",label:"Fecha de Inicio",type:"date",defaultValue:"2015-01-01",onChange:function(t){return e.handleChange(t)||""},className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Posici\xf3n",value:this.state.businessPosition,name:"businessPosition",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Direccion de la Empresa",value:this.state.businessAddress,name:"businessAddress",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement("div",null,l.a.createElement(R.a,{label:"# de tel\xe9fono",value:this.state.businessPhoneNumber,name:"businessPhoneNumber",onChange:function(t){return e.handleChange(t)||""},type:"text",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"}),l.a.createElement(R.a,{label:"Correo Electr\xf3nico",value:this.state.businessEmail,name:"businessEmail",onChange:function(t){return e.handleChange(t)||""},type:"email",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})),l.a.createElement(R.a,{label:"Ingreso Mensual",value:this.state.monthlyIncome,name:"monthlyIncome",onChange:function(t){return e.handleChange(t)||""},type:"number",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal",required:!0}),l.a.createElement(R.a,{label:"Otros ingresos",value:this.state.otherIncome,name:"otherIncome",onChange:function(t){return e.handleChange(t)||""},type:"number",className:t.textField,InputLabelProps:{shrink:!0},margin:"normal"})))),l.a.createElement("div",{className:"formSectionHolder"},l.a.createElement("div",{className:"formLastSubmitHolder"}),l.a.createElement("div",{className:"formSubmitHolder"},"success"===this.state.status?l.a.createElement("div",{className:"alert alert-success",role:"alert"},"Cuenta creada exitosamente!"):"",this.state.error?l.a.createElement("div",{className:"alert alert-danger",role:"alert"},"La cuenta no pudo ser creada, reintente nuevamente!"):"",l.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-info"},"Crear Cuenta"))))}}]),t}(n.Component),$=Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(q),G=a(31),W=a.n(G),V=a(33),z=a.n(V),Z=a(38),X=a.n(Z),K=a(32),J=a.n(K),Q=a(25),ee=a.n(Q),te=a(30),ae=a.n(te),ne=a(11),le=a.n(ne),re=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var ce=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var t=e.classes,a=e.data;return l.a.createElement(ae.a,{className:t.root},l.a.createElement(W.a,{className:t.table},l.a.createElement(J.a,null,l.a.createElement(ee.a,null,l.a.createElement(re,null,"Clientes"),l.a.createElement(re,null),l.a.createElement(re,null),l.a.createElement(re,null))),l.a.createElement(z.a,null,a.map(function(e,a){return l.a.createElement(ee.a,{className:t.row,key:a},l.a.createElement(re,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("h4",null,l.a.createElement(f.a,{to:"/client/".concat(e._id)},e.fullName)),l.a.createElement("p",null,"Pais: ",e.country),l.a.createElement("p",null,"Desde: ",le()(e.created_at).format("YYYY-MM-DD")))),l.a.createElement(re,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("h4",null,"Prestamos"),l.a.createElement("p",null,"Activos: ",e.loans.filter(function(e){return"open"===e.status}).length),l.a.createElement("p",null,"Total:",e.loans.length))),l.a.createElement(re,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("p",null,"Prestado: ",e.loans.filter(function(e){return"open"===e.status}).reduce(function(e,t){return e+t.capital},0).toLocaleString("en-GB",{style:"currency",currency:"USD"})),l.a.createElement("p",null,"Activo:   ",e.loans.reduce(function(e,t){return e+t.capital},0).toLocaleString("en-GB",{style:"currency",currency:"USD"})))),l.a.createElement(re,{align:"left"},l.a.createElement("div",{className:"client-summary"},l.a.createElement("p",null,"Amortizado: ",parseInt(e.loans.reduce(function(e,t){return e+(t.totalPaid?t.totalPaid:0)},0)).toLocaleString("en-GB",{style:"currency",currency:"USD"})),l.a.createElement("p",null,"Por pagar:  ",(parseInt(e.loans.reduce(function(e,t){return e+t.capital},0))-parseInt(e.loans.reduce(function(e,t){return e+(t.totalPaid?t.totalPaid:0)},0))).toLocaleString("en-GB",{style:"currency",currency:"USD"})))))}))))}),ie=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={clients:[],getClients:!1},a.service=new T,a.handleChange=function(e){var t,n=e.target,l=n.name,r=n.value;""===r?a.setState({getClients:!1,clients:[]}):a.setState((t={},Object(I.a)(t,l,r),Object(I.a)(t,"getClients",!0),t))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchClients",value:function(){var e=this;this.service.getClients(this.props.userLocation,this.state.fullName).then(function(t){e.setState({getClients:!1,clients:t})}).catch(function(t){e.setState({clients:!1,getClients:!1})})}},{key:"onKeyPress",value:function(e){13===e.which&&this.fetchClients()}},{key:"render",value:function(){var e=this,t=this.state.clients;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{class:"input-group mb-3"},l.a.createElement("div",{class:"input-group-prepend"},l.a.createElement("span",{class:"input-group-text",id:"basic-addon1"},"Buscar cliente")),l.a.createElement("input",{type:"text",name:"fullName",onKeyDown:function(t){return e.onKeyPress(t)},onChange:function(t){return e.handleChange(t)},class:"form-control","aria-label":"Username","aria-describedby":"basic-addon1"})),t.length>0?l.a.createElement(ce,{data:t}):"")}}]),t}(n.Component);a(43).config();var se=function e(){var t=this;Object(i.a)(this,e),this.getLoanDetails=function(){return t.service.get("/").then(function(e){return e.data})},this.getLoanCompleteDetails=function(e){return t.service.get("/complete-details/".concat(e)).then(function(e){return e.data})},this.getPeriodSchedule=function(e,a,n){return t.service.get("/schedule/".concat(e,"/").concat(a,"/").concat(n)).then(function(e){return e.data})},this.getOpenLoanDetails=function(){return t.service.get("/open").then(function(e){return e.data})},this.getLoanSchedule=function(e){return t.service.get("/loanschedule/".concat(e),{loanId:e}).then(function(e){return e.data})},this.getWeekSchedule=function(){return t.service.get("/current-week").then(function(e){return e.data})},this.createLoan=function(e,a,n,l,r,c,i,s,o,m,u,d){return t.service.post("/create",{_borrower:e,collateralType:a,collateralValue:n,collateralDescription:l,period:r,startDate:c,duration:i,capital:s,interest:o,loanType:m,useOfFunds:u,toInvest:d}).then(function(e){return e.data})},this.makePayment=function(e){return t.service.patch("/installmentpmt/".concat(e.paymentId),{payment:e}).then(function(e){return e.data})},this.deletePayment=function(e){return t.service.delete("/deletepmt/".concat(e)).then(function(e){return e.data})},this.deleteLoan=function(e){return t.service.delete("/".concat(e)).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/loan"),withCredentials:!0})},oe=a(150),me=a.n(oe),ue=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.handleChangeFees=function(e){var t=e.target.value,n=a.fees[t].fee;a.setState({fee:n})},a.openPaymentOption=function(e,t,n,l,r){e.preventDefault(),a.setState({openPayment:!0,date:new Date(t).toISOString().substring(0,10),interestToPay:n.toFixed(5),capitalToPay:l.toFixed(5),paymentId:r})},a.closePaymentOption=function(e){e.preventDefault(),a.setState({openPayment:!1,date:null,interestToPay:null,capitalToPay:null,paymentId:null})},a.fees=[{text:"Patricia 33.3%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.333333333}]},{text:"Patricia 45%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.45},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Patricia 30%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.3},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Patricia 50%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.5}]},{text:"Miguel 10%",fee:[{admin:"5c80fd19a5b4b86c15c18b8c",fee:.1}]}],a.makePayment=function(e,t,n,l,r,c,i){a.service.makePayment(t,n,l,r,c,i).then(function(e){a.fetchLoanSchedule()}).then(function(){"world"!==a.props.location?a.fetchLoans():a.fetchOpenLoans()}).then(function(){a.setState({openPayment:!1,accounts:["PLPERU","REMPERU","GCUS","GFUS"],feeDistribution:[{participants:"P",text:"Patricia 33.33%"},{participants:"PG",text:"Patricia 50%"},{participants:"PM",text:"Patricia 30%, Miguel 10%"},{participants:"GPM",text:"Patricia 45%, Miguel 10%"},{participants:"M",text:"Miguel 10%"}],paymentId:null,cashAccount:null,date:null,capitalToPay:null,interestToPay:null,fee:[]})}).catch(function(e){a.setState({loanSchedule:!1})})},a.deletePayment=function(e){a.service.deletePayment(e).then(function(e){a.fetchOpenLoans(),a.fetchLoanSchedule(),a.setState({openPayment:!1,paymentId:null,cashAccount:null,date:null,capital:null,interest:null,fee:[]})}).catch(function(e){a.setState({loanSchedule:!1})})},a.state={loanId:"",accounts:["PLPERU","REMPERU","GCUS","GFUS"],feeDistribution:[{participants:"P",text:"Patricia 33.33%"},{participants:"PG",text:"Patricia 50%"},{participants:"PM",text:"Patricia 30%, Miguel 10%"},{participants:"GPM",text:"Patricia 45%, Miguel 10%"},{participants:"M",text:"Miguel 10%"}],paymentId:null,cashAccount:null,interestToPay:0,capitalToPay:0,totalToPay:0,date:null,capital:null,interest:null,loans:[],openPayment:!1,fee:[]},a.service=new se,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchOpenLoans",value:function(){var e=this;0===this.state.loans.length&&this.service.getOpenLoanDetails().then(function(t){"peru"===e.props.location.toLowerCase()&&(t=t.filter(function(e){return"peru"===e._borrower.country.toLowerCase()})),e.setState({loans:t})}).catch(function(t){e.setState({loans:!1})})}},{key:"fetchLoans",value:function(){var e=this;0===this.state.loans.length&&this.service.getLoanDetails().then(function(t){e.setState({loans:t})}).catch(function(t){e.setState({loans:!1})})}},{key:"fetchLoanSchedule",value:function(e){var t=this;e&&e.preventDefault();var a=this.state.loanId;this.service.getLoanSchedule(a).then(function(e){t.setState({loanSchedule:e})}).catch(function(e){t.setState({loanSchedule:!1})})}},{key:"render",value:function(){var e=this;return"world"===this.props.location.toLowerCase()?this.fetchLoans():this.fetchOpenLoans(),l.a.createElement("div",{className:"content"},l.a.createElement("h2",{className:"display-6"},"Pago de prestamo:"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Prestamo:"),l.a.createElement("select",{className:"form-control",name:"loanId",id:"loanId",value:this.state.loanId,onChange:function(t){return e.handleChange(t)}},0===this.state.loans.length?l.a.createElement("option",null,"loading..."):l.a.createElement("option",null,"Seleccione un prestamo"),this.state.loans.length>0?this.state.loans.map(function(e){return l.a.createElement("option",{key:e._id,value:e._id},e._borrower.fullName," - ",e.capital)}):"")),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Numero de Prestamo:"),l.a.createElement("input",{className:"form-control",type:"text",step:"any",name:"loanId",value:this.state.loanId,disabled:!0})),l.a.createElement("div",{className:"form-group col-md-2 "},l.a.createElement("button",{className:"btn btn-info",onClick:function(t){return e.fetchLoanSchedule(t)}},"Cronograma de pago")))),!0===this.state.openPayment?l.a.createElement("div",null,l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Intereses a pagar:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"interestToPay",value:this.state.interestToPay,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:" form-group col-md-4"},l.a.createElement("label",null,"Capital a pagar:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"capitalToPay",value:this.state.capitalToPay,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-4",id:"account_holder"},l.a.createElement("label",null,"Cuenta a depositar:"),l.a.createElement("select",{className:"form-control",name:"cashAccount",id:"cashAccount",value:this.state.cashAccount,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",null,"Seleccione una cuenta"),this.state.accounts.map(function(e){return l.a.createElement("option",{value:e},e)}))),l.a.createElement("div",{className:"form-group col-md-4"},l.a.createElement("label",null,"Fecha de pago"),l.a.createElement("input",{type:"date",className:"form-control",id:"date",name:"date",value:this.state.date,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"form-group col-md-4",id:"account_holder"},l.a.createElement("label",null,"Distribucion de fees:"),l.a.createElement("select",{className:"form-control",name:"feeIndex",id:"feeIndex",value:this.state.feeIndex,onChange:function(t){return e.handleChangeFees(t)}},l.a.createElement("option",null,"Seleccione una opci\xf3n:"),this.fees.map(function(t,a){return l.a.createElement("option",{value:a,onChange:e.handleChangeFees},t.text)})))),l.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(t){return e.makePayment(t,e.state.date,e.state.capitalToPay,e.state.interestToPay,e.state.paymentId,e.state.cashAccount,e.state.fee)}},"Pagar"),l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(t){return e.closePaymentOption(t)}},"Cancelar")):"",this.state.loanSchedule?l.a.createElement("table",{className:"table table-striped table-hover table-condensed payment-schedule"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"#"),l.a.createElement("th",{scope:"col"},"tracking"),l.a.createElement("th",{scope:"col"},"Fecha de Pago"),l.a.createElement("th",{scope:"col"},"Interes"),l.a.createElement("th",{scope:"col"},"Capital"),l.a.createElement("th",{scope:"col"},"Cuota"),l.a.createElement("th",{scope:"col"},"Balance"),l.a.createElement("th",{scope:"col"},"Pago Capital"),l.a.createElement("th",{scope:"col"},"Pago Intereses"),l.a.createElement("th",{scope:"col"},"Pagar"))),l.a.createElement("tbody",null,this.state.loanSchedule.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("th",{scope:"row"},a),l.a.createElement("td",null,t.tracking),l.a.createElement("td",null,l.a.createElement(me.a,{format:"YYYY-MM-DD"},t.date)),l.a.createElement("td",null,parseFloat(t.interest).toFixed(2)),l.a.createElement("td",null,parseFloat(t.principal).toFixed(2)),l.a.createElement("td",null,parseFloat(t.payment).toFixed(2)),l.a.createElement("td",null,parseFloat(t.balance).toFixed(2)),isNaN(parseFloat(t.principal_pmt))?l.a.createElement("td",null,"0"):l.a.createElement("td",null," ",parseFloat(t.principal_pmt).toFixed(2)," "),isNaN(parseFloat(t.interest_pmt))?l.a.createElement("td",null,"0"):l.a.createElement("td",null," ",parseFloat(t.interest_pmt).toFixed(2)," "),l.a.createElement("td",null,parseFloat(t.principal_pmt)>0||parseFloat(t.interest_pmt)>0||0===parseFloat(a)?0!==parseFloat(a)?l.a.createElement("i",{class:"material-icons",onClick:function(a){return e.deletePayment(t._id)}},"delete_sweep"):"":l.a.createElement("i",{class:"material-icons",onClick:function(a){return e.openPaymentOption(a,t.date,t.interest,t.principal,t._id)}},"add_circle")))}))):"")}}]),t}(n.Component),de=a(155),pe=a(398);a(43).config();var he=function e(){var t=this;Object(i.a)(this,e),this.transactionInvestor=function(e,a,n,l,r,c,i){return t.service.post("/",{_investor:e,cashAccount:a,concept:n,debit:l,credit:r,date:c,comment:i}).then(function(e){return e.data})},this.getLoanInvestorDetails=function(e){return t.service.get("/loaninvestordetails/".concat(e)).then(function(e){return e.data})},this.getInvestorTransactions=function(e){return t.service.get("/list/".concat(e)).then(function(e){return e.data})},this.getInvestorsAvailability=function(e){return t.service.get("/totals/".concat(e)).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/transaction"),withCredentials:!0})};var ve=function(e){var t=e.loanSchedule;return l.a.createElement("div",{className:"loan-schedule-holder",style:{margin:"0 auto"}},l.a.createElement("div",{className:"loan-schedule-head "},l.a.createElement("div",{className:"detail-schedule head-date"},l.a.createElement("p",{className:"title"},"FECHA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERES")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CUOTA"))),t.map(function(e,t){return l.a.createElement("div",{key:t,className:"loan-schedule-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("p",{className:"acc-total"},le()(e.date).format("YY-MM-DD"))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},(e.interest+e.principal).toLocaleString(void 0,{maximumFractionDigits:2}))))}))},Ee=a(51),ge=a.n(Ee),fe=a(109),Ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){a.fetchAccountsTotals();var e=a.props.match.params.clientId;a.setState({_id:e})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state._id,n=a.state.collateralType,l=parseFloat(a.state.collateralValue),r=a.state.collateralDescription,c=a.state.loanPeriod,i=a.state.startDate,s=parseFloat(a.state.loanDuration),o=parseFloat(a.state.loanAmount),m=parseFloat(a.state.loanInterest),u=a.state.loanType,d=a.state.useOfFunds,p=a.state.investors;console.log(m),a.LoanService.createLoan(t,n,l,r,c,i,s,o,m,u,d,p).then(function(e){a.setState({_id:"",collateralType:"",collateralValue:0,collateralDescription:"",startDate:"",loanDuration:0,loanAmount:0,loanInterest:0,loanType:"linear",payment:0,interestPmt:0,capitalPmt:0,open:!1,loanFinalPayment:0,loanInterestFinalPayment:0,loanCapitalFinalPayment:0,investor:"",useOfFunds:"",investmentAmount:0,investors:[]}),a.props.history.push("/loan/".concat(e._id))}).catch(function(e){a.setState({error:e})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSelectedInvestor=function(e){var t=e.target,n=t.name,l=t.value,r=a.state.accounts.map(function(e){return e._id}).indexOf(l);a.setState(Object(I.a)({},n,l)),a.setState({investorAvailability:parseFloat(a.state.accounts[r].accumTotal)})},a.handleInvestment=function(e){var t=e.target,n=t.name,l=t.value;console.log(l),isNaN(l)&&(l=0);var r=a.state.accounts.map(function(e){return e._id}).indexOf(a.state.investor),c=parseFloat(a.state.accounts[r].accumTotal)-parseFloat(l),i=parseFloat(l)/parseFloat(a.state.loanAmount);a.setState(Object(I.a)({},n,l)),a.setState({investorAvailability:c}),a.setState({pct:i})},a.handleNewInvestor=function(){var e=a.state.investor,t=parseFloat(a.state.investmentAmount),n=a.state.pct,l=a.state.cashAccount;a.setState({investors:[].concat(Object(de.a)(a.state.investors),[{_investor:e,amount:t,pct:n,cashAccount:l}]),investor:"",investorAvailability:0,pct:0,investmentAmount:0})},a.deleteInvestor=function(e){var t=a.state.investors;t.splice(e,1),a.setState({investors:t})},a.calcLoanSchedule=function(){var e=a.state,t=e._id,n=e.loanPeriod,l=e.loanDuration,r=e.loanInterest,c=e.loanAmount,i=e.startDate;if("linear"===a.state.loanType){var s=Object(fe.linearLoan)(t,n,l,r,c,i);a.setState({loanSchedule:s,open:!0})}else if("lumpSum"===a.state.loanType){var o=Object(fe.lumpSumLoan)(t,n,l,r,c,i);a.setState({loanSchedule:o,open:!0})}},a.state={_id:"",collateralType:"",collateralValue:0,collateralDescription:"",startDate:"",open:!1,loanDuration:0,loanAmount:0,loanInterest:0,loanType:"linear",loanPeriod:"monthly",payment:0,interestPmt:0,capitalPmt:0,loanFinalPayment:0,loanInterestFinalPayment:0,loanCapitalFinalPayment:0,investor:"",useOfFunds:"",cashAccounts:["PLPERU","REMPERU","GCUS","GFUS"],investmentAmount:0,investors:[]},a.ClientService=new T,a.TransactionService=new he,a.LoanService=new se,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchAccountsTotals",value:function(){var e=this;if(!this.state.accounts){var t=this.props.userLocation;console.log(t),this.TransactionService.getInvestorsAvailability(t).then(function(t){e.setState({accounts:t})}).catch(function(t){e.setState({accounts:!1})})}}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"content"},l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("h2",{className:" display-6"},"NUEVO PRESTAMO"),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},"Datos b\xe1sicos"),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-12"},l.a.createElement("label",null,"Uso de los fondos:"),l.a.createElement("input",{className:"form-control",type:"text",step:"any",name:"useOfFunds",value:this.state.useOfFunds,onChange:function(t){return e.handleChange(t)},required:!0}))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Colateral:"),l.a.createElement("select",{className:"form-control",name:"collateralType",value:this.state.collateralType,onChange:function(t){return e.handleChange(t)},required:!0},l.a.createElement("option",{value:"NoCollateral"},"Sin Colateral"),l.a.createElement("option",{value:"automobiles"},"Autom\xf3vil"),l.a.createElement("option",{value:"electronic_items"},"Equipos electronicos"),l.a.createElement("option",{value:"insurance_policies"},"Poliza de Seguro"),l.a.createElement("option",{value:"investments"},"Inversiones"),l.a.createElement("option",{value:"machinery_and_equipment"},"Maquinaria y Equipos"),l.a.createElement("option",{value:"real_estate"},"Bienes Raices"),l.a.createElement("option",{value:"valuables_and_collectibles"},"Valuables y coleccionables"))),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Valor del Colateral:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"collateralValue",value:this.state.collateralValue,onChange:function(t){return e.handleChange(t)},required:!0}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{form:"collateral_description"},"Descripci\xf3n del Colateral"),l.a.createElement("textarea",{className:"form-control col-md-12",name:"collateralDescription",id:"collateralDescription",rows:"4",value:this.state.collateralDescription,onChange:function(t){return e.handleChange(t)}}))))),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},"Detalles del prestamo"),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Fecha de Inicio"),l.a.createElement("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",value:this.state.startDate,onChange:function(t){return e.handleChange(t)},required:!0})),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Frequencia:"),l.a.createElement("select",{id:"loan_type",className:"form-control",name:"loanPeriod",value:this.state.loanPeriod,onChange:function(t){return e.handleChange(t)},required:!0},l.a.createElement("option",{defaultValue:"monthly"},"Mensual"),l.a.createElement("option",{value:"biWeekly"},"Quincenal")))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Esquema:"),l.a.createElement("select",{id:"loan_type",className:"form-control",name:"loanType",value:this.state.loanType,onChange:function(t){return e.handleChange(t)},required:!0},l.a.createElement("option",{defaultValue:"linear"},"Pagos Iguales + Interes + Sin Amort"),l.a.createElement("option",{value:"lumpSum"},"Final PMTs + Interest + No Amort"))),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Principal:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",id:"loanAmount",name:"loanAmount",value:this.state.loanAmount,onChange:function(t){return e.handleChange(t)},required:!0}))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Duracion:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",id:"loanDuration",name:"loanDuration",value:this.state.loanDuration,onChange:function(t){return e.handleChange(t)},required:!0})),l.a.createElement("div",{className:"form-group col-md-6 col-sm-6"},l.a.createElement("label",null,"Tasa de Interes (M):"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",id:"loanInterest",name:"loanInterest",value:this.state.loanInterest,onChange:function(t){return e.handleChange(t)},required:!0}))),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"calc-button"},l.a.createElement("button",{type:"button",className:"btn btn-info",onClick:function(t){return e.calcLoanSchedule(t)}},"Cronograma"),l.a.createElement(ge.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},l.a.createElement(ve,{loanSchedule:this.state.loanSchedule}))))))),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},"Inversionista"),l.a.createElement("div",{className:"form-row ",id:"participants"},l.a.createElement("div",{className:"form-group col-md-6",id:"investor-0"},l.a.createElement("label",null,"Cuenta Inversionista:"),l.a.createElement("select",{className:"form-control",name:"investor",value:this.state.investor,onChange:function(t){return e.handleSelectedInvestor(t)}},l.a.createElement("option",null,"Seleccionar Cuenta"),this.state.accounts?this.state.accounts.map(function(e,t){return l.a.createElement("option",{key:t,value:e._id},e.investor[0].name+" "+e.investor[0].lastName+" "+e.investor[0].location)}):"")),l.a.createElement("div",{className:"form-group col-md-6",id:"investor-0"},l.a.createElement("label",null,"Cuenta de efectivo:"),l.a.createElement("select",{className:"form-control",name:"cashAccount",value:this.state.cashAccount,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",null,"Seleccionar Cuenta"),this.state.cashAccounts?this.state.cashAccounts.map(function(e,t){return l.a.createElement("option",{key:t,value:e._id},e)}):"")),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Inversion:"),l.a.createElement("input",{className:"form-control",type:"text",step:"any",name:"investmentAmount",value:this.state.investmentAmount,onChange:function(t){return e.handleInvestment(t)}})),l.a.createElement("div",{className:"form-group col-md-3"},l.a.createElement("label",null,"Disponible:"),l.a.createElement("input",{disabled:!0,className:"form-control",type:"text",step:"any",name:"availableCash",value:this.state.investorAvailability})),l.a.createElement("div",{className:"form-group col-md-3"},l.a.createElement("label",null,"Porcentage:"),l.a.createElement("input",{disabled:!0,className:"form-control",type:"text",step:"any",name:"pct",value:this.state.pct}))),l.a.createElement("div",{className:"add_inv form-group align-bottom"},l.a.createElement("button",{type:"button",className:"btn btn-success align-bottom",onClick:function(){return e.handleNewInvestor()}},"Agregar Inversionista"))),l.a.createElement("div",{class:"card-body"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Inversionista"),l.a.createElement("th",{scope:"col"},"Efectivo"),l.a.createElement("th",{scope:"col"},"Monto"),l.a.createElement("th",{scope:"col"},"Porcentaje"),l.a.createElement("th",{scope:"col"},"Acci\xf3n"))),l.a.createElement("tbody",null,this.state.investors.length>0?this.state.investors.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,t._investor),l.a.createElement("td",null,t.cashAccount),l.a.createElement("td",null,t.amount),l.a.createElement("td",null,t.pct),l.a.createElement("td",null,l.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(t){return e.deleteInvestor(t)}},"X")))}):l.a.createElement("tr",null,l.a.createElement("td",null,"Agregue Inversionista"))))))),l.a.createElement("div",{className:"form-row general-loan-details"},l.a.createElement("div",{className:"card col-md-6"},l.a.createElement("div",{class:"card-body"},l.a.createElement("div",null,l.a.createElement("button",{type:"submit",className:"btn btn-info",id:"submit_button"},"Crear")))))))}}]),t}(n.Component),be=Object(pe.a)(Ne);a(43).config();var ye=function e(){var t=this;Object(i.a)(this,e),this.createInvestor=function(e,a,n){return t.service.post("/",{name:e,lastName:a,location:n}).then(function(e){return e.data})},this.getInvestors=function(){return t.service.get("/investor/list").then(function(e){return e.data})},this.getInvestorInvestments=function(e){return t.service.get("/investments/".concat(e)).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/investor"),withCredentials:!0})},Ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.name,n=a.state.lastName,l=a.state.location;a.service.createInvestor(t,n,l).then(function(e){a.setState({name:"",lastName:"",location:""})}).catch(function(e){a.setState({error:e})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state={name:"",lastName:"",location:"Peru"},a.service=new ye,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{class:"content"},l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{class:"form-row"},l.a.createElement("div",{class:"form-group col-md-6"},l.a.createElement("label",{for:"name"},"Nombre:"),l.a.createElement("input",{type:"text",class:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{class:"form-group col-md-6"},l.a.createElement("label",{for:"lastName"},"Apellido:"),l.a.createElement("input",{type:"text",class:"form-control",name:"lastName",value:this.state.lastName,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{class:"form-group col-md-6"},l.a.createElement("label",{for:"location"},"Region:"),l.a.createElement("select",{class:"form-control",name:"location",value:this.state.location,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",{value:"Peru"},"Peru"),l.a.createElement("option",{value:"USA"},"USA")))),l.a.createElement("button",{type:"submit",class:"btn btn-info"},"Crear Cuenta de Inversi\xf3n")))}}]),t}(n.Component),Se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state._investor,n=a.state.cashAccount,l=a.state.concept,r=a.state.txDate,c=a.state.txAmount,i=a.state.comment,s=0,o=0;"WITHDRAWAL"===l||"COST"===l?(s=0,o=c):(s=c,o=0),a.TransactionService.transactionInvestor(t,n,l,s,o,r,i).then(function(e){a.setState({_investor:"",cashAccount:"",concept:"",date:null,amount:0,comment:""})}).catch(function(e){a.setState({error:e})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state={_investor:"",cashAccount:"",concept:"",debit:0,credit:0},a.TransactionService=new he,a.InvestorService=new ye,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchInvestors",value:function(){var e=this;this.state.investors||(console.log("fetching"),this.InvestorService.getInvestors().then(function(t){"peru"===e.props.location.toLowerCase()&&(t=t.filter(function(e){return"peru"===e.location.toLowerCase()})),e.setState({investors:t})}).catch(function(t){e.setState({clients:!1})}))}},{key:"render",value:function(){var e=this;this.fetchInvestors();var t=["PLPERU","REMPERU","GCUS","GFUS"];return l.a.createElement("div",{className:"content"},l.a.createElement("h2",{className:"display-6"},"Nueva Transacci\xf3n:"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6",id:"account_holder"},l.a.createElement("label",null,"Inversionista:"),l.a.createElement("select",{className:"form-control",name:"_investor",id:"investor",value:this.state._investor,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",null,"Seleccionar Inversionista"),this.state.investors?this.state.investors.map(function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.location+" - "+e.name+" "+e.lastName)}):"")),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Numero de Cuenta:"),l.a.createElement("select",{className:"form-control",name:"cashAccount",id:"cashAccount",value:this.state.cashAccount,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",null,"Cuenta de efectivo:"),t?t.map(function(e,t){return l.a.createElement("option",{key:t,value:e},e)}):"")),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Fecha:"),l.a.createElement("input",{className:"form-control",type:"date",step:"any",name:"txDate",value:this.state.txDate,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Concepto:"),l.a.createElement("select",{className:"form-control",name:"concept",id:"concept",value:this.state.concept,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",null,"Seleccionar concepto"),l.a.createElement("option",{value:"DEPOSIT"},"Deposito"),l.a.createElement("option",{value:"WITHDRAWAL"},"Retiro"),l.a.createElement("option",{value:"COST"},"Costo"))),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Cantidad:"),l.a.createElement("input",{className:"form-control",type:"number",step:"any",name:"txAmount",value:this.state.txAmount,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement("label",null,"Comentario:"),l.a.createElement("input",{className:"form-control",type:"string",step:"any",name:"comment",value:this.state.comment,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit",className:"btn btn-info",id:"submit_button"},"Insertar Transacci\xf3n")))))}}]),t}(n.Component),Ie=a(29),Oe=a.n(Ie),Pe=a(41),Le=a(70),xe=a.n(Le),De=a(71),Fe=a.n(De),we=a(56),ke=a.n(we),Ae=a(69),Te=a.n(Ae),je=a(68),Me=a.n(je),Re=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var _e=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var t=e.classes,a=e.data,n=0;return l.a.createElement(ae.a,{className:t.root},l.a.createElement(W.a,{className:t.table},l.a.createElement(J.a,null,l.a.createElement(ee.a,null,l.a.createElement(Re,{align:"right"},"Fecha de Pago"),l.a.createElement(Re,null,"Prestatario"),l.a.createElement(Re,{align:"right"},"Concepto"),l.a.createElement(Re,{align:"right"},"Debito"),l.a.createElement(Re,{align:"right"},"Credito"),l.a.createElement(Re,{align:"right"},"Total"),l.a.createElement(Re,{align:"right"},"Cuenta"),l.a.createElement(Re,{align:"right"},"Comentario"))),l.a.createElement(z.a,null,a.map(function(e,a){return n+=e.debit-e.credit,l.a.createElement(ee.a,{className:t.row,key:a},l.a.createElement(Re,{align:"right"},le()(e.date).format("YYYY-MM-DD")),l.a.createElement(Re,{component:"th",scope:"row"},e._loan?e._loan._borrower.fullName+" - "+e._loan.capital:""),l.a.createElement(Re,{align:"right"},e.concept),l.a.createElement(Re,{align:"right"},e.debit.toFixed(4)),l.a.createElement(Re,{align:"right"},e.credit.toFixed(4)),l.a.createElement(Re,{align:"right"},n.toFixed(4)),l.a.createElement(Re,{align:"right"},e.cashAccount),l.a.createElement(Re,{align:"right"},e.comment))}))))}),Ue=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var Be=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var t=e.classes,a=e.investments;return l.a.createElement(ae.a,{className:t.root},l.a.createElement(W.a,{className:t.table},l.a.createElement(J.a,null,l.a.createElement(ee.a,null,l.a.createElement(Ue,{align:"right"},"Fecha"),l.a.createElement(Ue,{align:"left"},"Prestamo"),l.a.createElement(Ue,null,"Monto"),l.a.createElement(Ue,{align:"right"}," % "),l.a.createElement(Ue,{align:"right"},"Total invertido"))),l.a.createElement(z.a,null,a.map(function(e,a){return l.a.createElement(ee.a,{className:t.row,key:a},l.a.createElement(Ue,{align:"right"},le()(e._loan.startDate).format("YYYY-MM-DD")),l.a.createElement(Ue,{align:"left",component:"th",scope:"row"},e._loan?e._loan._borrower.fullName+" - "+e._loan.capital:""),l.a.createElement(Ue,{align:"right"},parseInt(e.amount/e.pct)),l.a.createElement(Ue,{align:"right"},parseFloat(100*e.pct).toFixed(2)+"%"),l.a.createElement(Ue,{align:"right"},e.amount.toFixed(2)))}))))}),He=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var Ye=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var t=e.classes,a=e.loanDetails;return l.a.createElement(ae.a,{className:t.root},l.a.createElement(W.a,{className:t.table},l.a.createElement(J.a,null,l.a.createElement(ee.a,null,l.a.createElement(He,{align:"left"},"Nombre"),l.a.createElement(He,{align:"right"},"Inversi\xf3n"),l.a.createElement(He,{align:"right"},"%"),l.a.createElement(He,{align:"right"},"Intereses"),l.a.createElement(He,{align:"right"},"Capital"),l.a.createElement(He,{align:"right"},"Ingreso Fee"),l.a.createElement(He,{align:"right"},"Egreso Fee"),l.a.createElement(He,{align:"right"},"Ingreso Total"))),l.a.createElement(z.a,null,a.map(function(e,a){return l.a.createElement(ee.a,{className:t.row,key:a},l.a.createElement(He,{align:"left",component:"th",scope:"row"},e.name," "),l.a.createElement(He,{align:"right"},e.investment.toFixed(2)),l.a.createElement(He,{align:"right"},100*parseFloat(e.ownership.toFixed(2)),"%"),l.a.createElement(He,{align:"right"},e.interest.toFixed(2)),l.a.createElement(He,{align:"right"},e.capital.toFixed(2)),l.a.createElement(He,{align:"right"},e.feeIncome.toFixed(2)),l.a.createElement(He,{align:"right"},e.feeExpense.toFixed(2)),l.a.createElement(He,{align:"right"},e.interest+e.feeIncome-e.feeExpense))}))))});function qe(e){return l.a.createElement(Me.a,{component:"div",style:{padding:24}},e.children)}function $e(e){return l.a.createElement(Te.a,Object.assign({component:"a",onClick:function(e){return e.preventDefault()}},e))}var Ge=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={value:0},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data,n=e.investments,r=e.loanDetails,c=this.state.value;return l.a.createElement(ke.a,null,l.a.createElement("div",{className:t.root},l.a.createElement(xe.a,{position:"static"},l.a.createElement(Fe.a,{variant:"fullWidth",value:c,onChange:this.handleChange},l.a.createElement($e,{label:"Transacciones",href:"page1"}),l.a.createElement($e,{label:"Inversiones",href:"page2"}),l.a.createElement($e,{label:"Resumen por Inversion",href:"page3"}))),0===c&&l.a.createElement(qe,null,a.length>0&&l.a.createElement(_e,{data:a})),1===c&&l.a.createElement(qe,null,n.length>0&&l.a.createElement(Be,{investments:n})),2===c&&l.a.createElement(qe,null,r.length>0&&l.a.createElement(Ye,{loanDetails:r}))))}}]),t}(l.a.Component),We=Object(j.withStyles)(function(e){return{root:{marginTop:25,flexGrow:1,backgroundColor:e.palette.background.paper}}})(Ge),Ve=a(40),ze=a.n(Ve),Ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleOnClick=function(){var e=Object(Pe.a)(Oe.a.mark(function e(t){var n,l,r,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state._investor,e.next=4,a.TransactionService.getInvestorTransactions(n);case 4:return l=e.sent,e.next=7,a.InvestorService.getInvestorInvestments(n);case 7:return r=e.sent,e.next=10,a.TransactionService.getLoanInvestorDetails(n);case 10:return c=e.sent,e.abrupt("return",Promise.all([l,r,c]).then(function(e){return a.setState({transactions:e[0],investments:e[1],loanDetails:e[2]}),e}).then(function(e){a.investorDetails(e[0])}).catch(function(e){a.setState({error:e})}));case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state={_investor:"",totalDeposits:0,totalWithdrawals:0,totalCosts:0,cashAvailable:0,debitTotal:0,totalInvestments:0,creditTotal:0,totalGCUS:0,totalGFUS:0,paidBackCapital:0,interestReceived:0,feeExpenses:0,feeIncome:0,transactions:[],cashAccounts:[]},a.TransactionService=new he,a.InvestorService=new ye,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchInvestors",value:function(){var e=this;this.state.investors||this.InvestorService.getInvestors().then(function(t){"peru"===e.props.location.toLowerCase()&&(t=t.filter(function(e){return"peru"===e.location.toLowerCase()})),e.setState({investors:t})}).catch(function(t){e.setState({error:t})})}},{key:"investorDetails",value:function(e){var t=e.filter(function(e){return"CAPITAL"===e.concept}).reduce(function(e,t){return e+t.debit},0),a=e.filter(function(e){return"INTEREST"===e.concept}).reduce(function(e,t){return e+t.debit},0),n=e.filter(function(e){return"FEE"===e.concept}).reduce(function(e,t){return e+t.credit},0),l=e.filter(function(e){return"FEE"===e.concept}).reduce(function(e,t){return e+t.debit},0),r=e.filter(function(e){return"DEPOSIT"===e.concept}).reduce(function(e,t){return e+t.debit},0),c=e.filter(function(e){return"WITHDRAWAL"===e.concept}).reduce(function(e,t){return e+t.credit},0),i=e.filter(function(e){return"COST"===e.concept}).reduce(function(e,t){return e+t.credit},0),s=e.filter(function(e){return"INVESTMENT"===e.concept}).reduce(function(e,t){return e+t.credit},0);console.log(function(e){var t=[],a=[],n=e.filter(function(e){return"FEE"===e.concept});return console.log(n),ze.a.map(ze.a.uniqBy(n,"_investor"),ze.a.partial(ze.a.pick,ze.a,["_investor"])).forEach(function(e){t.push(e._investor.name)}),console.log(t),t.forEach(function(e){var t=n.filter(function(t){return t._investor.name===e}).reduce(function(e,t){return e+t.debit-t.credit},0),l={cashAccount:e,total:t};a.push(l)}),a}(e));var o=function(e){var t=[],a=[];return ze.a.map(ze.a.uniqBy(e,"cashAccount"),ze.a.partial(ze.a.pick,ze.a,["cashAccount"])).forEach(function(e){t.push(e.cashAccount)}),t.forEach(function(t){var n=e.filter(function(e){return e.cashAccount===t}).reduce(function(e,t){return e+t.debit-t.credit},0),l={cashAccount:t,total:n};a.push(l)}),a}(e),m=e.reduce(function(e,t){return e+t.debit},0),u=e.reduce(function(e,t){return e+t.credit},0);this.setState({paidBackCapital:t,interestReceived:a,totalInvestments:s,totalCosts:i,feeExpenses:n,feeIncome:l,totalDeposits:r,totalWithdrawals:c,debitTotal:m,creditTotal:u,cashAvailable:m-u,cashAccounts:o})}},{key:"render",value:function(){var e=this;this.fetchInvestors();var t=this.state,a=t.cashAvailable,n=t.totalDeposits,r=t.totalInvestments,c=t.totalCosts,i=t.paidBackCapital,s=t.interestReceived,o=t.feeExpenses,m=t.feeIncome,u=t.totalWithdrawals,d=t.cashAccounts,p=t.transactions,h=t.investments,v=t.loanDetails;return l.a.createElement("div",{className:"content"},l.a.createElement("h2",{className:"display-6"},"RESUMEN"),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6",id:"account_holder"},l.a.createElement("select",{className:"form-control",name:"_investor",id:"investor",value:this.state._investor,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",null,"Seleccionar Inversionista"),this.state.investors?this.state.investors.map(function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.name+" "+e.lastName+" "+e.location)}):"")),l.a.createElement("div",null,l.a.createElement("button",{type:"submit",className:"btn btn-info",onClick:function(t){return e.handleOnClick(t)}},"Buscar Inversionista"))),l.a.createElement("div",{className:"acc-summary"},l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"DISPONIBLE"),l.a.createElement("p",{className:"total"},"$ ",a.toLocaleString()),d.length>0?d.map(function(e,t){return l.a.createElement("div",null,l.a.createElement("p",{className:"acc-title"},e.cashAccount),l.a.createElement("p",{className:"acc-total"},e.total.toLocaleString())," ")}):""),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"INVERSIONES"),l.a.createElement("p",{className:"total"},"$",(r-i).toLocaleString()),l.a.createElement("p",{className:"acc-title"},"INTERESES"),l.a.createElement("p",{className:"acc-total"},"$",s.toLocaleString(),"+"),l.a.createElement("p",{className:"acc-title"},"REPAGADO"),l.a.createElement("p",{className:"acc-total"},"$",i.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"HISTORICO INVERTIDO"),l.a.createElement("p",{className:"acc-total"},"$",r.toLocaleString())),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"COMISIONES"),l.a.createElement("p",{className:"total"},"$",(m-o).toLocaleString()),l.a.createElement("p",{className:"acc-title"},"INGRESO"),l.a.createElement("p",{className:"acc-total"},"$",m.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"EGRESO"),l.a.createElement("p",{className:"acc-total"},"$",o.toLocaleString())),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"DEPOSITOS"),l.a.createElement("p",{className:"total"},"$",n.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"COST"),l.a.createElement("p",{className:"acc-total"},"$",c.toLocaleString()),l.a.createElement("p",{className:"acc-title"},"RETIROS"),l.a.createElement("p",{className:"acc-total"},"$",u.toLocaleString()))),l.a.createElement("div",null,l.a.createElement(We,{data:p,investments:h,loanDetails:v})))}}]),t}(n.Component),Xe=function(e){var t=e.detail,a=e.value;return l.a.createElement("div",{className:"user-detail"},l.a.createElement("div",{className:"detail-key"},l.a.createElement("p",null,t.toUpperCase(),": ")),l.a.createElement("div",{className:"detail-value"},l.a.createElement("p",null,a)))},Ke=a(72),Je=a.n(Ke),Qe=a(153),et=a.n(Qe);function tt(e){var t=e.data,a=e.clientId;return l.a.createElement("div",null,l.a.createElement("div",{className:"client-loan-summary-head "},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"title"},"PRESTAMO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"CUOTAS * MONTO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"POR AMORTIZAR"))),t.map(function(e,t){var a=e.capital/e.duration,n=e.interest/100*e.capital;return l.a.createElement("div",{key:t,className:"client-loan-summary"},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"total"},"$",parseFloat(e.capital).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},parseFloat(e.interest),"%  \xa0\xa0  |   \xa0\xa0 ",le()(e.startDate).format("LL"))),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"total"},e.totalPaid?Math.ceil((e.capital-parseFloat(e.totalPaid))/a):e.duration," * $",(n+a).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",n.toLocaleString(void 0,{maximumFractionDigits:2})," + $",a.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary last"},l.a.createElement("div",null,l.a.createElement("p",{className:"total"},"$",(parseFloat(e.capital)-(e.totalPaid?parseFloat(e.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",isNaN(e.totalPaid)?0:parseFloat(e.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement(f.a,{to:"/loan/".concat(e._id)},l.a.createElement("i",{className:"material-icons info"},"info")))))}),l.a.createElement("div",{className:"client-loan-summary create"},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement(f.a,{to:"/create-loan/".concat(a)},l.a.createElement(Je.a,{size:"small",color:"secondary","aria-label":"Add"},l.a.createElement(et.a,null))))))}var at=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.match.params.clientId;a.service.getClient(e).then(function(e){a.setState({client:e})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state=_.initialState,a.service=new T,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.client;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"client-header"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,e.fullName?e.fullName.toUpperCase():"Loading..."))),l.a.createElement("div",{className:"user-global-information"},l.a.createElement("div",{className:"user-information"},l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"CONTACTO"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Email",value:e.email}),l.a.createElement(Xe,{detail:"N\xfamero de tel\xe9fono",value:e.cellPhoneNumber}),l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.street+", "+e.residenceName+", "+e.residenceNumber+", "+e.city+", "+e.country}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"PERFIL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Nombre",value:e.fullName}),l.a.createElement(Xe,{detail:"Lugar y fecha de nacimiento",value:e.placeOfBirth+", "+le()(e.DOB).format("DD-MMM-YY")}),l.a.createElement(Xe,{detail:"Genero",value:e.gender}),l.a.createElement(Xe,{detail:"Estatus civil",value:e.civilStatus}),l.a.createElement(Xe,{detail:"DNI / C\xe9dula / Pasaporte",value:e.nationalId}),l.a.createElement(Xe,{detail:"Nacionalidad",value:e.nationality}),l.a.createElement(Xe,{detail:"Otras nacionalidades",value:e.otherNationalities}),l.a.createElement(Xe,{detail:"Certificado Migratorio",value:e.immigrationCertificate}),l.a.createElement(Xe,{detail:"Nivel educativo",value:e.academicLevel}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"LABORAL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Estatus",value:e.employmentStatus}),l.a.createElement(Xe,{detail:"Ingresos",value:e.monthlyIncome}),e.otherIncome&&l.a.createElement(Xe,{detail:"Otros ingresos",value:e.otherIncome}),l.a.createElement(Xe,{detail:"Empresa",value:e.businessName}),l.a.createElement(Xe,{detail:"Posici\xf3n",value:e.businessPosition}),l.a.createElement(Xe,{detail:"Email",value:e.businessEmail}),l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.businessAddress})))),l.a.createElement("div",{className:"client-loan-information"},e.loans&&l.a.createElement(tt,{data:e.loans,clientId:e._id}))))}}]),t}(n.Component),nt=Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(Object(pe.a)(at));function lt(e){var t=e.data;return l.a.createElement("div",null,l.a.createElement("div",{className:"client-loan-summary-head "},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"title"},"PRESTAMO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"CUOTAS * MONTO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"POR AMORTIZAR"))),t.map(function(e,t){var a=e.capital/e.duration,n=e.interest/100*e.capital;return l.a.createElement("div",{key:t,className:"client-loan-summary"},l.a.createElement("div",{className:"detail-summary first"},l.a.createElement("p",{className:"total"},"$",parseFloat(e.capital).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},parseFloat(e.interest),"%  \xa0\xa0  |   \xa0\xa0 ",le()(e.startDate).format("LL"))),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"total"},e.totalPaid?Math.ceil((e.capital-parseFloat(e.totalPaid))/a):e.duration," * $",(n+a).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",n.toLocaleString(void 0,{maximumFractionDigits:2})," + $",a.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary last"},l.a.createElement("div",null,l.a.createElement("p",{className:"total"},"$",(parseFloat(e.capital)-(e.totalPaid?parseFloat(e.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",isNaN(e.totalPaid)?0:parseFloat(e.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement(f.a,{to:"/loan/".concat(e._id)},l.a.createElement("i",{className:"material-icons info"},"info")))))}))}var rt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.user;a.setState({client:e})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.state=_.initialState,a.service=new T,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.client;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"client-header"},l.a.createElement("div",{className:"formHeader"},l.a.createElement("h1",null,e.fullName?e.fullName.toUpperCase():"Loading..."))),l.a.createElement("div",{className:"user-global-information"},l.a.createElement("div",{className:"user-information"},l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"CONTACTO"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Email",value:e.email}),l.a.createElement(Xe,{detail:"N\xfamero de tel\xe9fono",value:e.cellPhoneNumber}),l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.street+", "+e.residenceName+", "+e.residenceNumber+", "+e.city+", "+e.country}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"PERFIL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Lugar y fecha de nacimiento",value:e.placeOfBirth+", "+le()(e.DOB).format("DD-MMM-YY")}),l.a.createElement(Xe,{detail:"Genero",value:e.gender}),l.a.createElement(Xe,{detail:"Estatus civil",value:e.civilStatus}),l.a.createElement(Xe,{detail:"DNI / C\xe9dula / Pasaporte",value:e.nationalId}),l.a.createElement(Xe,{detail:"Nacionalidad",value:e.nationality}),e.otherNationalities&&l.a.createElement(Xe,{detail:"Otras nacionalidades",value:e.otherNationalities}),e.immigrationCertificate&&l.a.createElement(Xe,{detail:"Certificado Migratorio",value:e.immigrationCertificate}),e.academicLevel&&l.a.createElement(Xe,{detail:"Nivel educativo",value:e.academicLevel}))),l.a.createElement("div",{className:"user-profile-holder"},l.a.createElement("div",{className:"section-header"},"LABORAL"),l.a.createElement("div",null,l.a.createElement(Xe,{detail:"Estatus",value:e.employmentStatus}),e.businessName&&l.a.createElement(Xe,{detail:"Empresa",value:e.businessName}),l.a.createElement(Xe,{detail:"Ingresos",value:e.monthlyIncome}),e.otherIncome&&l.a.createElement(Xe,{detail:"Otros ingresos",value:e.otherIncome}),e.businessPosition&&l.a.createElement(Xe,{detail:"Posici\xf3n",value:e.businessPosition}),e.businessEmail&&l.a.createElement(Xe,{detail:"Email",value:e.businessEmail}),e.businessAddress&&l.a.createElement(Xe,{detail:"Direcci\xf3n",value:e.businessAddress})))),l.a.createElement("div",{className:"client-loan-information"},e.loans&&l.a.createElement(lt,{data:e.loans,clientId:e._id}))))}}]),t}(n.Component),ct=Object(j.withStyles)(function(e){return{name:{width:440},citizenInfo:{width:300},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:330},formControl:{margin:e.spacing.unit}}})(Object(pe.a)(rt));a(43).config();var it=function e(){var t=this;Object(i.a)(this,e),this.totals=function(e){return t.service.get("/totals/".concat(e)).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://ribo-cap.herokuapp.com","/api/test/summary"),withCredentials:!0})};function st(e){var t=e.data,a=e.totalPortfolio;return l.a.createElement("div",null,l.a.createElement("div",{className:"loan-summary-head "},l.a.createElement("div",{className:"detail-summary head-left"},l.a.createElement("p",{className:"title"},"PRESTAMO")),l.a.createElement("div",{className:"detail-summary center head-content"},l.a.createElement("p",{className:"title"},"PESO EN CARTERA")),l.a.createElement("div",{className:"detail-summary center head-content"},l.a.createElement("p",{className:"title"},"CUOTAS * MONTO")),l.a.createElement("div",{className:"detail-summary last head-content"},l.a.createElement("p",{className:"title"},"POR AMORTIZAR"))),t.map(function(e,t){var n=e.capital/e.duration,r=e.interest/100*e.capital;return l.a.createElement("div",{key:t,className:"loan-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},e._borrower.fullName.toUpperCase()),l.a.createElement("p",{className:"total"},"$",parseFloat(e.capital).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},parseFloat(e.interest),"%  \xa0\xa0  |   \xa0\xa0 ",le()(e.startDate).format("LL"))),l.a.createElement("div",{className:"detail-summary center detail-content"},l.a.createElement("p",{className:"total"},((e.capital-parseFloat(e.totalPaid?e.totalPaid:0))/a*100).toLocaleString(void 0,{maximumFractionDigits:2}),"%"),l.a.createElement("p",{className:"acc-total"},(e.capital/a*100).toLocaleString(void 0,{maximumFractionDigits:2}),"%")),l.a.createElement("div",{className:"detail-summary center detail-content"},l.a.createElement("p",{className:"total"},e.totalPaid?Math.ceil((e.capital-parseFloat(e.totalPaid))/n):e.duration," * $",(r+n).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",r.toLocaleString(void 0,{maximumFractionDigits:2})," + $",n.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary last detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"total"},"$",(parseFloat(e.capital)-(e.totalPaid?parseFloat(e.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-total"},"$",isNaN(e.totalPaid)?0:parseFloat(e.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement(f.a,{to:"/loan/".concat(e._id)},l.a.createElement("i",{className:"material-icons"},"info")))))}))}var ot=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0,getSummary:!0},a.loanService=new se,a.summaryService=new it,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.fetchLoans(),this.fetchSummary()}},{key:"fetchLoans",value:function(){var e=this;this.state.getLoan&&this.loanService.getLoanDetails().then(function(t){"peru"===e.props.userLocation.toLowerCase()&&(t=t.filter(function(e){return"peru"===e._borrower.country.toLowerCase()})),e.setState({getLoan:!1,loans:t})}).catch(function(t){e.setState({loans:!1})})}},{key:"fetchSummary",value:function(){var e=this;if(this.state.getSummary){var t=this.props.userLocation;this.summaryService.totals(t).then(function(t){console.log(t),e.setState({getSummary:!1,data:t})}).catch(function(t){e.setState({data:!1})})}}},{key:"render",value:function(){var e=this.state,t=e.loans,a=e.data;return l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"LISTADO DE PRESTAMOS"),t.length>0&&a?l.a.createElement(st,{data:t,totalPortfolio:a[0][0].totalCapitalRemaining}):"")}}]),t}(n.Component),mt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={getSummary:!0},a.summaryService=new it,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.fetchSummary()}},{key:"fetchSummary",value:function(){var e=this;if(this.state.getSummary){var t=this.props.userLocation;this.summaryService.totals(t).then(function(t){console.log(t),e.setState({getSummary:!1,data:t})}).catch(function(t){e.setState({data:!1})})}}},{key:"render",value:function(){var e=this.state.data;return l.a.createElement("div",{className:"content"},e?e.map(function(e){return l.a.createElement("div",{className:"loans-summary"},l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"CARTERA ",e[0]._id.toUpperCase()),l.a.createElement("p",{className:"total"},"$",e[0].totalCapitalRemaining.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"AMORTIZADO"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalPaid.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"TOTAL NOMINAL"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalCapital.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"TASA ACTIVA"),l.a.createElement("p",{className:"total"},(100*e[0].averageActIntRate).toLocaleString(void 0,{maximumFractionDigits:2}),"%"),l.a.createElement("p",{className:"acc-title"},"TASA"),l.a.createElement("p",{className:"acc-total"},(100*e[0].averageIntRate).toLocaleString(void 0,{maximumFractionDigits:2}),"%"),l.a.createElement("p",{className:"acc-title"},"INGRESO POR INTERESES"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalInterest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary center"},l.a.createElement("p",{className:"title"},"PRESTAMO ACTIVO"),l.a.createElement("p",{className:"total"},"$",e[0].averageLoanActiveCap.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"PRESTAMO"),l.a.createElement("p",{className:"acc-total"},"$",e[0].averageLoan.toLocaleString(void 0,{maximumFractionDigits:2})),l.a.createElement("p",{className:"acc-title"},"TOTAL AMORTIZACION"),l.a.createElement("p",{className:"acc-total"},"$",e[0].totalAmort.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"DURACION"),l.a.createElement("p",{className:"total"},(e[0].totalTimeInDays/30/e[0].totalActiveLoans).toLocaleString(void 0,{maximumFractionDigits:2})," meses"),l.a.createElement("p",{className:"acc-title"},"DURACION INICIAL"),l.a.createElement("p",{className:"acc-total"},e[0].averageDuration.toLocaleString(void 0,{maximumFractionDigits:2})," meses"),l.a.createElement("p",{className:"acc-title"},"# INVERSIONES"),l.a.createElement("p",{className:"acc-total"},e[0].totalActiveLoans)))}):"")}}]),t}(n.Component),ut=Object(j.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(X.a);var dt=Object(j.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var t=e.classes,a=e.data;function n(e){var t=le()(new Date),a=le()(e);return le.a.duration(t.diff(a)).asDays()}return console.log("aquiii",a),l.a.createElement("div",null,l.a.createElement(ae.a,{className:t.root},l.a.createElement(W.a,{className:t.table},l.a.createElement(J.a,null,l.a.createElement(ee.a,null,l.a.createElement(ut,{align:"right"},"Pago"),l.a.createElement(ut,null,"Prestatario"),l.a.createElement(ut,{align:"left"},"Fecha de Pago"),l.a.createElement(ut,{align:"right"},"Balance"),l.a.createElement(ut,{align:"right"},"Capital"),l.a.createElement(ut,{align:"right"},"Intereses"),l.a.createElement(ut,{align:"right"},"Mora"),l.a.createElement(ut,{align:"right"},"Total Cuota"))),l.a.createElement(z.a,null,a.filter(function(e){return"disburstment"!==e.tracking}).map(function(e,a){return l.a.createElement(ee.a,{className:t.row,key:a},l.a.createElement(ut,{component:"th",scope:"row"},parseInt(e.interest_pmt)>0?l.a.createElement("i",{className:"material-icons"}," done_outline"):l.a.createElement("i",{className:"material-icons"},"priority_high")),l.a.createElement(ut,{align:"left"},l.a.createElement(f.a,{to:"/loan/".concat(e._loan)},e.borrower[0].fullName)),l.a.createElement(ut,{align:"right"},le()(e.date).format("YYYY-MM-DD")),l.a.createElement(ut,{align:"right"},parseInt(e.balance).toFixed(2)),l.a.createElement(ut,{align:"right"},e.principal.toFixed(2)),l.a.createElement(ut,{align:"right"},e.interest.toFixed(2)),l.a.createElement(ut,{align:"right"},(r=e.date,c=e.interest_pmt,n(r)>0&&!c?function(e,t){return.01*n(e)*t}(e.date,e.principal).toFixed(2):"")," "),l.a.createElement(ut,{align:"right"},parseInt(e.payment).toFixed(2)));var r,c})))),l.a.createElement(ae.a,{className:t.root},l.a.createElement(W.a,{className:t.table},l.a.createElement(J.a,null,l.a.createElement(ee.a,null,l.a.createElement(ut,{align:"right"},"Aprobados"),l.a.createElement(ut,null,"Prestatario"),l.a.createElement(ut,{align:"left"},"Fecha"),l.a.createElement(ut,{align:"right"},"Monto"),l.a.createElement(ut,{align:"right"},"Capital"),l.a.createElement(ut,{align:"right"},"Intereses"),l.a.createElement(ut,{align:"right"},"Total Cuota"))),l.a.createElement(z.a,null,a.filter(function(e){return"disburstment"===e.tracking}).map(function(e,a){return l.a.createElement(ee.a,{className:t.row,key:a},l.a.createElement(ut,{component:"th",scope:"row"},l.a.createElement("i",{className:"material-icons"}," done_outline")),l.a.createElement(ut,{align:"left"},l.a.createElement(f.a,{to:"/loan/".concat(e._loan)},e.borrower[0].fullName)),l.a.createElement(ut,{align:"right"},le()(e.date).format("YYYY-MM-DD")),l.a.createElement(ut,{align:"right"},parseInt(e.balance).toFixed(2)),l.a.createElement(ut,{align:"right"},e.principal.toFixed(2)),l.a.createElement(ut,{align:"right"},e.interest.toFixed(2)),l.a.createElement(ut,{align:"right"},parseInt(e.payment).toFixed(2)))})))))}),pt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0},a.service=new se,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchLoans",value:function(){var e=this;this.state.getLoan&&this.service.getWeekSchedule().then(function(t){"peru"===e.props.location.toLowerCase()&&(t=t.filter(function(e){return"peru"===e._loan._borrower.country.toLowerCase()})),e.setState({getLoan:!1,loans:t})}).catch(function(t){e.setState({loans:!1})})}},{key:"render",value:function(){return this.fetchLoans(),l.a.createElement("div",{className:"content"},l.a.createElement(dt,{data:this.state.loans}))}}]),t}(n.Component);var ht=function(e){var t=e.details,a=e.summary;console.log(a);var n=t.reduce(function(e,t){return e+t.accumTotal},0);return l.a.createElement("div",{className:"one-loan-details-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},"EFECTIVO DISPONIBLE"),l.a.createElement("p",{className:"total"},"$",parseFloat(n).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("p",{className:"title"},"INTERESES"),l.a.createElement("p",{className:"total"},a.interestPaid.toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",a.interestIncome.toLocaleString(void 0,{maximumFractionDigits:2})))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("p",{className:"title"},"CAPITAL"),l.a.createElement("p",{className:"total"},a.capitalRepaid.toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",a.capitalScheduled.toLocaleString(void 0,{maximumFractionDigits:2})))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("p",{className:"title"},"TOTAL"),l.a.createElement("p",{className:"total"},(a.capitalRepaid+a.interestPaid).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",(a.capitalScheduled+a.interestIncome).toLocaleString(void 0,{maximumFractionDigits:2})))))},vt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0,startDate:le()().startOf("week").toISOString().substring(0,10),endDate:le()().endOf("week").toISOString().substring(0,10),country:"Todos",countries:["Todos","Venezuela","Peru"]},a.service=new se,a.transactionService=new he,a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.componentDidMount=function(){a.fetchLoans(),a.fetchAccountsTotals()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchAccountsTotals",value:function(){var e=this;if(!this.state.accounts){var t=this.props.userLocation;console.log(t),this.transactionService.getInvestorsAvailability(t).then(function(t){e.setState({accounts:t})}).catch(function(t){e.setState({accounts:!1})})}}},{key:"fetchLoans",value:function(e){var t=this;e&&e.preventDefault(e);var a=this.state,n=a.startDate,l=a.endDate,r=this.props.userLocation;this.service.getPeriodSchedule(n,l,r).then(function(){var e=Object(Pe.a)(Oe.a.mark(function e(a){var n,l,r,c;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.filter(function(e){return"disburstment"!==e.tracking});case 2:return a=e.sent,e.next=5,a.reduce(function(e,t){return e+t.interest},0);case 5:return n=e.sent,e.next=8,a.reduce(function(e,t){return e+(t.interest_pmt?t.interest_pmt:0)},0);case 8:return l=e.sent,e.next=11,a.reduce(function(e,t){return e+t.principal},0);case 11:return r=e.sent,e.next=14,a.reduce(function(e,t){return e+(t.principal_pmt?t.principal_pmt:0)},0);case 14:c=e.sent,t.setState({getLoan:!1,loans:a,loanSummary:{interestIncome:n,interestPaid:l,capitalRepaid:c,capitalScheduled:r}});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){t.setState({loans:!1})})}},{key:"render",value:function(){var e=this.state,t=e.loans,a=e.accounts,n=e.loanSummary;return l.a.createElement("div",{className:"content"},l.a.createElement("div",null,a&&n&&l.a.createElement(ht,{details:a,summary:n})),l.a.createElement("div",null,l.a.createElement(dt,{data:t})))}}]),t}(n.Component),Et=a(67),gt=a.n(Et);var ft=function(e){var t=e.investors;return l.a.createElement("div",{className:"loan-investor-holder"},l.a.createElement("div",{className:"investor-head "},l.a.createElement("div",{className:"detail-summary-left"},l.a.createElement("p",{className:"title"},"INVERSIONISTA")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"MONTO")),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"title"},"%"))),t.map(function(e,t){return l.a.createElement("div",{key:t,className:"investor"},l.a.createElement("div",{className:"detail-summary-left acc-inv"},e._investor.name.toUpperCase()+" "+e._investor.lastName.toUpperCase()),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"acc-inv"},e.amount)),l.a.createElement("div",{className:"detail-summary"},l.a.createElement("p",{className:"acc-inv"},100*e.pct)))}))};var Nt=function(e){var t=e.details,a=e.interestIncome,n=e.interestProjected;return l.a.createElement("div",{className:"one-loan-details-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},l.a.createElement(f.a,{to:"/client/".concat(t._borrower._id)},t._borrower.fullName.toUpperCase())),l.a.createElement("p",{className:"total"},"$",parseFloat(t.capital).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",le()(t.startDate).format("LL")))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"DETALLE"),l.a.createElement("p",{className:"total"},parseFloat(t.interest),"% | ",t.duration," m"))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"POR AMORTIZAR"),l.a.createElement("p",{className:"total"},"$",(parseFloat(t.capital)-(t.totalPaid?parseFloat(t.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/$",isNaN(t.totalPaid)?0:parseFloat(t.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))))),l.a.createElement("div",{className:"detail-summary last detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"INTERESES"),l.a.createElement("p",{className:"total"},"$",a.toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/$",n)))))};var bt=function(e){var t=e.loanSchedule,a=e.openPaymentOption,n=e.reversePayment;return l.a.createElement("div",{className:"loan-schedule-holder"},l.a.createElement("div",{className:"loan-schedule-head "},l.a.createElement("div",{className:"detail-schedule head-date"},l.a.createElement("p",{className:"title"},"FECHA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERES")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CUOTA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERESES/P")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL/P")),l.a.createElement("div",{className:"detail-schedule last head-content"},l.a.createElement("p",{className:"title"},"*"))),t.map(function(e,t){return l.a.createElement("div",{key:t,className:"loan-schedule-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("p",{className:"acc-total"},le()(e.date).format("YY-MM-DD"))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},(e.interest+e.principal).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest_pmt?e.interest_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal_pmt?e.principal_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")),l.a.createElement("div",{className:"detail-schedule last details-content"},l.a.createElement("p",{className:"acc-total"},e.interest_pmt||e.principal_pmt||0===t?t<1?"":l.a.createElement("i",{className:"material-icons",onClick:function(){return n(e._id)}}," delete_box "):l.a.createElement("i",{className:"material-icons",onClick:function(){return a(e)}}," add_box "))))}))},yt=a(78),Ct=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.handleChangePayment=function(e){var t=e.target,n=t.name,l=t.value;l=parseFloat(l),a.setState(Object(I.a)({},n,l))},a.componentDidMount=function(){var e=a.props.installment;a.setState({date_pmt:e.date,principal_pmt:e.principal,interest_pmt:e.interest,paymentId:e._id,cashAccount:void 0,fee:[]})},a.handleChangeFees=function(e){var t=e.target.value,n=yt.fees[t].fee;a.setState({fee:n})},a.state={date_pmt:(new Date).toISOString().substring(0,10),principal_pmt:void 0,interest_pmt:void 0,paymentId:void 0,cashAccount:void 0,fee:[]},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.receivePayment,n=t.closePaymentOption;return l.a.createElement("div",{className:"loan-schedule-holder"},l.a.createElement("div",{className:"loan-payment-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("label",{className:"acc-title"},"FECHA"),l.a.createElement("input",{type:"date",className:"form-control",value:new Date(this.state.date_pmt).toISOString().substring(0,10),onChange:this.handleChange})),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"INTERESES"),l.a.createElement("input",{label:"INTERESES",name:"interest_pmt",className:"form-control input-sm",value:this.state.interest_pmt,onChange:this.handleChangePayment,type:"number"})),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"CAPITAL"),l.a.createElement("input",{label:"principal",name:"principal_pmt",type:"number",className:"form-control input-sm",value:this.state.principal_pmt,onChange:this.handleChangePayment})),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"CUENTA"),l.a.createElement("select",{className:"form-control input-sm",name:"cashAccount",id:"cashAccount",value:this.state.cashAccount,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",null),yt.accounts.map(function(e,t){return l.a.createElement("option",{key:t,value:e},e)}))),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"FEE"),l.a.createElement("select",{className:"form-control input-sm",name:"feeIndex",id:"feeIndex",value:this.state.feeIndex,onChange:function(t){return e.handleChangeFees(t)}},l.a.createElement("option",null),yt.fees.map(function(t,a){return l.a.createElement("option",{key:a,value:a,onChange:e.handleChangeFees},t.text)}))),l.a.createElement("div",{className:"detail-schedule"},l.a.createElement("label",{className:"acc-title"},"*"),l.a.createElement("div",{className:"payment-operations"},l.a.createElement("div",{className:"acc-total"},l.a.createElement("i",{className:"material-icons",onClick:function(){return a(e.state)}},"add_box")),l.a.createElement("div",{className:"acc-total"},l.a.createElement("i",{className:"material-icons",onClick:function(){return n()}},"remove_circle"))))))}}]),t}(n.Component),St=a(154),It=a.n(St),Ot=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(Pe.a)(Oe.a.mark(function e(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.loader();case 1:case"end":return e.stop()}},e)})),a.loader=Object(Pe.a)(Oe.a.mark(function e(){var t,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.loanId,e.next=3,a.loanService.getLoanCompleteDetails(t);case 3:n=e.sent,a.setState({loan:n}),a.detailsCalc();case 6:case"end":return e.stop()}},e)})),a.detailsCalc=function(){var e=a.state.loan.details.loanSchedule,t=e.reduce(function(e,t){return e+(t.interest_pmt?t.interest_pmt:0)},0),n=e.reduce(function(e,t){return e+(t.interest?t.interest:0)},0);a.setState({interestIncome:t,interestProjected:n})},a.compare=function(e,t){return e.date<t.date?-1:e.date>t.date?1:0},a.reversePayment=function(e){a.loanService.deletePayment(e).then(function(e){console.log(e),a.loader()}).catch(function(e){a.setState({error:e})})},a.openPaymentOption=function(e){a.setState({openPayment:!0,installment:e})},a.closePaymentOption=function(){a.setState({openPayment:!1,installment:null})},a.paymentReceiver=function(e){a.loanService.makePayment(Object(h.a)({},e)).then(function(e){a.loader(),a.setState({openPayment:!1})}).catch(function(e){a.setState({error:e})})},a.loanRemove=function(e){a.loanService.deleteLoan(e).then(function(){a.props.history.push("/client/".concat(a.state.loan.details._borrower._id))}).catch(function(e){a.setState({error:e})})},a.state={loan:{details:{},investors:{}},interestIncome:0,interestProjected:0,openPayment:!1,installment:null},a.loanService=new se,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.interestIncome,n=t.interestProjected,r=t.installment,c=this.state.loan,i=c.details,s=c.investors;return this.state.loan.details._borrower?l.a.createElement("div",{className:"content"},l.a.createElement(Nt,{details:i,interestIncome:a,interestProjected:n}),l.a.createElement("div",{className:"loan-content-holder"},l.a.createElement(ft,{investors:s}),l.a.createElement("div",null,this.state.openPayment&&l.a.createElement(Ct,{installment:r,receivePayment:this.paymentReceiver,closePaymentOption:this.closePaymentOption}),l.a.createElement(bt,{loanSchedule:i.loanSchedule.sort(this.compare),openPaymentOption:this.openPaymentOption,reversePayment:this.reversePayment}))),l.a.createElement("div",{className:"loan-delete"},l.a.createElement(gt.a,{variant:"contained",color:"secondary",className:"right-button",onClick:function(){return e.loanRemove(i._id)}},"ELIMINAR PRESTAMO",l.a.createElement(It.a,null)))):""}}]),t}(n.Component),Pt=Object(pe.a)(Ot);var Lt=function(e){var t=e.details;return l.a.createElement("div",{className:"one-loan-details-summary"},l.a.createElement("div",{className:"detail-summary detail-left"},l.a.createElement("p",{className:"title"},"CAPITAL"),l.a.createElement("p",{className:"total"},"$",parseFloat(t.capital).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/ ",le()(t.startDate).format("LL")))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"DETALLE"),l.a.createElement("p",{className:"total"},parseFloat(t.interest),"% | ",t.duration," m"))),l.a.createElement("div",{className:"detail-summary detail-content"},l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"POR AMORTIZAR"),l.a.createElement("p",{className:"total"},"$",(parseFloat(t.capital)-(t.totalPaid?parseFloat(t.totalPaid):0)).toLocaleString(void 0,{maximumFractionDigits:2}),l.a.createElement("span",{className:"acc-total"},"/$",isNaN(t.totalPaid)?0:parseFloat(t.totalPaid).toLocaleString(void 0,{maximumFractionDigits:2}))))))};var xt=function(e){var t=e.loanSchedule;return l.a.createElement("div",{className:"loan-schedule-holder"},l.a.createElement("div",{className:"loan-schedule-head "},l.a.createElement("div",{className:"detail-schedule head-date"},l.a.createElement("p",{className:"title"},"FECHA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERES")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CUOTA")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"INTERESES/P")),l.a.createElement("div",{className:"detail-schedule center head-content"},l.a.createElement("p",{className:"title"},"CAPITAL/P"))),t.map(function(e,t){return l.a.createElement("div",{key:t,className:"loan-schedule-content"},l.a.createElement("div",{className:"detail-schedule details-date"},l.a.createElement("p",{className:"acc-total"},le()(e.date).format("YY-MM-DD"))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal.toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},(e.interest+e.principal).toLocaleString(void 0,{maximumFractionDigits:2}))),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.interest_pmt?e.interest_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")),l.a.createElement("div",{className:"detail-schedule details-content"},l.a.createElement("p",{className:"acc-total"},e.principal_pmt?e.principal_pmt.toLocaleString(void 0,{maximumFractionDigits:2}):"")))}))},Dt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(Pe.a)(Oe.a.mark(function e(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.loader();case 1:case"end":return e.stop()}},e)})),a.loader=Object(Pe.a)(Oe.a.mark(function e(){var t,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.loanId,e.next=3,a.loanService.getLoanCompleteDetails(t);case 3:n=e.sent,a.setState({loan:n});case 5:case"end":return e.stop()}},e)})),a.compare=function(e,t){return e.date<t.date?-1:e.date>t.date?1:0},a.state={loan:{details:{}}},a.loanService=new se,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.loan.details;return this.state.loan.details._borrower?l.a.createElement("div",{className:"content"},l.a.createElement(Lt,{details:e}),l.a.createElement("div",{className:"loan-content-holder"},l.a.createElement(xt,{loanSchedule:e.loanSchedule.sort(this.compare)}))):""}}]),t}(n.Component),Ft=Object(pe.a)(Dt),wt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={loans:[],getLoan:!0,startDate:le()().startOf("month").toISOString().substring(0,10),endDate:le()().endOf("month").toISOString().substring(0,10),country:"Todos",countries:["Todos","Venezuela","Peru"]},a.service=new se,a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(I.a)({},n,l))},a.componentDidMount=function(){a.fetchLoans()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchLoans",value:function(e){var t=this;e&&e.preventDefault(e);var a=this.state,n=a.startDate,l=a.endDate,r=this.props.userLocation;this.service.getPeriodSchedule(n,l,r).then(function(e){t.setState({getLoan:!1,loans:e})}).catch(function(e){t.setState({loans:!1})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.country,n=t.loans.filter(function(e){return"Todos"!==a?e.borrower[0].country.includes(a.toUpperCase()):e});return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"form-row input-row-aligner"},l.a.createElement("div",{className:"form-group col-md-2"},l.a.createElement("label",null,"Fecha Inicial"),l.a.createElement("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",value:this.state.startDate,onChange:function(t){return e.handleChange(t)},required:!0})),l.a.createElement("div",{className:"form-group col-md-2"},l.a.createElement("label",null,"Fecha Final"),l.a.createElement("input",{type:"date",className:"form-control",id:"endDate",name:"endDate",value:this.state.endDate,onChange:function(t){return e.handleChange(t)},required:!0})),l.a.createElement("div",{className:"form-group col-md-1 "},l.a.createElement("button",{className:"btn btn-info",type:"button",onClick:function(t){return e.fetchLoans(t)}},"Buscar")),"WORLD"===this.props.userLocation?l.a.createElement("div",{className:"form-group col-md-2 "},l.a.createElement("label",null,"Pa\xeds"),l.a.createElement("select",{className:"form-control",name:"country",id:"country",value:this.state.country,onChange:function(t){return e.handleChange(t)}},this.state.countries?this.state.countries.map(function(e,t){return l.a.createElement("option",{key:t,value:e},e)}):"")):""),l.a.createElement(dt,{data:n}))}}]),t}(n.Component),kt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).getTheUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null},a.service=new g,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser&&this.state.loggedInUser.admin?l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C,{userInSession:this.state.loggedInUser,logout:this.logout})),l.a.createElement(d.a,null,l.a.createElement(p.a,{path:"/loan/:loanId",render:function(e){var t=e.match;return l.a.createElement(Pt,{loanId:t.params.loanId})}}),l.a.createElement(p.a,{path:"/client/:clientId",render:function(e){var t=e.match;return l.a.createElement(nt,{clientId:t.params.clientId})}}),l.a.createElement(p.a,{path:"/create-loan/:clientId",render:function(t){var a=t.match;return l.a.createElement(be,{clientId:a.params.clientId,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/client",render:function(){return l.a.createElement(H,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/payment",render:function(){return l.a.createElement(ue,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/create-investor-account",render:function(){return l.a.createElement(Ce,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/investor-transaction",render:function(){return l.a.createElement(Se,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/investor-details",render:function(){return l.a.createElement(Ze,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/loan-list",render:function(){return l.a.createElement(ot,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/portfolio",render:function(){return l.a.createElement(mt,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/weekly-schedule",render:function(){return l.a.createElement(pt,{getUser:e.getTheUser,location:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/period-schedule",render:function(){return l.a.createElement(wt,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/client-list",render:function(){return l.a.createElement(ie,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}}),l.a.createElement(p.a,{exact:!0,path:"/dashboard",render:function(){return l.a.createElement(vt,{getUser:e.getTheUser,userLocation:e.state.loggedInUser.location})}})),l.a.createElement(S,null)):this.state.loggedInUser&&this.state.loggedInUser.borrower?l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C,{userInSession:this.state.loggedInUser,logout:this.logout})),l.a.createElement(d.a,null,l.a.createElement(p.a,{exact:!0,path:"/client/profile",render:function(){return e.state.loggedInUser.borrowerStatus?l.a.createElement($,{user:e.state.loggedInUser,getUser:e.getTheUser}):l.a.createElement(ct,{user:e.state.loggedInUser,getUser:e.getTheUser})}}),l.a.createElement(p.a,{path:"/loan/:loanId",render:function(e){var t=e.match;return l.a.createElement(Ft,{loanId:t.params.loanId})}})),l.a.createElement(S,null)):l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(C,{userInSession:this.state.loggedInUser,logout:this.logout}),l.a.createElement(d.a,null,l.a.createElement(p.a,{exact:!0,path:"/signup",render:function(){return l.a.createElement(w,{getUser:e.getTheUser})}}),l.a.createElement(p.a,{exact:!0,path:"/login",render:function(){return l.a.createElement(A,{getUser:e.getTheUser})}}))),l.a.createElement(S,null))}}]),t}(n.Component),At=a(396);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(At.a,null,l.a.createElement(kt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},78:function(e,t){e.exports={fees:[{text:"Patricia 45%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.45},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Patricia 30%, Miguel 10%",fee:[{admin:"5c8103c1cf81366c6c0f1337",fee:.3},{admin:"5c8103d8cf81366c6c0f1339",fee:.1}]},{text:"Miguel 10%",fee:[{admin:"5c80fd19a5b4b86c15c18b8c",fee:.1}]}],accounts:["PLPERU","REMPERU","GCUS","GFUS"],feeDistribution:[{participants:"P",text:"Patricia 33.33%"},{participants:"PG",text:"Patricia 50%"},{participants:"PM",text:"Patricia 30%, Miguel 10%"},{participants:"GPM",text:"Patricia 45%, Miguel 10%"},{participants:"M",text:"Miguel 10%"}]}}},[[227,1,2]]]);
//# sourceMappingURL=main.e59fdddf.chunk.js.map